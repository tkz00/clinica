"use strict";(self.webpackChunkClinica=self.webpackChunkClinica||[]).push([[179],{2011:(Et,Te,L)=>{L.d(Te,{Dh:()=>ge,GT:()=>se,cc:()=>be,hO:()=>je,on:()=>G,pX:()=>ie,xv:()=>ye});var c=L(4650),$=L(9260),k=L(4976);Et=L.hmd(Et);const ee=["ngOnDestroy"],ie=(xe,Oe,$e,De={})=>new Proxy(xe,{get:(Ie,Re)=>$e.runOutsideAngular(()=>{var He;if(xe[Re])return!(null===(He=De?.spy)||void 0===He)&&He.get&&De.spy.get(Re,xe[Re]),xe[Re];if(ee.indexOf(Re)>-1)return()=>{};const ke=Oe.toPromise().then(re=>{const tt=re&&re[Re];return"function"==typeof tt?tt.bind(re):tt&&tt.then?tt.then(St=>$e.run(()=>St)):$e.run(()=>tt)});return new Proxy(()=>{},{get:(re,tt)=>ke[tt],apply:(re,tt,St)=>ke.then(it=>{var Zt;const ct=it&&it(...St);return!(null===(Zt=De?.spy)||void 0===Zt)&&Zt.apply&&De.spy.apply(Re,St,ct),ct})})})}),se=(xe,Oe)=>{Oe.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(De=>{Object.defineProperty(xe.prototype,De,Object.getOwnPropertyDescriptor($e.prototype||$e,De))})})};class _e{constructor(Oe){return Oe}}const ge=new c.OlP("angularfire2.app.options"),ye=new c.OlP("angularfire2.app.name");function G(xe,Oe,$e){const Ie="object"==typeof $e&&$e||{};Ie.name=Ie.name||"string"==typeof $e&&$e||"[DEFAULT]";const He=$.Z.apps.filter(ke=>ke&&ke.name===Ie.name)[0]||Oe.runOutsideAngular(()=>$.Z.initializeApp(xe,Ie));try{JSON.stringify(xe)!==JSON.stringify(He.options)&&z("error",`${He.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(He)}const z=(xe,...Oe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[xe](...Oe)},J={provide:_e,useFactory:G,deps:[ge,c.R0b,[new c.FiY,ye]]};let je=(()=>{class xe{constructor($e){$.Z.registerVersion("angularfire",k.q4.full,"core"),$.Z.registerVersion("angularfire",k.q4.full,"app-compat"),$.Z.registerVersion("angular",c.q4F.full,$e.toString())}static initializeApp($e,De){return{ngModule:xe,providers:[{provide:ge,useValue:$e},{provide:ye,useValue:De}]}}}return xe.\u0275fac=function($e){return new($e||xe)(c.LFG(c.Lbi))},xe.\u0275mod=c.oAB({type:xe}),xe.\u0275inj=c.cJS({providers:[J]}),xe})();function be(xe,Oe,$e,De,Ie){const[,Re,He]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===xe)||[];if(Re)return function qe(xe,Oe){try{return xe.toString()===Oe.toString()}catch{return xe===Oe}}(Ie,He)||(pe("error",`${Oe} was already initialized on the ${$e} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ie,was:He})),Re;{const ke=De();return globalThis.\u0275AngularfireInstanceCache.push([xe,ke,Ie]),ke}}const st=!!Et.hot,pe=(xe,...Oe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[xe](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Et,Te,L)=>{L.d(Te,{q4:()=>ar,iC:()=>Kc,fc:()=>Zc,HU:()=>$s,vb:()=>xd,JM:()=>Ko,u3:()=>Rd});var c=L(4650),$=L(259),k=L(5861),ee=L(6881),ie=L(2090),se=L(4859),_e=L(1877);const ge=(w,C)=>C.some(A=>w instanceof A);let ye,G;const je=new WeakMap,be=new WeakMap,qe=new WeakMap,st=new WeakMap,pe=new WeakMap;let $e={get(w,C,A){if(w instanceof IDBTransaction){if("done"===C)return be.get(w);if("objectStoreNames"===C)return w.objectStoreNames||qe.get(w);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return He(w[C])},set:(w,C,A)=>(w[C]=A,!0),has:(w,C)=>w instanceof IDBTransaction&&("done"===C||"store"===C)||C in w};function Re(w){return"function"==typeof w?function Ie(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...C){return w.apply(ke(this),C),He(je.get(this))}:function(...C){return He(w.apply(ke(this),C))}:function(C,...A){const U=w.call(ke(this),C,...A);return qe.set(U,C.sort?C.sort():[C]),He(U)}}(w):(w instanceof IDBTransaction&&function Oe(w){if(be.has(w))return;const C=new Promise((A,U)=>{const q=()=>{w.removeEventListener("complete",K),w.removeEventListener("error",ce),w.removeEventListener("abort",ce)},K=()=>{A(),q()},ce=()=>{U(w.error||new DOMException("AbortError","AbortError")),q()};w.addEventListener("complete",K),w.addEventListener("error",ce),w.addEventListener("abort",ce)});be.set(w,C)}(w),ge(w,function z(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,$e):w)}function He(w){if(w instanceof IDBRequest)return function xe(w){const C=new Promise((A,U)=>{const q=()=>{w.removeEventListener("success",K),w.removeEventListener("error",ce)},K=()=>{A(He(w.result)),q()},ce=()=>{U(w.error),q()};w.addEventListener("success",K),w.addEventListener("error",ce)});return C.then(A=>{A instanceof IDBCursor&&je.set(A,w)}).catch(()=>{}),pe.set(C,w),C}(w);if(st.has(w))return st.get(w);const C=Re(w);return C!==w&&(st.set(w,C),pe.set(C,w)),C}const ke=w=>pe.get(w),St=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],Zt=new Map;function ct(w,C){if(!(w instanceof IDBDatabase)||C in w||"string"!=typeof C)return;if(Zt.get(C))return Zt.get(C);const A=C.replace(/FromIndex$/,""),U=C!==A,q=it.includes(A);if(!(A in(U?IDBIndex:IDBObjectStore).prototype)||!q&&!St.includes(A))return;const K=function(){var ce=(0,k.Z)(function*(We,...ze){const dt=this.transaction(We,q?"readwrite":"readonly");let Ot=dt.store;return U&&(Ot=Ot.index(ze.shift())),(yield Promise.all([Ot[A](...ze),q&&dt.done]))[0]});return function(ze){return ce.apply(this,arguments)}}();return Zt.set(C,K),K}!function De(w){$e=w($e)}(w=>({...w,get:(C,A,U)=>ct(C,A)||w.get(C,A,U),has:(C,A)=>!!ct(C,A)||w.has(C,A)}));const Is="@firebase/installations",de="0.6.4",me=1e4,Ce=`w:${de}`,Me="FIS_v2",Ge="https://firebaseinstallations.googleapis.com/v1",Le=36e5,ut=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _t(w){return w instanceof ie.ZR&&w.code.includes("request-failed")}function rn({projectId:w}){return`${Ge}/projects/${w}/installations`}function hn(w){return{token:w.token,requestStatus:2,expiresIn:Fi(w.expiresIn),creationTime:Date.now()}}function In(w,C){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,k.Z)(function*(w,C){const U=(yield C.json()).error;return ut.create("request-failed",{requestName:w,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Vn({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Qn(w){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,k.Z)(function*(w){const C=yield w();return C.status>=500&&C.status<600?w():C})).apply(this,arguments)}function Fi(w){return Number(w.replace("s","000"))}function ft(){return(ft=(0,k.Z)(function*({appConfig:w,heartbeatServiceProvider:C},{fid:A}){const U=rn(w),q=Vn(w),K=C.getImmediate({optional:!0});if(K){const dt=yield K.getHeartbeatsHeader();dt&&q.append("x-firebase-client",dt)}const We={method:"POST",headers:q,body:JSON.stringify({fid:A,authVersion:Me,appId:w.appId,sdkVersion:Ce})},ze=yield Qn(()=>fetch(U,We));if(ze.ok){const dt=yield ze.json();return{fid:dt.fid||A,registrationStatus:2,refreshToken:dt.refreshToken,authToken:hn(dt.authToken)}}throw yield In("Create Installation",ze)})).apply(this,arguments)}function On(w){return new Promise(C=>{setTimeout(C,w)})}const $n=/^[cdef][\w-]{21}$/,Pr="";function jr(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const A=function ln(w){return function Wi(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return $n.test(A)?A:Pr}catch{return Pr}}function Kt(w){return`${w.appName}!${w.appId}`}const lt=new Map;function Lt(w,C){const A=Kt(w);kn(A,C),function Xr(w,C){const A=function lr(){return!Fn&&"BroadcastChannel"in self&&(Fn=new BroadcastChannel("[Firebase] FID Change"),Fn.onmessage=w=>{kn(w.data.key,w.data.fid)}),Fn}();A&&A.postMessage({key:w,fid:C}),function Jt(){0===lt.size&&Fn&&(Fn.close(),Fn=null)}()}(A,C)}function kn(w,C){const A=lt.get(w);if(A)for(const U of A)U(C)}let Fn=null;const Ii="firebase-installations-database",tn=1,ei="firebase-installations-store";let Bt=null;function Hn(){return Bt||(Bt=function re(w,C,{blocked:A,upgrade:U,blocking:q,terminated:K}={}){const ce=indexedDB.open(w,C),We=He(ce);return U&&ce.addEventListener("upgradeneeded",ze=>{U(He(ce.result),ze.oldVersion,ze.newVersion,He(ce.transaction))}),A&&ce.addEventListener("blocked",()=>A()),We.then(ze=>{K&&ze.addEventListener("close",()=>K()),q&&ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),We}(Ii,tn,{upgrade:(w,C)=>{0===C&&w.createObjectStore(ei)}})),Bt}function Mn(w,C){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,k.Z)(function*(w,C){const A=Kt(w),q=(yield Hn()).transaction(ei,"readwrite"),K=q.objectStore(ei),ce=yield K.get(A);return yield K.put(C,A),yield q.done,(!ce||ce.fid!==C.fid)&&Lt(w,C.fid),C})).apply(this,arguments)}function zn(w){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,k.Z)(function*(w){const C=Kt(w),U=(yield Hn()).transaction(ei,"readwrite");yield U.objectStore(ei).delete(C),yield U.done})).apply(this,arguments)}function Or(w,C){return zr.apply(this,arguments)}function zr(){return(zr=(0,k.Z)(function*(w,C){const A=Kt(w),q=(yield Hn()).transaction(ei,"readwrite"),K=q.objectStore(ei),ce=yield K.get(A),We=C(ce);return void 0===We?yield K.delete(A):yield K.put(We,A),yield q.done,We&&(!ce||ce.fid!==We.fid)&&Lt(w,We.fid),We})).apply(this,arguments)}function H(w){return B.apply(this,arguments)}function B(){return B=(0,k.Z)(function*(w){let C;const A=yield Or(w.appConfig,U=>{const q=function O(w){return Tt(w||{fid:jr(),registrationStatus:0})}(U),K=function F(w,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(ut.create("app-offline"))};const A={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},U=function R(w,C){return W.apply(this,arguments)}(w,A);return{installationEntry:A,registrationPromise:U}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:ve(w)}:{installationEntry:C}}(w,q);return C=K.registrationPromise,K.installationEntry});return A.fid===Pr?{installationEntry:yield C}:{installationEntry:A,registrationPromise:C}}),B.apply(this,arguments)}function W(){return W=(0,k.Z)(function*(w,C){try{const A=yield function Bn(w,C){return ft.apply(this,arguments)}(w,C);return Mn(w.appConfig,A)}catch(A){throw _t(A)&&409===A.customData.serverCode?yield zn(w.appConfig):yield Mn(w.appConfig,{fid:C.fid,registrationStatus:0}),A}}),W.apply(this,arguments)}function ve(w){return nt.apply(this,arguments)}function nt(){return(nt=(0,k.Z)(function*(w){let C=yield xt(w.appConfig);for(;1===C.registrationStatus;)yield On(100),C=yield xt(w.appConfig);if(0===C.registrationStatus){const{installationEntry:A,registrationPromise:U}=yield H(w);return U||A}return C})).apply(this,arguments)}function xt(w){return Or(w,C=>{if(!C)throw ut.create("installation-not-found");return Tt(C)})}function Tt(w){return function Yt(w){return 1===w.registrationStatus&&w.registrationTime+me<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function Cn(){return(Cn=(0,k.Z)(function*({appConfig:w,heartbeatServiceProvider:C},A){const U=function $t(w,{fid:C}){return`${rn(w)}/${C}/authTokens:generate`}(w,A),q=function Nr(w,{refreshToken:C}){const A=Vn(w);return A.append("Authorization",function Ys(w){return`${Me} ${w}`}(C)),A}(w,A),K=C.getImmediate({optional:!0});if(K){const dt=yield K.getHeartbeatsHeader();dt&&q.append("x-firebase-client",dt)}const We={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:Ce,appId:w.appId}})},ze=yield Qn(()=>fetch(U,We));if(ze.ok)return hn(yield ze.json());throw yield In("Generate Auth Token",ze)})).apply(this,arguments)}function dr(w){return is.apply(this,arguments)}function is(){return is=(0,k.Z)(function*(w,C=!1){let A;const U=yield Or(w.appConfig,K=>{if(!Xt(K))throw ut.create("not-registered");const ce=K.authToken;if(!C&&function vt(w){return 2===w.requestStatus&&!function fn(w){const C=Date.now();return C<w.creationTime||w.creationTime+w.expiresIn<C+Le}(w)}(ce))return K;if(1===ce.requestStatus)return A=function he(w,C){return te.apply(this,arguments)}(w,C),K;{if(!navigator.onLine)throw ut.create("app-offline");const We=function sn(w){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:C})}(K);return A=function mt(w,C){return Rt.apply(this,arguments)}(w,We),We}});return A?yield A:U.authToken}),is.apply(this,arguments)}function te(){return(te=(0,k.Z)(function*(w,C){let A=yield Fe(w.appConfig);for(;1===A.authToken.requestStatus;)yield On(100),A=yield Fe(w.appConfig);const U=A.authToken;return 0===U.requestStatus?dr(w,C):U})).apply(this,arguments)}function Fe(w){return Or(w,C=>{if(!Xt(C))throw ut.create("not-registered");return function kr(w){return 1===w.requestStatus&&w.requestTime+me<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Rt(){return Rt=(0,k.Z)(function*(w,C){try{const A=yield function Pt(w,C){return Cn.apply(this,arguments)}(w,C),U=Object.assign(Object.assign({},C),{authToken:A});return yield Mn(w.appConfig,U),A}catch(A){if(!_t(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const U=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Mn(w.appConfig,U)}else yield zn(w.appConfig);throw A}}),Rt.apply(this,arguments)}function Xt(w){return void 0!==w&&2===w.registrationStatus}function uu(){return(uu=(0,k.Z)(function*(w){const C=w,{installationEntry:A,registrationPromise:U}=yield H(C);return U?U.catch(console.error):dr(C).catch(console.error),A.fid})).apply(this,arguments)}function Qs(){return Qs=(0,k.Z)(function*(w,C=!1){const A=w;return yield function fr(w){return Qe.apply(this,arguments)}(A),(yield dr(A,C)).token}),Qs.apply(this,arguments)}function Qe(){return(Qe=(0,k.Z)(function*(w){const{registrationPromise:C}=yield H(w);C&&(yield C)})).apply(this,arguments)}function Ci(w){return ut.create("missing-app-config-values",{valueName:w})}const zt="installations",Di=w=>{const C=w.getProvider("app").getImmediate(),A=function ya(w){if(!w||!w.options)throw Ci("App Configuration");if(!w.name)throw Ci("App Name");const C=["projectId","apiKey","appId"];for(const A of C)if(!w.options[A])throw Ci(A);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(C);return{app:C,appConfig:A,heartbeatServiceProvider:(0,ee._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},_a=w=>{const C=w.getProvider("app").getImmediate(),A=(0,ee._getProvider)(C,zt).getImmediate();return{getId:()=>function hr(w){return uu.apply(this,arguments)}(A),getToken:q=>function Bh(w){return Qs.apply(this,arguments)}(A,q)}};(function Ds(){(0,ee._registerComponent)(new se.wA(zt,Di,"PUBLIC")),(0,ee._registerComponent)(new se.wA("installations-internal",_a,"PRIVATE"))})(),(0,ee.registerVersion)(Is,de),(0,ee.registerVersion)(Is,de,"esm2017");const rr="@firebase/remote-config",Fr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wp{constructor(C,A,U,q){this.client=C,this.storage=A,this.storageCache=U,this.logger=q}isCachedDataFresh(C,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-A,q=U<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${q}.`),q}fetch(C){var A=this;return(0,k.Z)(function*(){const[U,q]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(q&&A.isCachedDataFresh(C.cacheMaxAgeMillis,U))return q;C.eTag=q&&q.eTag;const K=yield A.client.fetch(C),ce=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&ce.push(A.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(ce),K})()}}function ql(w=navigator){return w.languages&&w.languages[0]||w.language}class $h{constructor(C,A,U,q,K,ce){this.firebaseInstallations=C,this.sdkVersion=A,this.namespace=U,this.projectId=q,this.apiKey=K,this.appId=ce}fetch(C){var A=this;return(0,k.Z)(function*(){const[U,q]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ze={sdk_version:A.sdkVersion,app_instance_id:U,app_instance_id_token:q,app_id:A.appId,language_code:ql()},dt={method:"POST",headers:We,body:JSON.stringify(ze)},Ot=fetch(ce,dt),Nt=new Promise((_i,Ur)=>{C.signal.addEventListener(()=>{const ku=new Error("The operation was aborted.");ku.name="AbortError",Ur(ku)})});let Un;try{yield Promise.race([Ot,Nt]),Un=yield Ot}catch(_i){let Ur="fetch-client-network";throw"AbortError"===_i?.name&&(Ur="fetch-timeout"),Fr.create(Ur,{originalErrorMessage:_i?.message})}let Ct=Un.status;const ji=Un.headers.get("ETag")||void 0;let Qc,Mi;if(200===Un.status){let _i;try{_i=yield Un.json()}catch(Ur){throw Fr.create("fetch-client-parse",{originalErrorMessage:Ur?.message})}Qc=_i.entries,Mi=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===Mi?Ct=500:"NO_CHANGE"===Mi?Ct=304:("NO_TEMPLATE"===Mi||"EMPTY_CONFIG"===Mi)&&(Qc={}),304!==Ct&&200!==Ct)throw Fr.create("fetch-status",{httpStatus:Ct});return{status:Ct,eTag:ji,config:Qc}})()}}class Zl{constructor(C,A){this.client=C,this.storage=A}fetch(C){var A=this;return(0,k.Z)(function*(){const U=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(C,U)})()}attemptFetch(C,{throttleEndTimeMillis:A,backoffCount:U}){var q=this;return(0,k.Z)(function*(){yield function Wl(w,C){return new Promise((A,U)=>{const q=Math.max(C-Date.now(),0),K=setTimeout(A,q);w.addEventListener(()=>{clearTimeout(K),U(Fr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,A);try{const K=yield q.client.fetch(C);return yield q.storage.deleteThrottleMetadata(),K}catch(K){if(!function Zp(w){if(!(w instanceof ie.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}(K))throw K;const ce={throttleEndTimeMillis:Date.now()+(0,ie.$s)(U),backoffCount:U+1};return yield q.storage.setThrottleMetadata(ce),q.attemptFetch(C,ce)}})()}}class jh{constructor(C,A,U,q,K){this.app=C,this._client=A,this._storageCache=U,this._storage=q,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function As(w,C){const A=w.target.error||void 0;return Fr.create(C,{originalErrorMessage:A&&A?.message})}const Mo="app_namespace_store";class Ql{constructor(C,A,U,q=function zh(){return new Promise((w,C)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=U=>{C(As(U,"storage-open"))},A.onsuccess=U=>{w(U.target.result)},A.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Mo,{keyPath:"compositeKey"})}}catch(A){C(Fr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=C,this.appName=A,this.namespace=U,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var A=this;return(0,k.Z)(function*(){const U=yield A.openDbPromise;return new Promise((q,K)=>{const We=U.transaction([Mo],"readonly").objectStore(Mo),ze=A.createCompositeKey(C);try{const dt=We.get(ze);dt.onerror=Ot=>{K(As(Ot,"storage-get"))},dt.onsuccess=Ot=>{const Nt=Ot.target.result;q(Nt?Nt.value:void 0)}}catch(dt){K(Fr.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(C,A){var U=this;return(0,k.Z)(function*(){const q=yield U.openDbPromise;return new Promise((K,ce)=>{const ze=q.transaction([Mo],"readwrite").objectStore(Mo),dt=U.createCompositeKey(C);try{const Ot=ze.put({compositeKey:dt,value:A});Ot.onerror=Nt=>{ce(As(Nt,"storage-set"))},Ot.onsuccess=()=>{K()}}catch(Ot){ce(Fr.create("storage-set",{originalErrorMessage:Ot?.message}))}})})()}delete(C){var A=this;return(0,k.Z)(function*(){const U=yield A.openDbPromise;return new Promise((q,K)=>{const We=U.transaction([Mo],"readwrite").objectStore(Mo),ze=A.createCompositeKey(C);try{const dt=We.delete(ze);dt.onerror=Ot=>{K(As(Ot,"storage-delete"))},dt.onsuccess=()=>{q()}}catch(dt){K(Fr.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class ro{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const A=C.storage.getLastFetchStatus(),U=C.storage.getLastSuccessfulFetchTimestampMillis(),q=C.storage.getActiveConfig(),K=yield A;K&&(C.lastFetchStatus=K);const ce=yield U;ce&&(C.lastSuccessfulFetchTimestampMillis=ce);const We=yield q;We&&(C.activeConfig=We)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Xl(){return du.apply(this,arguments)}function du(){return(du=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function No(){(0,ee._registerComponent)(new se.wA("remote-config",function w(C,{instanceIdentifier:A}){const U=C.getProvider("app").getImmediate(),q=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fr.create("registration-window");if(!(0,ie.hl)())throw Fr.create("indexed-db-unavailable");const{projectId:K,apiKey:ce,appId:We}=U.options;if(!K)throw Fr.create("registration-project-id");if(!ce)throw Fr.create("registration-api-key");if(!We)throw Fr.create("registration-app-id");const ze=new Ql(We,U.name,A=A||"firebase"),dt=new ro(ze),Ot=new _e.Yd(rr);Ot.logLevel=_e.in.ERROR;const Nt=new $h(q,ee.SDK_VERSION,A,K,ce,We),Un=new Zl(Nt,ze),Ct=new Wp(Un,ze,dt,Ot),ji=new jh(U,Ct,dt,ze,Ot);return function Gr(w){const C=(0,ie.m9)(w);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ji),ji},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(rr,"0.4.4"),(0,ee.registerVersion)(rr,"0.4.4","esm2017")}();const Gh=(w,C)=>C.some(A=>w instanceof A);let xs,pc;const Po=new WeakMap,io=new WeakMap,Rn=new WeakMap,Ia=new WeakMap,fu=new WeakMap;let oo={get(w,C,A){if(w instanceof IDBTransaction){if("done"===C)return io.get(w);if("objectStoreNames"===C)return w.objectStoreNames||Rn.get(w);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return qr(w[C])},set:(w,C,A)=>(w[C]=A,!0),has:(w,C)=>w instanceof IDBTransaction&&("done"===C||"store"===C)||C in w};function pu(w){return"function"==typeof w?function Wh(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function qh(){return pc||(pc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...C){return w.apply(gr(this),C),qr(Po.get(this))}:function(...C){return qr(w.apply(gr(this),C))}:function(C,...A){const U=w.call(gr(this),C,...A);return Rn.set(U,C.sort?C.sort():[C]),qr(U)}}(w):(w instanceof IDBTransaction&&function so(w){if(io.has(w))return;const C=new Promise((A,U)=>{const q=()=>{w.removeEventListener("complete",K),w.removeEventListener("error",ce),w.removeEventListener("abort",ce)},K=()=>{A(),q()},ce=()=>{U(w.error||new DOMException("AbortError","AbortError")),q()};w.addEventListener("complete",K),w.addEventListener("error",ce),w.addEventListener("abort",ce)});io.set(w,C)}(w),Gh(w,function hu(){return xs||(xs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,oo):w)}function qr(w){if(w instanceof IDBRequest)return function ir(w){const C=new Promise((A,U)=>{const q=()=>{w.removeEventListener("success",K),w.removeEventListener("error",ce)},K=()=>{A(qr(w.result)),q()},ce=()=>{U(w.error),q()};w.addEventListener("success",K),w.addEventListener("error",ce)});return C.then(A=>{A instanceof IDBCursor&&Po.set(A,w)}).catch(()=>{}),fu.set(C,w),C}(w);if(Ia.has(w))return Ia.get(w);const C=pu(w);return C!==w&&(Ia.set(w,C),fu.set(C,w)),C}const gr=w=>fu.get(w);function Ca(w,C,{blocked:A,upgrade:U,blocking:q,terminated:K}={}){const ce=indexedDB.open(w,C),We=qr(ce);return U&&ce.addEventListener("upgradeneeded",ze=>{U(qr(ce.result),ze.oldVersion,ze.newVersion,qr(ce.transaction))}),A&&ce.addEventListener("blocked",()=>A()),We.then(ze=>{K&&ze.addEventListener("close",()=>K()),q&&ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),We}function Ms(w,{blocked:C}={}){const A=indexedDB.deleteDatabase(w);return C&&A.addEventListener("blocked",()=>C()),qr(A).then(()=>{})}const ed=["get","getKey","getAll","getAllKeys","count"],os=["put","add","delete","clear"],Da=new Map;function Oo(w,C){if(!(w instanceof IDBDatabase)||C in w||"string"!=typeof C)return;if(Da.get(C))return Da.get(C);const A=C.replace(/FromIndex$/,""),U=C!==A,q=os.includes(A);if(!(A in(U?IDBIndex:IDBObjectStore).prototype)||!q&&!ed.includes(A))return;const K=function(){var ce=(0,k.Z)(function*(We,...ze){const dt=this.transaction(We,q?"readwrite":"readonly");let Ot=dt.store;return U&&(Ot=Ot.index(ze.shift())),(yield Promise.all([Ot[A](...ze),q&&dt.done]))[0]});return function(ze){return ce.apply(this,arguments)}}();return Da.set(C,K),K}!function Tr(w){oo=w(oo)}(w=>({...w,get:(C,A,U)=>Oo(C,A)||w.get(C,A,U),has:(C,A)=>!!Oo(C,A)||w.has(C,A)}));const Ft="/firebase-messaging-sw.js",gu="/firebase-cloud-messaging-push-scope",Zh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gc="https://fcmregistrations.googleapis.com/v1",mc="google.c.a.c_id",yc="google.c.a.c_l",td="google.c.a.ts",nd="google.c.a.e";var fe=(()=>{return(w=fe||(fe={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",fe;var w})();function Ut(w){const C=new Uint8Array(w);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _c(w){const A=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(A),q=new Uint8Array(U.length);for(let K=0;K<U.length;++K)q[K]=U.charCodeAt(K);return q}const ba="fcm_token_details_db",Gn=5,rd="fcm_token_object_Store";function Ti(){return Ti=(0,k.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(ba))return null;let C=null;return(yield Ca(ba,Gn,{upgrade:(U=(0,k.Z)(function*(q,K,ce,We){var ze;if(K<2||!q.objectStoreNames.contains(rd))return;const dt=We.objectStore(rd),Ot=yield dt.index("fcmSenderId").get(w);if(yield dt.clear(),Ot)if(2===K){const Nt=Ot;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;C={token:Nt.fcmToken,createTime:null!==(ze=Nt.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:Ut(Nt.vapidKey)}}}else if(3===K){const Nt=Ot;C={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Ut(Nt.auth),p256dh:Ut(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Ut(Nt.vapidKey)}}}else if(4===K){const Nt=Ot;C={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Ut(Nt.auth),p256dh:Ut(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Ut(Nt.vapidKey)}}}}),function(K,ce,We,ze){return U.apply(this,arguments)})})).close(),yield Ms(ba),yield Ms("fcm_vapid_details_db"),yield Ms("undefined"),function mu(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:C}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var U}),Ti.apply(this,arguments)}const id="firebase-messaging-database",sd=1,Rs="firebase-messaging-store";let Fo=null;function Sr(){return Fo||(Fo=Ca(id,sd,{upgrade:(w,C)=>{0===C&&w.createObjectStore(Rs)}})),Fo}function ni(w){return Ns.apply(this,arguments)}function Ns(){return Ns=(0,k.Z)(function*(w){const C=ad(w),U=yield(yield Sr()).transaction(Rs).objectStore(Rs).get(C);if(U)return U;{const q=yield function ko(w){return Ti.apply(this,arguments)}(w.appConfig.senderId);if(q)return yield as(w,q),q}}),Ns.apply(this,arguments)}function as(w,C){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,k.Z)(function*(w,C){const A=ad(w),q=(yield Sr()).transaction(Rs,"readwrite");return yield q.objectStore(Rs).put(C,A),yield q.done,C})).apply(this,arguments)}function ao(){return(ao=(0,k.Z)(function*(w){const C=ad(w),U=(yield Sr()).transaction(Rs,"readwrite");yield U.objectStore(Rs).delete(C),yield U.done})).apply(this,arguments)}function ad({appConfig:w}){return w.appId}const qn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yu(w,C){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,k.Z)(function*(w,C){const A=yield Sa(w),U=vu(C),q={method:"POST",headers:A,body:JSON.stringify(U)};let K;try{K=yield(yield fetch(vc(w.appConfig),q)).json()}catch(ce){throw qn.create("token-subscribe-failed",{errorInfo:ce?.toString()})}if(K.error)throw qn.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw qn.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function _u(){return(_u=(0,k.Z)(function*(w,C){const A=yield Sa(w),U=vu(C.subscriptionOptions),q={method:"PATCH",headers:A,body:JSON.stringify(U)};let K;try{K=yield(yield fetch(`${vc(w.appConfig)}/${C.token}`,q)).json()}catch(ce){throw qn.create("token-update-failed",{errorInfo:ce?.toString()})}if(K.error)throw qn.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw qn.create("token-update-no-token");return K.token})).apply(this,arguments)}function cd(w,C){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,k.Z)(function*(w,C){const U={method:"DELETE",headers:yield Sa(w)};try{const K=yield(yield fetch(`${vc(w.appConfig)}/${C}`,U)).json();if(K.error)throw qn.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(q){throw qn.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function vc({projectId:w}){return`${gc}/projects/${w}/registrations`}function Sa(w){return wc.apply(this,arguments)}function wc(){return(wc=(0,k.Z)(function*({appConfig:w,installations:C}){const A=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function vu({p256dh:w,auth:C,endpoint:A,vapidKey:U}){const q={web:{endpoint:A,auth:C,p256dh:w}};return U!==Zh&&(q.web.applicationPubKey=U),q}const ld=6048e5;function dd(){return dd=(0,k.Z)(function*(w){const C=yield function Qp(w,C){return fd.apply(this,arguments)}(w.swRegistration,w.vapidKey),A={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:C.endpoint,auth:Ut(C.getKey("auth")),p256dh:Ut(C.getKey("p256dh"))},U=yield ni(w.firebaseDependencies);if(U){if(function Jp(w,C){return C.vapidKey===w.vapidKey&&C.endpoint===w.endpoint&&C.auth===w.auth&&C.p256dh===w.p256dh}(U.subscriptionOptions,A))return Date.now()>=U.createTime+ld?function An(w,C){return hd.apply(this,arguments)}(w,{token:U.token,createTime:Date.now(),subscriptionOptions:A}):U.token;try{yield cd(w.firebaseDependencies,U.token)}catch(q){console.warn(q)}return Uo(w.firebaseDependencies,A)}return Uo(w.firebaseDependencies,A)}),dd.apply(this,arguments)}function Yi(){return Yi=(0,k.Z)(function*(w){const C=yield ni(w.firebaseDependencies);C&&(yield cd(w.firebaseDependencies,C.token),yield function od(w){return ao.apply(this,arguments)}(w.firebaseDependencies));const A=yield w.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),Yi.apply(this,arguments)}function hd(){return hd=(0,k.Z)(function*(w,C){try{const A=yield function ud(w,C){return _u.apply(this,arguments)}(w.firebaseDependencies,C),U=Object.assign(Object.assign({},C),{token:A,createTime:Date.now()});return yield as(w.firebaseDependencies,U),A}catch(A){throw yield function Lr(w){return Yi.apply(this,arguments)}(w),A}}),hd.apply(this,arguments)}function Uo(w,C){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,k.Z)(function*(w,C){const U={token:yield yu(w,C),createTime:Date.now(),subscriptionOptions:C};return yield as(w,U),U.token})).apply(this,arguments)}function fd(){return(fd=(0,k.Z)(function*(w,C){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_c(C)})})).apply(this,arguments)}function wu(w){const C={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function Cc(w,C){if(!C.notification)return;w.notification={};const A=C.notification.title;A&&(w.notification.title=A);const U=C.notification.body;U&&(w.notification.body=U);const q=C.notification.image;q&&(w.notification.image=q);const K=C.notification.icon;K&&(w.notification.icon=K)}(C,w),function pd(w,C){C.data&&(w.data=C.data)}(C,w),function gd(w,C){var A,U,q,K,ce;if(!(C.fcmOptions||null!==(A=C.notification)&&void 0!==A&&A.click_action))return;w.fcmOptions={};const We=null!==(q=null===(U=C.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==q?q:null===(K=C.notification)||void 0===K?void 0:K.click_action;We&&(w.fcmOptions.link=We);const ze=null===(ce=C.fcmOptions)||void 0===ce?void 0:ce.analytics_label;ze&&(w.fcmOptions.analyticsLabel=ze)}(C,w),C}function Vo(w,C){const A=[];for(let U=0;U<w.length;U++)A.push(w.charAt(U)),U<C.length&&A.push(C.charAt(U));return A.join("")}function us(w){return qn.create("missing-app-config-values",{valueName:w})}Vo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xp{constructor(C,A,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Aa(w){if(!w||!w.options)throw us("App Configuration Object");if(!w.name)throw us("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:A}=w;for(const U of C)if(!A[U])throw us(U);return{appName:w.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:q,installations:A,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Kh(w){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,k.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Ft,{scope:gu}),w.swRegistration.update().catch(()=>{})}catch(C){throw qn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function cs(){return(cs=(0,k.Z)(function*(w,C){if(!C&&!w.swRegistration&&(yield Kh(w)),C||!w.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");w.swRegistration=C}})).apply(this,arguments)}function xa(){return(xa=(0,k.Z)(function*(w,C){C?w.vapidKey=C:w.vapidKey||(w.vapidKey=Zh)})).apply(this,arguments)}function Bo(){return Bo=(0,k.Z)(function*(w,C){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield function Dc(w,C){return xa.apply(this,arguments)}(w,C?.vapidKey),yield function md(w,C){return cs.apply(this,arguments)}(w,C?.serviceWorkerRegistration),function Ec(w){return dd.apply(this,arguments)}(w)}),Bo.apply(this,arguments)}function Ps(){return(Ps=(0,k.Z)(function*(w,C,A){const U=function uo(w){switch(w){case fe.NOTIFICATION_CLICKED:return"notification_open";case fe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:A[mc],message_name:A[yc],message_time:A[td],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function co(){return co=(0,k.Z)(function*(w,C){const A=C.data;if(!A.isFirebaseMessaging)return;w.onMessageHandler&&A.messageType===fe.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(wu(A)):w.onMessageHandler.next(wu(A)));const U=A.data;(function Eu(w){return"object"==typeof w&&!!w&&mc in w})(U)&&"1"===U[nd]&&(yield function yd(w,C,A){return Ps.apply(this,arguments)}(w,A.messageType,U))}),co.apply(this,arguments)}const jo="@firebase/messaging",Ra=w=>{const C=new Xp(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function $o(w,C){return co.apply(this,arguments)}(C,A)),C},bc=w=>{const C=w.getProvider("messaging").getImmediate();return{getToken:U=>function Cu(w,C){return Bo.apply(this,arguments)}(C,U)}};function Yh(){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Na(){(0,ee._registerComponent)(new se.wA("messaging",Ra,"PUBLIC")),(0,ee._registerComponent)(new se.wA("messaging-internal",bc,"PRIVATE")),(0,ee.registerVersion)(jo,"0.12.4"),(0,ee.registerVersion)(jo,"0.12.4","esm2017")}();const Os="analytics",bu="firebase_id",wd="origin",Pa=6e4,Ed="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tu="https://www.googletagmanager.com/gtag/js",sr=new _e.Yd("@firebase/analytics"),Nn=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Qh(w){if(!w.startsWith(Tu)){const C=Nn.create("invalid-gtag-resource",{gtagURL:w});return sr.warn(C.message),""}return w}function ks(w){return Promise.all(w.map(C=>C.catch(A=>A)))}function Fs(){return(Fs=(0,k.Z)(function*(w,C,A,U,q,K){const ce=U[q];try{if(ce)yield C[ce];else{const ze=(yield ks(A)).find(dt=>dt.measurementId===q);ze&&(yield C[ze.appId])}}catch(We){sr.error(We)}w("config",q,K)})).apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(w,C,A,U,q){try{let K=[];if(q&&q.send_to){let ce=q.send_to;Array.isArray(ce)||(ce=[ce]);const We=yield ks(A);for(const ze of ce){const dt=We.find(Nt=>Nt.measurementId===ze),Ot=dt&&C[dt.appId];if(!Ot){K=[];break}K.push(Ot)}}0===K.length&&(K=Object.values(C)),yield Promise.all(K),w("event",U,q||{})}catch(K){sr.error(K)}})).apply(this,arguments)}const Au=30,fo=new class Id{constructor(C={},A=1e3){this.throttleMetadata=C,this.intervalMillis=A}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,A){this.throttleMetadata[C]=A}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Xh(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function un(){return(un=(0,k.Z)(function*(w){var C;const{appId:A,apiKey:U}=w,q={method:"GET",headers:Xh(U)},K=Ed.replace("{app-id}",A),ce=yield fetch(K,q);if(200!==ce.status&&304!==ce.status){let We="";try{const ze=yield ce.json();null!==(C=ze.error)&&void 0!==C&&C.message&&(We=ze.error.message)}catch{}throw Nn.create("config-fetch-failed",{httpStatus:ce.status,responseMessage:We})}return ce.json()})).apply(this,arguments)}function Dd(){return(Dd=(0,k.Z)(function*(w,C=fo,A){const{appId:U,apiKey:q,measurementId:K}=w.options;if(!U)throw Nn.create("no-app-id");if(!q){if(K)return{measurementId:K,appId:U};throw Nn.create("no-api-key")}const ce=C.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new ay;return setTimeout((0,k.Z)(function*(){We.abort()}),void 0!==A?A:Pa),Pc({appId:U,apiKey:q,measurementId:K},ce,We,C)})).apply(this,arguments)}function Pc(w,C,A){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,k.Z)(function*(w,{throttleEndTimeMillis:C,backoffCount:A},U,q=fo){var K;const{appId:ce,measurementId:We}=w;try{yield function ef(w,C){return new Promise((A,U)=>{const q=Math.max(C-Date.now(),0),K=setTimeout(A,q);w.addEventListener(()=>{clearTimeout(K),U(Nn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(U,C)}catch(ze){if(We)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:ce,measurementId:We};throw ze}try{const ze=yield function Cd(w){return un.apply(this,arguments)}(w);return q.deleteThrottleMetadata(ce),ze}catch(ze){const dt=ze;if(!function oy(w){if(!(w instanceof ie.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}(dt)){if(q.deleteThrottleMetadata(ce),We)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:ce,measurementId:We};throw ze}const Ot=503===Number(null===(K=dt?.customData)||void 0===K?void 0:K.httpStatus)?(0,ie.$s)(A,q.intervalMillis,Au):(0,ie.$s)(A,q.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Ot,backoffCount:A+1};return q.setThrottleMetadata(ce,Nt),sr.debug(`Calling attemptFetch again in ${Ot} millis`),Pc(w,Nt,U,q)}}),Oc.apply(this,arguments)}class ay{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let po,Lc;function tf(){return(tf=(0,k.Z)(function*(w,C,A,U,q){if(q&&q.global)w("event",A,U);else{const K=yield C;w("event",A,Object.assign(Object.assign({},U),{send_to:K}))}})).apply(this,arguments)}function nn(){return(nn=(0,k.Z)(function*(){if(!(0,ie.hl)())return sr.warn(Nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(w){return sr.warn(Nn.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function ot(){return ot=(0,k.Z)(function*(w,C,A,U,q,K,ce){var We;const ze=function Nc(w){return Dd.apply(this,arguments)}(w);ze.then(Ct=>{A[Ct.measurementId]=Ct.appId,w.options.measurementId&&Ct.measurementId!==w.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${Ct.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ct=>sr.error(Ct)),C.push(ze);const dt=function Si(){return nn.apply(this,arguments)}().then(Ct=>{if(Ct)return U.getId()}),[Ot,Nt]=yield Promise.all([ze,dt]);(function Go(w){const C=window.document.getElementsByTagName("script");for(const A of Object.values(C))if(A.src&&A.src.includes(Tu)&&A.src.includes(w))return A;return null})(K)||function zo(w,C){const A=function Su(w,C){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(w,C)),A}("firebase-js-sdk-policy",{createScriptURL:Qh}),U=document.createElement("script"),q=`${Tu}?l=${w}&id=${C}`;U.src=A?A?.createScriptURL(q):q,U.async=!0,document.head.appendChild(U)}(K,Ot.measurementId),Lc&&(q("consent","default",Lc),function Ru(w){Lc=w}(void 0)),q("js",new Date);const Un=null!==(We=ce?.config)&&void 0!==We?We:{};return Un[wd]="firebase",Un.update=!0,null!=Nt&&(Un[bu]=Nt),q("config",Ot.measurementId,Un),po&&(q("set",po),function Uc(w){po=w}(void 0)),Ot.measurementId}),ot.apply(this,arguments)}class Vi{constructor(C){this.app=C}_delete(){return delete Jn[this.app.options.appId],Promise.resolve()}}let Jn={},Td=[];const Fa={};let Sd,Ai,Wr="dataLayer",Vc="gtag",Us=!1;function Wo(w,C,A){!function go(){const w=[];if((0,ie.ru)()&&w.push("This is a browser extension environment."),(0,ie.zI)()||w.push("Cookies are not available."),w.length>0){const C=w.map((U,q)=>`(${q+1}) ${U}`).join(" "),A=Nn.create("invalid-analytics-context",{errorInfo:C});sr.warn(A.message)}}();const U=w.options.appId;if(!U)throw Nn.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw Nn.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jn[U])throw Nn.create("already-exists",{id:U});if(!Us){!function xc(w){let C=[];Array.isArray(window[w])?C=window[w]:window[w]=C}(Wr);const{wrappedGtag:K,gtagCore:ce}=function ho(w,C,A,U,q){let K=function(...ce){window[U].push(arguments)};return window[q]&&"function"==typeof window[q]&&(K=window[q]),window[q]=function Oa(w,C,A,U){function K(){return K=(0,k.Z)(function*(ce,...We){try{if("event"===ce){const[ze,dt]=We;yield function Jh(w,C,A,U,q){return lo.apply(this,arguments)}(w,C,A,ze,dt)}else if("config"===ce){const[ze,dt]=We;yield function Mc(w,C,A,U,q,K){return Fs.apply(this,arguments)}(w,C,A,U,ze,dt)}else if("consent"===ce){const[ze]=We;w("consent","update",ze)}else if("get"===ce){const[ze,dt,Ot]=We;w("get",ze,dt,Ot)}else if("set"===ce){const[ze]=We;w("set",ze)}else w(ce,...We)}catch(ze){sr.error(ze)}}),K.apply(this,arguments)}return function q(ce){return K.apply(this,arguments)}}(K,w,C,A),{gtagCore:K,wrappedGtag:window[q]}}(Jn,Td,Fa,Wr,Vc);Ai=K,Sd=ce,Us=!0}return Jn[U]=function Ui(w,C,A,U,q,K,ce){return ot.apply(this,arguments)}(w,Td,Fa,C,Sd,Wr,A),new Vi(w)}function Ad(){return xi.apply(this,arguments)}function xi(){return(xi=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const $a="@firebase/analytics";!function zc(){(0,ee._registerComponent)(new se.wA(Os,(C,{options:A})=>Wo(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ee._registerComponent)(new se.wA("analytics-internal",function w(C){try{const A=C.getProvider(Os).getImmediate();return{logEvent:(U,q,K)=>function nf(w,C,A,U){w=(0,ie.m9)(w),function uy(w,C,A,U,q){return tf.apply(this,arguments)}(Ai,Jn[w.app.options.appId],C,A,U).catch(q=>sr.error(q))}(A,U,q,K)}}catch(A){throw Nn.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ee.registerVersion)($a,"0.10.0"),(0,ee.registerVersion)($a,"0.10.0","esm2017")}();var Gc=L(4408),mi=L(7565);const Ar=new class qc extends mi.v{}(class ja extends Gc.o{constructor(C,A){super(C,A),this.scheduler=C,this.work=A}schedule(C,A=0){return A>0?super.schedule(C,A):(this.delay=A,this.state=C,this.scheduler.flush(this),this)}execute(C,A){return A>0||this.closed?super.execute(C,A):this._execute(C,A)}requestAsyncId(C,A,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(C,A,U):(C.flush(this),0)}});var rf=L(4986),xn=L(9751),yo=L(8505),Vs=L(5363),yi=L(9468);const ar=new c.GfV("7.6.1"),za="__angularfire_symbol__analyticsIsSupportedValue",Pu="__angularfire_symbol__analyticsIsSupported",Zo="__angularfire_symbol__remoteConfigIsSupportedValue",Bi="__angularfire_symbol__remoteConfigIsSupported",Bs="__angularfire_symbol__messagingIsSupportedValue",yr="__angularfire_symbol__messagingIsSupported";function Ko(w,C,A){if(C){if(1===C.length)return C[0];const K=C.filter(ce=>ce.app===A);if(1===K.length)return K[0]}return A.container.getProvider(w).getImmediate({optional:!0})}globalThis[Pu]||(globalThis[Pu]=Ad().then(w=>globalThis[za]=w).catch(()=>globalThis[za]=!1)),globalThis[yr]||(globalThis[yr]=Yh().then(w=>globalThis[Bs]=w).catch(()=>globalThis[Bs]=!1)),globalThis[Bi]||(globalThis[Bi]=Xl().then(w=>globalThis[Zo]=w).catch(()=>globalThis[Zo]=!1));const xd=(w,C)=>{const A=C?[C]:(0,$.C6)(),U=[];return A.forEach(q=>{q.container.getProvider(w).instances.forEach(ce=>{U.includes(ce)||U.push(ce)})}),U};function _o(){}class Yo{constructor(C,A=Ar){this.zone=C,this.delegate=A}now(){return this.delegate.now()}schedule(C,A,U){const q=this.zone;return this.delegate.schedule(function(ce){q.runGuarded(()=>{C.apply(this,[ce])})},A,U)}}class At{constructor(C){this.zone=C,this.task=null}call(C,A){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_o,{},_o,_o)),A.pipe((0,yo.b)({next:U,complete:U,error:U})).subscribe(C).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $s=(()=>{class w{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Yo(Zone.current)),this.insideAngular=A.run(()=>new Yo(Zone.current,rf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(A){return new(A||w)(c.LFG(c.R0b))},w.\u0275prov=c.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function vo(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function js(w){return vo().ngZone.run(()=>w())}function Zc(w){return w.pipe((0,Vs.Q)(vo().outsideAngular))}function Kc(w){return vo(),function Md(w){return function(A){return(A=A.lift(new At(w.ngZone))).pipe((0,yi.R)(w.outsideAngular),(0,Vs.Q)(w.insideAngular))}}(vo())(w)}const Yc=(w,C)=>function(){const U=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),js(()=>w.apply(void 0,U))},Rd=(w,C)=>function(){let A;const U=arguments;for(let K=0;K<arguments.length;K++)"function"==typeof U[K]&&(C&&(A||(A=js(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_o,{},_o,_o)))),U[K]=Yc(U[K],A));const q=function Qo(w){return vo().ngZone.runOutsideAngular(()=>w())}(()=>w.apply(this,U));if(!C){if(q instanceof xn.y){const K=vo();return q.pipe((0,yi.R)(K.outsideAngular),(0,Vs.Q)(K.insideAngular))}return js(()=>q)}return q instanceof xn.y?q.pipe(Kc):q instanceof Promise?js(()=>new Promise((K,ce)=>q.then(We=>js(()=>K(We)),We=>js(()=>ce(We))))):"function"==typeof q&&A?function(){return setTimeout(()=>{A&&"scheduled"===A.state&&A.invoke()},10),q.apply(this,arguments)}:js(()=>q)}},1389:(Et,Te,L)=>{L.d(Te,{$:()=>Ft,A:()=>z,D:()=>be,I:()=>Ln,J:()=>Di,L:()=>Zi,N:()=>Or,P:()=>Ui,Q:()=>Ql,R:()=>Mu,U:()=>Jl,V:()=>Xl,W:()=>du,X:()=>ss,Y:()=>hu,Z:()=>qh,_:()=>fu,a:()=>ri,a0:()=>Zh,a1:()=>mc,a2:()=>Kp,a3:()=>rd,a4:()=>Ti,a5:()=>id,a6:()=>Rs,a7:()=>Sr,a8:()=>Ns,a9:()=>Ki,aA:()=>re,aB:()=>Pu,aC:()=>zn,aD:()=>zr,aE:()=>yo,aF:()=>Va,aG:()=>Ua,aH:()=>pn,aL:()=>Qi,aO:()=>xs,aa:()=>od,ab:()=>ad,ac:()=>Yp,ad:()=>ud,ae:()=>cd,af:()=>vc,ai:()=>ld,aj:()=>dd,ak:()=>Lr,an:()=>Wh,ao:()=>Cc,aq:()=>xa,ar:()=>jo,as:()=>St,at:()=>Tt,au:()=>ve,av:()=>De,aw:()=>Nt,ax:()=>yr,ay:()=>Yt,az:()=>Ie,b:()=>Du,c:()=>Ai,d:()=>Wo,e:()=>Bc,f:()=>$a,g:()=>qc,h:()=>Gc,i:()=>Rc,j:()=>rf,k:()=>Mi,l:()=>ka,m:()=>ku,p:()=>ge,r:()=>bd,s:()=>Ls,u:()=>Si});var c=L(5861),$=L(2090),k=L(6881),ee=L(7582),ie=L(1877),se=L(4859);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const be=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},qe=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new ie.Yd("@firebase/auth");function $e(v,...f){xe.logLevel<=ie.in.ERROR&&xe.error(`Auth (${k.SDK_VERSION}): ${v}`,...f)}function De(v,...f){throw ke(v,...f)}function Ie(v,...f){return ke(v,...f)}function Re(v,f,m){const E=Object.assign(Object.assign({},qe()),{[f]:m});return new $.LL("auth","Firebase",E).create(f,{appName:v.name})}function He(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&De(v,"argument-error"),Re(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(v,...f){if("string"!=typeof v){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return st.create(v,...f)}function re(v,f,...m){if(!v)throw ke(f,...m)}function tt(v){const f="INTERNAL ASSERTION FAILED: "+v;throw $e(f),new Error(f)}function St(v,f){v||tt(f)}function it(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Zt(){return"http:"===ct()||"https:"===ct()}function ct(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class me{constructor(f,m){this.shortDelay=f,this.longDelay=m,St(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Is(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zt()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ce(v,f){St(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Me{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Le=new me(3e4,6e4);function Pe(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function ht(v,f,m,E){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,c.Z)(function*(v,f,m,E,x={}){return ut(v,x,(0,c.Z)(function*(){let P={},Y={};E&&("GET"===f?Y=E:P={body:JSON.stringify(E)});const ae=(0,$.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),Me.fetch()(In(v,v.config.apiHost,m,ae),Object.assign({method:f,headers:Be,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ut(v,f,m){return _t.apply(this,arguments)}function _t(){return(_t=(0,c.Z)(function*(v,f,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ge),f);try{const x=new Rr(v),P=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw Vn(v,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const ae=P.ok?Y.errorMessage:Y.error.message,[Be,Ze]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw Vn(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Be)throw Vn(v,"email-already-in-use",Y);if("USER_DISABLED"===Be)throw Vn(v,"user-disabled",Y);const It=E[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Re(v,It,Ze);De(v,It)}}catch(x){if(x instanceof $.ZR)throw x;De(v,"network-request-failed",{message:String(x)})}})).apply(this,arguments)}function rn(v,f,m,E){return hn.apply(this,arguments)}function hn(){return(hn=(0,c.Z)(function*(v,f,m,E,x={}){const P=yield ht(v,f,m,E,x);return"mfaPendingCredential"in P&&De(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function In(v,f,m,E){const x=`${f}${m}?${E}`;return v.config.emulator?Ce(v.config,x):`${v.config.apiScheme}://${x}`}class Rr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),Le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(v,f,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const x=Ie(v,f,E);return x.customData._tokenResponse=m,x}function Qn(){return(Qn=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Fi(){return(Fi=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Bn(){return(Bn=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ft(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function $n(){return($n=(0,c.Z)(function*(v,f=!1){const m=(0,$.m9)(v),E=yield m.getIdToken(f),x=jr(E);re(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,Y=P?.sign_in_provider;return{claims:x,token:E,authTime:ft(Pr(x.auth_time)),issuedAtTime:ft(Pr(x.iat)),expirationTime:ft(Pr(x.exp)),signInProvider:Y||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Pr(v){return 1e3*Number(v)}function jr(v){const[f,m,E]=v.split(".");if(void 0===f||void 0===m||void 0===E)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,$.tV)(m);return x?JSON.parse(x):($e("Failed to decode base64 JWT payload"),null)}catch(x){return $e("Caught error parsing JWT payload as JSON",x?.toString()),null}}function Kt(v,f){return lt.apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof $.ZR&&function Lt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class jn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class Cr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ft(this.lastLoginAt),this.creationTime=ft(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kn(v){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,c.Z)(function*(v){var f;const m=v.auth,E=yield v.getIdToken(),x=yield Kt(v,function Ys(v,f){return Bn.apply(this,arguments)}(m,{idToken:E}));re(x?.users.length,m,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const Y=null!==(f=P.providerUserInfo)&&void 0!==f&&f.length?function Ii(v){return v.map(f=>{var{providerId:m}=f,E=(0,ee._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],ae=function Jt(v,f){return[...v.filter(E=>!f.some(x=>x.providerId===E.providerId)),...f]}(v.providerData,Y),It=!!v.isAnonymous&&!(v.email&&P.passwordHash||ae?.length),Gt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ae,metadata:new Cr(P.createdAt,P.lastLoginAt),isAnonymous:It};Object.assign(v,Gt)}),Xr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(v){const f=(0,$.m9)(v);yield kn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ei(){return(ei=(0,c.Z)(function*(v,f){const m=yield ut(v,{},(0,c.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,Y=In(v,x,"/v1/token",`key=${P}`),ae=yield v._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Me.fetch()(Y,{method:"POST",headers:ae,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){re(f.idToken,"internal-error"),re(typeof f.idToken<"u","internal-error"),re(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function ln(v){const f=jr(v);return re(f,"internal-error"),re(typeof f.exp<"u","internal-error"),re(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,c.Z)(function*(){return re(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,c.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:Y}=yield function tn(v,f){return ei.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(x,P,Number(Y))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:x,expirationTime:P}=m,Y=new Bt;return E&&(re("string"==typeof E,"internal-error",{appName:f}),Y.refreshToken=E),x&&(re("string"==typeof x,"internal-error",{appName:f}),Y.accessToken=x),P&&(re("number"==typeof P,"internal-error",{appName:f}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Bt,this.toJSON())}_performRefresh(){return tt("not implemented")}}function Hn(v,f){re("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class Mn{constructor(f){var{uid:m,auth:E,stsTokenManager:x}=f,P=(0,ee._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Cr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,c.Z)(function*(){const E=yield Kt(m,m.stsTokenManager.getToken(m.auth,f));return re(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Wi(v){return $n.apply(this,arguments)}(this,f)}reload(){return function Fn(v){return lr.apply(this,arguments)}(this)}_assign(f){this!==f&&(re(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const m=new Mn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(f){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,c.Z)(function*(){let x=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),x=!0),m&&(yield kn(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,c.Z)(function*(){const m=yield f.getIdToken();return yield Kt(f,function Nr(v,f){return Qn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,x,P,Y,ae,Be,Ze,It;const Gt=null!==(E=m.displayName)&&void 0!==E?E:void 0,ii=null!==(x=m.email)&&void 0!==x?x:void 0,wo=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Xo=null!==(Y=m.photoURL)&&void 0!==Y?Y:void 0,Jc=null!==(ae=m.tenantId)&&void 0!==ae?ae:void 0,ds=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,lf=null!==(Ze=m.createdAt)&&void 0!==Ze?Ze:void 0,Pd=null!==(It=m.lastLoginAt)&&void 0!==It?It:void 0,{uid:Xc,emailVerified:ea,isAnonymous:Od,providerData:kd,stsTokenManager:Vu}=m;re(Xc&&Vu,f,"internal-error");const Fd=Bt.fromJSON(this.name,Vu);re("string"==typeof Xc,f,"internal-error"),Hn(Gt,f.name),Hn(ii,f.name),re("boolean"==typeof ea,f,"internal-error"),re("boolean"==typeof Od,f,"internal-error"),Hn(wo,f.name),Hn(Xo,f.name),Hn(Jc,f.name),Hn(ds,f.name),Hn(lf,f.name),Hn(Pd,f.name);const Bu=new Mn({uid:Xc,auth:f,email:ii,emailVerified:ea,displayName:Gt,isAnonymous:Od,photoURL:Xo,phoneNumber:wo,tenantId:Jc,stsTokenManager:Fd,createdAt:lf,lastLoginAt:Pd});return kd&&Array.isArray(kd)&&(Bu.providerData=kd.map(ta=>Object.assign({},ta))),ds&&(Bu._redirectEventId=ds),Bu}static _fromIdTokenResponse(f,m,E=!1){return(0,c.Z)(function*(){const x=new Bt;x.updateFromServerResponse(m);const P=new Mn({uid:m.localId,auth:f,stsTokenManager:x,isAnonymous:E});return yield kn(P),P})()}}const Dr=new Map;function zn(v){St(v instanceof Function,"Expected a class definition");let f=Dr.get(v);return f?(St(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Dr.set(v,f),f)}const Or=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,E){var x=this;return(0,c.Z)(function*(){x.storage[m]=E})()}_get(m){var E=this;return(0,c.Z)(function*(){const x=E.storage[m];return void 0===x?null:x})()}_remove(m){var E=this;return(0,c.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function zr(v,f,m){return`firebase:${v}:${f}:${m}`}class H{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:x,name:P}=this.auth;this.fullUserKey=zr(this.userKey,x.apiKey,P),this.fullPersistenceKey=zr("persistence",x.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Mn._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,c.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,c.Z)(function*(){if(!m.length)return new H(zn(Or),f,E);const x=(yield Promise.all(m.map(function(){var Ze=(0,c.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let P=x[0]||zn(Or);const Y=zr(E,f.config.apiKey,f.name);let ae=null;for(const Ze of m)try{const It=yield Ze._get(Y);if(It){const Gt=Mn._fromJSON(f,It);Ze!==P&&(ae=Gt),P=Ze;break}}catch{}const Be=x.filter(Ze=>Ze._shouldAllowMigration);return P._shouldAllowMigration&&Be.length?(P=Be[0],ae&&(yield P._set(Y,ae.toJSON())),yield Promise.all(m.map(function(){var Ze=(0,c.Z)(function*(It){if(It!==P)try{yield It._remove(Y)}catch{}});return function(It){return Ze.apply(this,arguments)}}())),new H(P,f,E)):new H(P,f,E)})()}}function B(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(W(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(O(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(nt(f))return"Blackberry";if(xt(f))return"Webos";if(F(f))return"Safari";if((f.includes("chrome/")||R(f))&&!f.includes("edge/"))return"Chrome";if(ve(f))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function O(v=(0,$.z$)()){return/firefox\//i.test(v)}function F(v=(0,$.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function R(v=(0,$.z$)()){return/crios\//i.test(v)}function W(v=(0,$.z$)()){return/iemobile/i.test(v)}function ve(v=(0,$.z$)()){return/android/i.test(v)}function nt(v=(0,$.z$)()){return/blackberry/i.test(v)}function xt(v=(0,$.z$)()){return/webos/i.test(v)}function Tt(v=(0,$.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Yt(v=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function $t(v=(0,$.z$)()){return Tt(v)||ve(v)||xt(v)||nt(v)||/windows phone/i.test(v)||W(v)}function is(v,f=[]){let m;switch(v){case"Browser":m=B((0,$.z$)());break;case"Worker":m=`${B((0,$.z$)())}-${v}`;break;default:m=v}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${k.SDK_VERSION}/${E}`}function te(){return(te=(0,c.Z)(function*(v){return(yield ht(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fe(v,f){return mt.apply(this,arguments)}function mt(){return(mt=(0,c.Z)(function*(v,f){return ht(v,"GET","/v2/recaptchaConfig",Pe(v,f))})).apply(this,arguments)}function Rt(v){return void 0!==v&&void 0!==v.getResponse}function Xt(v){return void 0!==v&&void 0!==v.enterprise}class vt{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function sn(v){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=f,E.onerror=x=>{const P=Ie("internal-error");P.customData=x,m(P)},E.type="text/javascript",E.charset="UTF-8",function fn(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(E)})}function kr(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Bh="NO_RECAPTCHA";class Qs{constructor(f){this.type="recaptcha-enterprise",this.auth=pn(f)}verify(f="verify",m=!1){var E=this;return(0,c.Z)(function*(){function P(){return P=(0,c.Z)(function*(ae){if(!m){if(null==ae.tenantId&&null!=ae._agentRecaptchaConfig)return ae._agentRecaptchaConfig.siteKey;if(null!=ae.tenantId&&void 0!==ae._tenantRecaptchaConfigs[ae.tenantId])return ae._tenantRecaptchaConfigs[ae.tenantId].siteKey}return new Promise(function(){var Be=(0,c.Z)(function*(Ze,It){Fe(ae,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Gt=>{if(void 0!==Gt.recaptchaKey){const ii=new vt(Gt);return null==ae.tenantId?ae._agentRecaptchaConfig=ii:ae._tenantRecaptchaConfigs[ae.tenantId]=ii,Ze(ii.siteKey)}It(new Error("recaptcha Enterprise site key undefined"))}).catch(Gt=>{It(Gt)})});return function(Ze,It){return Be.apply(this,arguments)}}())}),P.apply(this,arguments)}function Y(ae,Be,Ze){const It=window.grecaptcha;Xt(It)?It.enterprise.ready(()=>{It.enterprise.execute(ae,{action:f}).then(Gt=>{Be(Gt)}).catch(()=>{Be(Bh)})}):Ze(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ae,Be)=>{(function x(ae){return P.apply(this,arguments)})(E.auth).then(Ze=>{if(!m&&Xt(window.grecaptcha))Y(Ze,ae,Be);else{if(typeof window>"u")return void Be(new Error("RecaptchaVerifier is only supported in browser"));sn("https://www.google.com/recaptcha/enterprise.js?render="+Ze).then(()=>{Y(Ze,ae,Be)}).catch(It=>{Be(It)})}}).catch(Ze=>{Be(Ze)})})})()}}function fr(v,f,m){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,c.Z)(function*(v,f,m,E=!1){const x=new Qs(v);let P;try{P=yield x.verify(m)}catch{P=yield x.verify(m,!0)}const Y=Object.assign({},f);return Object.assign(Y,E?{captchaResp:P}:{captchaResponse:P}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}class Qt{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=P=>new Promise((Y,ae)=>{try{Y(f(P))}catch(Be){ae(Be)}});E.onAbort=m,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,c.Z)(function*(){if(m.auth.currentUser===f)return;const E=[];try{for(const x of m.queue)yield x(f),x.onAbort&&E.push(x.onAbort)}catch(x){E.reverse();for(const P of E)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Sn{constructor(f,m,E,x){this.app=f,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cs(this),this.idTokenSubscription=new Cs(this),this.beforeStateQueue=new Qt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=zn(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var x,P;if(!E._deleted&&(E.persistenceManager=yield H.create(E,f),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,c.Z)(function*(){var E;const x=yield m.assertedPersistence.getCurrentUser();let P=x,Y=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ae=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Be=P?._redirectEventId,Ze=yield m.tryRedirectSignIn(f);(!ae||ae===Be)&&Ze?.user&&(P=Ze.user,Y=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield m.beforeStateQueue.runMiddleware(P)}catch(ae){P=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ae))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return re(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,c.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,c.Z)(function*(){try{yield kn(f)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function de(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,c.Z)(function*(){const E=f?(0,$.m9)(f):null;return E&&re(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return f&&re(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(zn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,c.Z)(function*(){const m=yield Fe(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new vt(m);null==f.tenantId?f._agentRecaptchaConfig=E:f._tenantRecaptchaConfigs[f.tenantId]=E,E.emailPasswordEnabled&&new Qs(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new $.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,c.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(m);return null===f?x.removeCurrentUser():x.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&zn(f)||m._popupRedirectResolver;re(E,m,"argument-error"),m.redirectPersistenceManager=yield H.create(m,[zn(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,c.Z)(function*(){var E,x;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,c.Z)(function*(){if(f===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,x){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return re(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,E,x):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=is(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const x=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();x&&(E["X-Firebase-Client"]=x);const P=yield f._getAppCheckToken();return P&&(E["X-Firebase-AppCheck"]=P),E})()}_getAppCheckToken(){var f=this;return(0,c.Z)(function*(){var m;const E=yield null===(m=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function Oe(v,...f){xe.logLevel<=ie.in.WARN&&xe.warn(`Auth (${k.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function pn(v){return(0,$.m9)(v)}class Cs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,$.ne)(m=>this.observer=m)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ln(v,f,m){const E=pn(v);re(E._canInitEmulator,E,"emulator-config-failed"),re(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const x=!!m?.disableWarnings,P=ya(f),{host:Y,port:ae}=function Ci(v){const f=ya(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const P=x[1];return{host:P,port:zt(E.substr(P.length+1))}}{const[P,Y]=E.split(":");return{host:P,port:zt(Y)}}}(f);E.config.emulator={url:`${P}//${Y}${null===ae?"":`:${ae}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Y,port:ae,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function cu(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ya(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function zt(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Di{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return tt("not implemented")}_getIdTokenResponse(f){return tt("not implemented")}_linkToIdToken(f,m){return tt("not implemented")}_getReauthenticationResolver(f){return tt("not implemented")}}function _a(v,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:resetPassword",Pe(v,f))})).apply(this,arguments)}function rr(v,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function pi(){return(pi=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:update",Pe(v,f))})).apply(this,arguments)}function bs(v,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithPassword",Pe(v,f))})).apply(this,arguments)}function wn(v,f){return bi.apply(this,arguments)}function bi(){return(bi=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:sendOobCode",Pe(v,f))})).apply(this,arguments)}function va(){return(va=(0,c.Z)(function*(v,f){return wn(v,f)})).apply(this,arguments)}function xo(v,f){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,c.Z)(function*(v,f){return wn(v,f)})).apply(this,arguments)}function to(v,f){return br.apply(this,arguments)}function br(){return(br=(0,c.Z)(function*(v,f){return wn(v,f)})).apply(this,arguments)}function Gr(){return(Gr=(0,c.Z)(function*(v,f){return wn(v,f)})).apply(this,arguments)}function no(){return(no=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithEmailLink",Pe(v,f))})).apply(this,arguments)}function wa(){return(wa=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithEmailLink",Pe(v,f))})).apply(this,arguments)}class ti extends Di{constructor(f,m,E,x=null){super("password",E),this._email=f,this._password=m,this._tenantId=x}static _fromEmailAndPassword(f,m){return new ti(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new ti(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,c.Z)(function*(){var E;switch(m.signInMethod){case"password":const x={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=f._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const P=yield fr(f,x,"signInWithPassword");return bs(f,P)}return bs(f,x).catch(function(){var P=(0,c.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ae=yield fr(f,x,"signInWithPassword");return bs(f,ae)}return Promise.reject(Y)});return function(Y){return P.apply(this,arguments)}}());case"emailLink":return function Li(v,f){return no.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:De(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return rr(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function lu(v,f){return wa.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:De(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ss(v,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithIdp",Pe(v,f))})).apply(this,arguments)}class Zi extends Di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):De("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x}=m,P=(0,ee._T)(m,["providerId","signInMethod"]);if(!E||!x)return null;const Y=new Zi(E,x);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(f){return Ss(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Ss(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Ss(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,$.xO)(m)}return f}}function ql(){return(ql=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:sendVerificationCode",Pe(v,f))})).apply(this,arguments)}function Wl(){return(Wl=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Pe(v,f))})).apply(this,arguments)}function Zl(){return(Zl=(0,c.Z)(function*(v,f){const m=yield rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Pe(v,f));if(m.temporaryProof)throw Vn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Kl={USER_NOT_FOUND:"user-not-found"};function jh(){return(jh=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Pe(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Kl)})).apply(this,arguments)}class As extends Di{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new As({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new As({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function $h(v,f){return Wl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Zp(v,f){return Zl.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Yl(v,f){return jh.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:x}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:x}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:P}=f;return E||m||x||P?new As({verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:P}):null}}class Ro{constructor(f){var m,E,x,P,Y,ae;const Be=(0,$.zd)((0,$.pd)(f)),Ze=null!==(m=Be.apiKey)&&void 0!==m?m:null,It=null!==(E=Be.oobCode)&&void 0!==E?E:null,Gt=function Mo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Be.mode)&&void 0!==x?x:null);re(Ze&&It&&Gt,"argument-error"),this.apiKey=Ze,this.operation=Gt,this.code=It,this.continueUrl=null!==(P=Be.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Be.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ae=Be.tenantId)&&void 0!==ae?ae:null}static parseLink(f){const m=function Hh(v){const f=(0,$.zd)((0,$.pd)(v)).link,m=f?(0,$.zd)((0,$.pd)(f)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(v)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||m||f||v}(f);try{return new Ro(m)}catch{return null}}}let Ql=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return ti._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const x=Ro.parseLink(E);return re(x,"argument-error"),ti._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ro{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class No extends ro{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ss extends No{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return re("providerId"in m&&"signInMethod"in m,"argument-error"),Zi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return re(f.idToken||f.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ss.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ss.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:P,nonce:Y,providerId:ae}=f;if(!E&&!x&&!m&&!P||!ae)return null;try{return new ss(ae)._credential({idToken:m,accessToken:E,nonce:Y,pendingToken:P})}catch{return null}}}let Jl=(()=>{class v extends No{constructor(){super("facebook.com")}static credential(m){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Xl=(()=>{class v extends No{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:x}=m;if(!E&&!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),du=(()=>{class v extends No{constructor(){super("github.com")}static credential(m){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class xs extends Di{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Ss(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Ss(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Ss(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x,pendingToken:P}=m;return E&&x&&P&&E===x?new xs(E,P):null}static _create(f,m){return new xs(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hu extends ro{constructor(f){re(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return hu.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return hu.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=xs.fromJSON(f);return re(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return xs._create(E,m)}catch{return null}}}let qh=(()=>{class v extends No{constructor(){super("twitter.com")}static credential(m,E){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=m;if(!E||!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Po(v,f){return io.apply(this,arguments)}function io(){return(io=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signUp",Pe(v,f))})).apply(this,arguments)}class Rn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,x=!1){return(0,c.Z)(function*(){const P=yield Mn._fromIdTokenResponse(f,E,x),Y=Ia(E);return new Rn({user:P,providerId:Y,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const x=Ia(E);return new Rn({user:f,providerId:x,_tokenResponse:E,operationType:m})})()}}function Ia(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function fu(v){return ir.apply(this,arguments)}function ir(){return(ir=(0,c.Z)(function*(v){var f;const m=pn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Rn({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Po(m,{returnSecureToken:!0}),x=yield Rn._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class so extends $.ZR{constructor(f,m,E,x){var P;super(m.code,m.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,so.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,x){return new so(f,m,E,x)}}function oo(v,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?so._fromErrorAndOperation(v,P,f,E):P})}function Tr(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Wh(v,f){return pu.apply(this,arguments)}function pu(){return pu=(0,c.Z)(function*(v,f){const m=(0,$.m9)(v);yield Ca(!0,m,f);const{providerUserInfo:E}=yield function Jr(v,f){return Fi.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),x=Tr(E||[]);return m.providerData=m.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),pu.apply(this,arguments)}function qr(v,f){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(v,f,m=!1){const E=yield Kt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return Rn._forOperation(v,"link",E)})).apply(this,arguments)}function Ca(v,f,m){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,c.Z)(function*(v,f,m){yield kn(f);const x=!1===v?"provider-already-linked":"no-such-provider";re(Tr(f.providerData).has(m)===v,f.auth,x)})).apply(this,arguments)}function ed(v,f){return os.apply(this,arguments)}function os(){return(os=(0,c.Z)(function*(v,f,m=!1){const{auth:E}=v,x="reauthenticate";try{const P=yield Kt(v,oo(E,x,f,v),m);re(P.idToken,E,"internal-error");const Y=jr(P.idToken);re(Y,E,"internal-error");const{sub:ae}=Y;return re(v.uid===ae,E,"user-mismatch"),Rn._forOperation(v,x,P)}catch(P){throw"auth/user-not-found"===P?.code&&De(E,"user-mismatch"),P}})).apply(this,arguments)}function Da(v,f){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,c.Z)(function*(v,f,m=!1){const E="signIn",x=yield oo(v,E,f),P=yield Rn._fromIdTokenResponse(v,E,x);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Ft(v,f){return gu.apply(this,arguments)}function gu(){return(gu=(0,c.Z)(function*(v,f){return Da(pn(v),f)})).apply(this,arguments)}function Zh(v,f){return gc.apply(this,arguments)}function gc(){return(gc=(0,c.Z)(function*(v,f){const m=(0,$.m9)(v);return yield Ca(!1,m,f.providerId),qr(m,f)})).apply(this,arguments)}function mc(v,f){return yc.apply(this,arguments)}function yc(){return(yc=(0,c.Z)(function*(v,f){return ed((0,$.m9)(v),f)})).apply(this,arguments)}function nd(){return(nd=(0,c.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithCustomToken",Pe(v,f))})).apply(this,arguments)}function Kp(v,f){return fe.apply(this,arguments)}function fe(){return fe=(0,c.Z)(function*(v,f){const m=pn(v),E=yield function td(v,f){return nd.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),x=yield Rn._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(x.user),x}),fe.apply(this,arguments)}class Ut{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?_c._fromServerResponse(f,m):"totpInfo"in m?ba._fromServerResponse(f,m):De(f,"internal-error")}}class _c extends Ut{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new _c(m)}}class ba extends Ut{constructor(f){super("totp",f)}static _fromServerResponse(f,m){return new ba(m)}}function Gn(v,f,m){var E;re((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),re(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(re(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(re(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function rd(v,f,m){return ko.apply(this,arguments)}function ko(){return ko=(0,c.Z)(function*(v,f,m){var E;const x=pn(v),P={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=x._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Y=yield fr(x,P,"getOobCode",!0);m&&Gn(x,Y,m),yield xo(x,Y)}else m&&Gn(x,P,m),yield xo(x,P).catch(function(){var Y=(0,c.Z)(function*(ae){if("auth/missing-recaptcha-token"!==ae.code)return Promise.reject(ae);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Be=yield fr(x,P,"getOobCode",!0);m&&Gn(x,Be,m),yield xo(x,Be)}});return function(ae){return Y.apply(this,arguments)}}())}),ko.apply(this,arguments)}function Ti(v,f,m){return mu.apply(this,arguments)}function mu(){return(mu=(0,c.Z)(function*(v,f,m){yield _a((0,$.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function id(v,f){return sd.apply(this,arguments)}function sd(){return sd=(0,c.Z)(function*(v,f){yield function eo(v,f){return pi.apply(this,arguments)}((0,$.m9)(v),{oobCode:f})}),sd.apply(this,arguments)}function Rs(v,f){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,c.Z)(function*(v,f){const m=(0,$.m9)(v),E=yield _a(m,{oobCode:f}),x=E.requestType;switch(re(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(E.mfaInfo,m,"internal-error");default:re(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=Ut._fromServerResponse(pn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Sr(v,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(v,f){const{data:m}=yield Rs((0,$.m9)(v),f);return m.email})).apply(this,arguments)}function Ns(v,f,m){return as.apply(this,arguments)}function as(){return as=(0,c.Z)(function*(v,f,m){var E;const x=pn(v),P={returnSecureToken:!0,email:f,password:m,clientType:"CLIENT_TYPE_WEB"};let Y;if(null!==(E=x._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ze=yield fr(x,P,"signUpPassword");Y=Po(x,Ze)}else Y=Po(x,P).catch(function(){var Ze=(0,c.Z)(function*(It){if("auth/missing-recaptcha-token"===It.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Gt=yield fr(x,P,"signUpPassword");return Po(x,Gt)}return Promise.reject(It)});return function(It){return Ze.apply(this,arguments)}}());const ae=yield Y.catch(Ze=>Promise.reject(Ze)),Be=yield Rn._fromIdTokenResponse(x,"signIn",ae);return yield x._updateCurrentUser(Be.user),Be}),as.apply(this,arguments)}function Ki(v,f,m){return Ft((0,$.m9)(v),Ql.credential(f,m))}function od(v,f,m){return ao.apply(this,arguments)}function ao(){return ao=(0,c.Z)(function*(v,f,m){var E;const x=pn(v),P={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function Y(ae,Be){re(Be.handleCodeInApp,x,"argument-error"),Be&&Gn(x,ae,Be)}if(null!==(E=x._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ae=yield fr(x,P,"getOobCode",!0);Y(ae,m),yield to(x,ae)}else Y(P,m),yield to(x,P).catch(function(){var ae=(0,c.Z)(function*(Be){if("auth/missing-recaptcha-token"!==Be.code)return Promise.reject(Be);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ze=yield fr(x,P,"getOobCode",!0);Y(Ze,m),yield to(x,Ze)}});return function(Be){return ae.apply(this,arguments)}}())}),ao.apply(this,arguments)}function ad(v,f){return"EMAIL_SIGNIN"===Ro.parseLink(f)?.operation}function Yp(v,f,m){return qn.apply(this,arguments)}function qn(){return(qn=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v),x=Ql.credentialWithLink(f,m||it());return re(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ft(E,x)})).apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:createAuthUri",Pe(v,f))})).apply(this,arguments)}function ud(v,f){return _u.apply(this,arguments)}function _u(){return _u=(0,c.Z)(function*(v,f){const E={identifier:f,continueUri:Zt()?it():"http://localhost"},{signinMethods:x}=yield function yu(v,f){return Ta.apply(this,arguments)}((0,$.m9)(v),E);return x||[]}),_u.apply(this,arguments)}function cd(v,f){return Lo.apply(this,arguments)}function Lo(){return Lo=(0,c.Z)(function*(v,f){const m=(0,$.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Gn(m.auth,x,f);const{email:P}=yield function fc(v,f){return va.apply(this,arguments)}(m.auth,x);P!==v.email&&(yield v.reload())}),Lo.apply(this,arguments)}function vc(v,f,m){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Gn(E.auth,P,m);const{email:Y}=yield function Gl(v,f){return Gr.apply(this,arguments)}(E.auth,P);Y!==v.email&&(yield v.reload())}),Sa.apply(this,arguments)}function vu(){return(vu=(0,c.Z)(function*(v,f){return ht(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ld(v,f){return Ec.apply(this,arguments)}function Ec(){return Ec=(0,c.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,$.m9)(v),P={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Y=yield Kt(E,function wc(v,f){return vu.apply(this,arguments)}(E.auth,P));E.displayName=Y.displayName||null,E.photoURL=Y.photoUrl||null;const ae=E.providerData.find(({providerId:Be})=>"password"===Be);ae&&(ae.displayName=E.displayName,ae.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Y)}),Ec.apply(this,arguments)}function dd(v,f){return Yi((0,$.m9)(v),f,null)}function Lr(v,f){return Yi((0,$.m9)(v),null,f)}function Yi(v,f,m){return An.apply(this,arguments)}function An(){return(An=(0,c.Z)(function*(v,f,m){const{auth:E}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const Y=yield Kt(v,rr(E,P));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Uo{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class Ic extends Uo{constructor(f,m,E,x){super(f,m,E),this.username=x}}class Qp extends Uo{constructor(f,m){super(f,"facebook.com",m)}}class fd extends Ic{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Jp extends Uo{constructor(f,m){super(f,"google.com",m)}}class wu extends Ic{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Cc(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function hd(v){var f,m;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const Y=null===(m=null===(f=jr(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Y)return new Uo(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!E)return null;switch(E){case"facebook.com":return new Qp(P,x);case"github.com":return new fd(P,x);case"google.com":return new Jp(P,x);case"twitter.com":return new wu(P,x,v.screenName||null);case"custom":case"anonymous":return new Uo(P,null);default:return new Uo(P,E,x)}}(m)}class cs{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new cs("enroll",f,m)}static _fromMfaPendingCredential(f){return new cs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return cs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return cs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Dc{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=pn(f),x=m.customData._serverResponse,P=(x.mfaInfo||[]).map(ae=>Ut._fromServerResponse(E,ae));re(x.mfaPendingCredential,E,"internal-error");const Y=cs._fromMfaPendingCredential(x.mfaPendingCredential);return new Dc(Y,P,function(){var ae=(0,c.Z)(function*(Be){const Ze=yield Be._process(E,Y);delete x.mfaInfo,delete x.mfaPendingCredential;const It=Object.assign(Object.assign({},x),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(m.operationType){case"signIn":const Gt=yield Rn._fromIdTokenResponse(E,m.operationType,It);return yield E._updateCurrentUser(Gt.user),Gt;case"reauthenticate":return re(m.user,E,"internal-error"),Rn._forOperation(m.user,m.operationType,It);default:De(E,"internal-error")}});return function(Be){return ae.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,c.Z)(function*(){return m.signInResolver(f)})()}}function xa(v,f){var m;const E=(0,$.m9)(v),x=f;return re(f.customData.operationType,E,"argument-error"),re(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Dc._fromError(E,x)}class $o{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Ut._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new $o(f)}getSession(){var f=this;return(0,c.Z)(function*(){return cs._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,c.Z)(function*(){const x=f,P=yield E.getSession(),Y=yield Kt(E.user,x._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(Y),E.user.reload()})()}unenroll(f){var m=this;return(0,c.Z)(function*(){const E="string"==typeof f?f:f.uid,x=yield m.user.getIdToken();try{const P=yield Kt(m.user,function uo(v,f){return ht(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Pe(v,f))}(m.user.auth,{idToken:x,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Y})=>Y!==E),yield m.user._updateTokensIfNecessary(P),yield m.user.reload()}catch(P){throw P}})()}}const co=new WeakMap;function jo(v){const f=(0,$.m9)(v);return co.has(f)||co.set(f,$o._fromUser(f)),co.get(f)}const Ma="__sak";class Ra{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ma,"1"),this.storage.removeItem(Ma),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Du=(()=>{class v extends Ra{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bc(){const v=(0,$.z$)();return F(v)||Tt(v)}()&&function dr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$t(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),P=this.localCache[E];x!==P&&m(E,P,x)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ae,Be,Ze)=>{this.notifyListeners(ae,Ze)});const x=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(x);if(m.newValue!==ae)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!E)return}const P=()=>{const ae=this.storage.getItem(x);!E&&this.localCache[x]===ae||this.notifyListeners(x,ae)},Y=this.storage.getItem(x);!function Cn(){return(0,$.w1)()&&10===document.documentMode}()||Y===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const P of Array.from(x))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var x=()=>super._set,P=this;return(0,c.Z)(function*(){yield x().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,x=this;return(0,c.Z)(function*(){const P=yield E().call(x,m);return x.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,x=this;return(0,c.Z)(function*(){yield E().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),ri=(()=>{class v extends Ra{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let Ac=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,c.Z)(function*(){const x=m,{eventId:P,eventType:Y,data:ae}=x.data,Be=E.handlersMap[Y];if(!Be?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const Ze=Array.from(Be).map(function(){var Gt=(0,c.Z)(function*(ii){return ii(x.origin,ae)});return function(ii){return Gt.apply(this,arguments)}}()),It=yield function _d(v){return Promise.all(v.map(function(){var f=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(Ze);x.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:It})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Qi(v="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return v+m}class vd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var x=this;return(0,c.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,ae;return new Promise((Be,Ze)=>{const It=Qi("",20);P.port1.start();const Gt=setTimeout(()=>{Ze(new Error("unsupported_event"))},E);ae={messageChannel:P,onMessage(ii){const wo=ii;if(wo.data.eventId===It)switch(wo.data.status){case"ack":clearTimeout(Gt),Y=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Be(wo.data.response);break;default:clearTimeout(Gt),clearTimeout(Y),Ze(new Error("invalid_response"))}}},x.handlers.add(ae),P.port1.addEventListener("message",ae.onMessage),x.target.postMessage({eventType:f,eventId:It,data:m},[P.port2])}).finally(()=>{ae&&x.removeMessageHandler(ae)})})()}}function Wn(){return window}function bu(){return typeof Wn().WorkerGlobalScope<"u"&&"function"==typeof Wn().importScripts}function Pa(){return(Pa=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sr="firebaseLocalStorageDb",Ho=1,Nn="firebaseLocalStorage",Qh="fbase_key";class ks{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Su(v,f){return v.transaction([Nn],f?"readwrite":"readonly").objectStore(Nn)}function xc(){const v=indexedDB.open(sr,Ho);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Nn,{keyPath:Qh})}catch(x){m(x)}}),v.addEventListener("success",(0,c.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Nn)?f(E):(E.close(),yield function zo(){const v=indexedDB.deleteDatabase(sr);return new ks(v).toPromise()}(),f(yield xc()))}))})}function Mc(v,f,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(v,f,m){const E=Su(v,!0).put({[Qh]:f,value:m});return new ks(E).toPromise()})).apply(this,arguments)}function lo(){return(lo=(0,c.Z)(function*(v,f){const m=Su(v,!1).get(f),E=yield new ks(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Oa(v,f){const m=Su(v,!0).delete(f);return new ks(m).toPromise()}const Rc=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield xc()),m.db})()}_withRetries(m){var E=this;return(0,c.Z)(function*(){let x=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(x++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return bu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=Ac._getInstance(function Tu(){return bu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(x,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(x,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var E,x;if(m.activeServiceWorker=yield function wd(){return Pa.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new vd(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(x=P[0])&&void 0!==x&&x.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ed(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield xc();return yield Mc(m,Ma,"1"),yield Oa(m,Ma),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var x=this;return(0,c.Z)(function*(){return x._withPendingWrite((0,c.Z)(function*(){return yield x._withRetries(P=>Mc(P,m,E)),x.localCache[m]=E,x.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,c.Z)(function*(){const x=yield E._withRetries(P=>function Jh(v,f){return lo.apply(this,arguments)}(P,m));return E.localCache[m]=x,x})()}_remove(m){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(x=>Oa(x,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const E=yield m._withRetries(Y=>{const ae=Su(Y,!1).getAll();return new ks(ae).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:Y,value:ae}of E)P.add(Y),JSON.stringify(m.localCache[Y])!==JSON.stringify(ae)&&(m.notifyListeners(Y,ae),x.push(Y));for(const Y of Object.keys(m.localCache))m.localCache[Y]&&!P.has(Y)&&(m.notifyListeners(Y,null),x.push(Y));return x})()}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const P of Array.from(x))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Nc=1e12;class Dd{constructor(f){this.auth=f,this.counter=Nc,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Pc(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||Nc;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Nc))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,c.Z)(function*(){var E;return null===(E=m._widgets.get(f||Nc))||void 0===E||E.execute(),""})()}}class Pc{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof f?document.getElementById(f):f;re(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Oc(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ef=kr("rcb"),oy=new me(3e4,6e4);class po{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Wn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return re(function uy(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)&&Rt(Wn().grecaptcha)?Promise.resolve(Wn().grecaptcha):new Promise((E,x)=>{const P=Wn().setTimeout(()=>{x(Ie(f,"network-request-failed"))},oy.get());Wn()[ef]=()=>{Wn().clearTimeout(P),delete Wn()[ef];const ae=Wn().grecaptcha;if(!ae||!Rt(ae))return void x(Ie(f,"internal-error"));const Be=ae.render;ae.render=(Ze,It)=>{const Gt=Be(Ze,It);return this.counter++,Gt},this.hostLanguage=m,E(ae)},sn(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:ef,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),x(Ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Wn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tf{load(f){return(0,c.Z)(function*(){return new Dd(f)})()}clearedOneInstance(){}}const or="recaptcha",xu={theme:"light",type:"image"};class Mu{constructor(f,m=Object.assign({},xu),E){this.parameters=m,this.type=or,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(E),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof f?document.getElementById(f):f;re(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tf:new po,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const Y=ae=>{ae&&(f.tokenChangeListeners.delete(Y),P(ae))};f.tokenChangeListeners.add(Y),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=Wn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){re(Zt()&&!bu(),f.auth,"internal-error"),yield function kc(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function he(v){return te.apply(this,arguments)}(f.auth);re(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gi{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=As._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Ls(v,f,m){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,c.Z)(function*(v,f,m){const E=pn(v),x=yield Ru(E,f,(0,$.m9)(m));return new gi(x,P=>Ft(E,P))})).apply(this,arguments)}function ka(v,f,m){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v);yield Ca(!1,E,"phone");const x=yield Ru(E.auth,f,(0,$.m9)(m));return new gi(x,P=>Zh(E,P))})).apply(this,arguments)}function bd(v,f,m){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v),x=yield Ru(E.auth,f,(0,$.m9)(m));return new gi(x,P=>mc(E,P))})).apply(this,arguments)}function Ru(v,f,m){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,c.Z)(function*(v,f,m){var E;const x=yield m.verify();try{let P;if(re("string"==typeof x,v,"argument-error"),re(m.type===or,v,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const Y=P.session;if("phoneNumber"in P)return re("enroll"===Y.type,v,"internal-error"),(yield function Cu(v,f){return ht(v,"POST","/v2/accounts/mfaEnrollment:start",Pe(v,f))}(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{re("signin"===Y.type,v,"internal-error");const ae=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return re(ae,v,"missing-multi-factor-info"),(yield function Id(v,f){return ht(v,"POST","/v2/accounts/mfaSignIn:start",Pe(v,f))}(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Wp(v,f){return ql.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return Y}}finally{m._reset()}}),Uc.apply(this,arguments)}function Si(v,f){return nn.apply(this,arguments)}function nn(){return(nn=(0,c.Z)(function*(v,f){yield qr((0,$.m9)(v),f)})).apply(this,arguments)}let Ui=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=pn(m)}verifyPhoneNumber(m,E){return Ru(this.auth,m,(0,$.m9)(E))}static credential(m,E){return As._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:x}=m;return E&&x?As._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ot(v,f){return f?zn(f):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Vi extends Di{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ss(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Ss(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Ss(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Jn(v){return Da(v.auth,new Vi(v),v.bypassAuthState)}function Td(v){const{auth:f,user:m}=v;return re(m,f,"internal-error"),ed(m,new Vi(v),v.bypassAuthState)}function Fa(v){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(v){const{auth:f,user:m}=v;return re(m,f,"internal-error"),qr(m,new Vi(v),v.bypassAuthState)})).apply(this,arguments)}class Vc{constructor(f,m,E,x,P=!1){this.auth=f,this.resolver=E,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,c.Z)(function*(E,x){f.pendingPromise={resolve:E,reject:x};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(E,x){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:P,tenantId:Y,error:ae,type:Be}=f;if(ae)return void m.reject(ae);const Ze={auth:m.auth,requestUri:E,sessionId:x,tenantId:Y||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(Ze))}catch(It){m.reject(It)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Jn;case"linkViaPopup":case"linkViaRedirect":return Fa;case"reauthViaPopup":case"reauthViaRedirect":return Td;default:De(this.auth,"internal-error")}}resolve(f){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sd=new me(2e3,1e4);function Ai(v,f,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(v,f,m){const E=pn(v);He(v,f,ro);const x=ot(E,m);return new $c(E,"signInViaPopup",f,x).executeNotNull()})).apply(this,arguments)}function Bc(v,f,m){return go.apply(this,arguments)}function go(){return(go=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v);He(E.auth,f,ro);const x=ot(E.auth,m);return new $c(E.auth,"reauthViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}function Wo(v,f,m){return bt.apply(this,arguments)}function bt(){return(bt=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v);He(E.auth,f,ro);const x=ot(E.auth,m);return new $c(E.auth,"linkViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}let $c=(()=>{class v extends Vc{constructor(m,E,x,P,Y){super(m,E,P,Y),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const E=yield m.execute();return re(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,c.Z)(function*(){St(1===m.filter.length,"Popup operations only handle one event");const E=Qi();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Sd.get())};m()}}return v.currentPopupAction=null,v})();const Ad="pendingRedirect",xi=new Map;class Nu extends Vc{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,c.Z)(function*(){let E=xi.get(m.auth._key());if(!E){try{const P=(yield function mr(v,f){return La.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(P)}catch(x){E=()=>Promise.reject(x)}xi.set(m.auth._key(),E)}return m.bypassAuthState||xi.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const x=yield E.auth._redirectUserForId(f.eventId);if(x)return E.user=x,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function La(){return(La=(0,c.Z)(function*(v,f){const m=Ba(f),E=nf(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(m));return yield E._remove(m),x})).apply(this,arguments)}function jc(v,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(v,f){return nf(v)._set(Ba(f),"true")})).apply(this,arguments)}function Ua(){xi.clear()}function Va(v,f){xi.set(v._key(),f)}function nf(v){return zn(v._redirectPersistence)}function Ba(v){return zr(Ad,v.config.apiKey,v.name)}function $a(v,f,m){return function Hc(v,f,m){return zc.apply(this,arguments)}(v,f,m)}function zc(){return(zc=(0,c.Z)(function*(v,f,m){const E=pn(v);He(v,f,ro),yield E._initializationPromise;const x=ot(E,m);return yield jc(x,E),x._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Gc(v,f,m){return function ja(v,f,m){return mi.apply(this,arguments)}(v,f,m)}function mi(){return(mi=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v);He(E.auth,f,ro),yield E.auth._initializationPromise;const x=ot(E.auth,m);yield jc(x,E.auth);const P=yield yi(E);return x._openRedirect(E.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function qc(v,f,m){return function Ar(v,f,m){return Ha.apply(this,arguments)}(v,f,m)}function Ha(){return(Ha=(0,c.Z)(function*(v,f,m){const E=(0,$.m9)(v);He(E.auth,f,ro),yield E.auth._initializationPromise;const x=ot(E.auth,m);yield Ca(!1,E,f.providerId),yield jc(x,E.auth);const P=yield yi(E);return x._openRedirect(E.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function rf(v,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,c.Z)(function*(v,f){return yield pn(v)._initializationPromise,yo(v,f,!1)})).apply(this,arguments)}function yo(v,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(v,f,m=!1){const E=pn(v),x=ot(E,f),Y=yield new Nu(E,x,m).execute();return Y&&!m&&(delete Y.user._redirectEventId,yield E._persistUserIfCurrent(Y.user),yield E._setRedirectUser(null,f)),Y})).apply(this,arguments)}function yi(v){return ar.apply(this,arguments)}function ar(){return(ar=(0,c.Z)(function*(v){const f=Qi(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Pu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Bs(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bi(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!Bi(f)){const x=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ie(this.auth,x))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zo(f))}saveEventToCache(f){this.cachedEventUids.add(Zo(f)),this.lastProcessedEventTime=Date.now()}}function Zo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Bi({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function yr(v){return $i.apply(this,arguments)}function $i(){return($i=(0,c.Z)(function*(v,f={}){return ht(v,"GET","/v1/projects",f)})).apply(this,arguments)}const cy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ou=/^https?/;function Ko(){return(Ko=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield yr(v);for(const m of f)try{if(xd(m))return}catch{}De(v,"unauthorized-domain")})).apply(this,arguments)}function xd(v){const f=it(),{protocol:m,hostname:E}=new URL(f);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Y.hostname===E}if(!Ou.test(m))return!1;if(cy.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const _o=new me(3e4,6e4);function Yo(){const v=Wn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let $s=null;const Qo=new me(5e3,15e3),js="__/auth/iframe",Zc="emulator/auth/iframe",ls={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Md(v){const f=v.config;re(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?Ce(f,Zc):`https://${v.config.authDomain}/${js}`,E={apiKey:f.apiKey,appName:v.name,v:k.SDK_VERSION},x=Kc.get(v.config.apiHost);x&&(E.eid=x);const P=v._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,$.xO)(E).slice(1)}`}function Rd(){return Rd=(0,c.Z)(function*(v){const f=yield function vo(v){return $s=$s||function At(v){return new Promise((f,m)=>{var E,x,P;function Y(){Yo(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Yo(),m(Ie(v,"network-request-failed"))},timeout:_o.get()})}if(null!==(x=null===(E=Wn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)f(gapi.iframes.getContext());else{if(null===(P=Wn().gapi)||void 0===P||!P.load){const ae=kr("iframefcb");return Wn()[ae]=()=>{gapi.load?Y():m(Ie(v,"network-request-failed"))},sn(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Be=>m(Be))}Y()}}).catch(f=>{throw $s=null,f})}(v),$s}(v),m=Wn().gapi;return re(m,v,"internal-error"),f.open({where:document.body,url:Md(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ls,dontclear:!0},E=>new Promise(function(){var x=(0,c.Z)(function*(P,Y){yield E.restyle({setHideOnLeave:!1});const ae=Ie(v,"network-request-failed"),Be=Wn().setTimeout(()=>{Y(ae)},Qo.get());function Ze(){Wn().clearTimeout(Be),P(E)}E.ping(Ze).then(Ze,()=>{Y(ae)})});return function(P,Y){return x.apply(this,arguments)}}()))}),Rd.apply(this,arguments)}const w={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C=500,A=600,U="_blank",q="http://localhost";class K{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ze="__/auth/handler",dt="emulator/auth/handler",Ot=encodeURIComponent("fac");function Nt(v,f,m,E,x,P){return Un.apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(v,f,m,E,x,P){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:k.SDK_VERSION,eventId:x};if(f instanceof ro){f.setDefaultLanguage(v.languageCode),Y.providerId=f.providerId||"",(0,$.xb)(f.getCustomParameters())||(Y.customParameters=JSON.stringify(f.getCustomParameters()));for(const[It,Gt]of Object.entries(P||{}))Y[It]=Gt}if(f instanceof No){const It=f.getScopes().filter(Gt=>""!==Gt);It.length>0&&(Y.scopes=It.join(","))}v.tenantId&&(Y.tid=v.tenantId);const ae=Y;for(const It of Object.keys(ae))void 0===ae[It]&&delete ae[It];const Be=yield v._getAppCheckToken(),Ze=Be?`#${Ot}=${encodeURIComponent(Be)}`:"";return`${function Ct({config:v}){return v.emulator?Ce(v,dt):`https://${v.authDomain}/${ze}`}(v)}?${(0,$.xO)(ae).slice(1)}${Ze}`})).apply(this,arguments)}const ji="webStorageSupport",Mi=class Qc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ri,this._completeRedirectFn=yo,this._overrideRedirectResult=Va}_openPopup(f,m,E,x){var P=this;return(0,c.Z)(function*(){var Y;St(null===(Y=P.eventManagers[f._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ae=yield Nt(f,m,E,it(),x);return function ce(v,f,m,E=C,x=A){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),Y=Math.max((window.screen.availWidth-E)/2,0).toString();let ae="";const Be=Object.assign(Object.assign({},w),{width:E.toString(),height:x.toString(),top:P,left:Y}),Ze=(0,$.z$)().toLowerCase();m&&(ae=R(Ze)?U:m),O(Ze)&&(f=f||q,Be.scrollbars="yes");const It=Object.entries(Be).reduce((ii,[wo,Xo])=>`${ii}${wo}=${Xo},`,"");if(function Pt(v=(0,$.z$)()){var f;return Tt(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ze)&&"_self"!==ae)return function We(v,f){const m=document.createElement("a");m.href=v,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",ae),new K(null);const Gt=window.open(f||"",ae,It);re(Gt,v,"popup-blocked");try{Gt.focus()}catch{}return new K(Gt)}(f,ae,Qi())})()}_openRedirect(f,m,E,x){var P=this;return(0,c.Z)(function*(){return yield P._originValidation(f),function Os(v){Wn().location.href=v}(yield Nt(f,m,E,it(),x)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:x,promise:P}=this.eventManagers[m];return x?Promise.resolve(x):(St(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,c.Z)(function*(){const E=yield function Yc(v){return Rd.apply(this,arguments)}(f),x=new Pu(f);return E.register("authEvent",P=>(re(P?.authEvent,f,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:x},m.iframes[f._key()]=E,x})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(ji,{type:ji},x=>{var P;const Y=null===(P=x?.[0])||void 0===P?void 0:P[ji];void 0!==Y&&m(!!Y),De(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Wc(v){return Ko.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return $t()||F()||Tt()}};class _i{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Ur extends _i{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ur(f)}_finalizeEnroll(f,m,E){return function Bo(v,f){return ht(v,"POST","/v2/accounts/mfaEnrollment:finalize",Pe(v,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function fo(v,f){return ht(v,"POST","/v2/accounts/mfaSignIn:finalize",Pe(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ku=(()=>{class v{constructor(){}static assertion(m){return Ur._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var qa="@firebase/auth";class Jo{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function af(v){(0,k._registerComponent)(new se.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),x=f.getProvider("heartbeat"),P=f.getProvider("app-check-internal"),{apiKey:Y,authDomain:ae}=E.options;re(Y&&!Y.includes(":"),"invalid-api-key",{appName:E.name});const Be={apiKey:Y,authDomain:ae,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:is(v)},Ze=new Sn(E,x,P,Be);return function Js(v,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(zn);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(E,f?.popupRedirectResolver)}(Ze,m),Ze},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new se.wA("auth-internal",f=>{const m=pn(f.getProvider("auth").getImmediate());return new Jo(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(qa,"0.23.2",function Uu(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,k.registerVersion)(qa,"0.23.2","esm2017")}("Browser")},2090:(Et,Te,L)=>{L.d(Te,{$s:()=>zn,BH:()=>Re,G6:()=>Ce,L:()=>ye,LL:()=>Tn,P0:()=>$e,Pz:()=>Ie,Sg:()=>He,UG:()=>tt,US:()=>se,ZB:()=>J,ZR:()=>ht,aH:()=>De,b$:()=>Zt,eu:()=>Ge,hl:()=>Me,jU:()=>St,m9:()=>zr,ne:()=>Kt,pd:()=>jr,r3:()=>Jr,ru:()=>it,tV:()=>G,uI:()=>re,vZ:()=>ft,w1:()=>Is,xO:()=>$n,xb:()=>Ys,z$:()=>ke,zI:()=>Le,zd:()=>Pr});const ee=function(H){const B=[];let O=0;for(let F=0;F<H.length;F++){let R=H.charCodeAt(F);R<128?B[O++]=R:R<2048?(B[O++]=R>>6|192,B[O++]=63&R|128):55296==(64512&R)&&F+1<H.length&&56320==(64512&H.charCodeAt(F+1))?(R=65536+((1023&R)<<10)+(1023&H.charCodeAt(++F)),B[O++]=R>>18|240,B[O++]=R>>12&63|128,B[O++]=R>>6&63|128,B[O++]=63&R|128):(B[O++]=R>>12|224,B[O++]=R>>6&63|128,B[O++]=63&R|128)}return B},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let R=0;R<H.length;R+=3){const W=H[R],ve=R+1<H.length,nt=ve?H[R+1]:0,xt=R+2<H.length,Tt=xt?H[R+2]:0;let Cn=(15&nt)<<2|Tt>>6,$t=63&Tt;xt||($t=64,ve||(Cn=64)),F.push(O[W>>2],O[(3&W)<<4|nt>>4],O[Cn],O[$t])}return F.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(ee(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let O=0,F=0;for(;O<H.length;){const R=H[O++];if(R<128)B[F++]=String.fromCharCode(R);else if(R>191&&R<224){const W=H[O++];B[F++]=String.fromCharCode((31&R)<<6|63&W)}else if(R>239&&R<365){const xt=((7&R)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;B[F++]=String.fromCharCode(55296+(xt>>10)),B[F++]=String.fromCharCode(56320+(1023&xt))}else{const W=H[O++],ve=H[O++];B[F++]=String.fromCharCode((15&R)<<12|(63&W)<<6|63&ve)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const O=B?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let R=0;R<H.length;){const W=O[H.charAt(R++)],nt=R<H.length?O[H.charAt(R)]:0;++R;const Tt=R<H.length?O[H.charAt(R)]:64;++R;const Pt=R<H.length?O[H.charAt(R)]:64;if(++R,null==W||null==nt||null==Tt||null==Pt)throw new _e;F.push(W<<2|nt>>4),64!==Tt&&(F.push(nt<<4&240|Tt>>2),64!==Pt&&F.push(Tt<<6&192|Pt))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(H){return function(H){const B=ee(H);return se.encodeByteArray(B,!0)}(H).replace(/\./g,"")},G=function(H){try{return se.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function J(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const O in B)!B.hasOwnProperty(O)||!je(O)||(H[O]=J(H[O],B[O]));return H}function je(H){return"__proto__"!==H}const xe=()=>{try{return function be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&G(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},$e=H=>{const B=(H=>{var B,O;return null===(O=null===(B=xe())||void 0===B?void 0:B.emulatorHosts)||void 0===O?void 0:O[H]})(H);if(!B)return;const O=B.lastIndexOf(":");if(O<=0||O+1===B.length)throw new Error(`Invalid host ${B} with no separate hostname and port!`);const F=parseInt(B.substring(O+1),10);return"["===B[0]?[B.substring(1,O-1),F]:[B.substring(0,O),F]},De=()=>{var H;return null===(H=xe())||void 0===H?void 0:H.config},Ie=H=>{var B;return null===(B=xe())||void 0===B?void 0:B[`_${H}`]};class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,O)=>{this.resolve=B,this.reject=O})}wrapCallback(B){return(O,F)=>{O?this.reject(O):this.resolve(F),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(O):B(O,F))}}}function He(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=B||"demo-project",R=H.iat||0,W=H.sub||H.user_id;if(!W)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ve=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:R,exp:R+3600,auth_time:R,sub:W,user_id:W,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(ve)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function tt(){var H;const B=null===(H=xe())||void 0===H?void 0:H.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function St(){return"object"==typeof self&&self.self===self}function it(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Is(){const H=ke();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ce(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){try{return"object"==typeof indexedDB}catch{return!1}}function Ge(){return new Promise((H,B)=>{try{let O=!0;const F="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(F);R.onsuccess=()=>{R.result.close(),O||self.indexedDB.deleteDatabase(F),H(!0)},R.onupgradeneeded=()=>{O=!1},R.onerror=()=>{var W;B((null===(W=R.error)||void 0===W?void 0:W.message)||"")}}catch(O){B(O)}})}function Le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ht extends Error{constructor(B,O,F){super(O),this.code=B,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,ht.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}}class Tn{constructor(B,O,F){this.service=B,this.serviceName=O,this.errors=F}create(B,...O){const F=O[0]||{},R=`${this.service}/${B}`,W=this.errors[B],ve=W?function ut(H,B){return H.replace(_t,(O,F)=>{const R=B[F];return null!=R?String(R):`<${F}?>`})}(W,F):"Error";return new ht(R,`${this.serviceName}: ${ve} (${R}).`,F)}}const _t=/\{\$([^}]+)}/g;function Jr(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function Ys(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function ft(H,B){if(H===B)return!0;const O=Object.keys(H),F=Object.keys(B);for(const R of O){if(!F.includes(R))return!1;const W=H[R],ve=B[R];if(On(W)&&On(ve)){if(!ft(W,ve))return!1}else if(W!==ve)return!1}for(const R of F)if(!O.includes(R))return!1;return!0}function On(H){return null!==H&&"object"==typeof H}function $n(H){const B=[];for(const[O,F]of Object.entries(H))Array.isArray(F)?F.forEach(R=>{B.push(encodeURIComponent(O)+"="+encodeURIComponent(R))}):B.push(encodeURIComponent(O)+"="+encodeURIComponent(F));return B.length?"&"+B.join("&"):""}function Pr(H){const B={};return H.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[R,W]=F.split("=");B[decodeURIComponent(R)]=decodeURIComponent(W)}}),B}function jr(H){const B=H.indexOf("?");if(!B)return"";const O=H.indexOf("#",B);return H.substring(B,O>0?O:void 0)}function Kt(H,B){const O=new lt(H,B);return O.subscribe.bind(O)}class lt{constructor(B,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{B(this)}).catch(F=>{this.error(F)})}next(B){this.forEachObserver(O=>{O.next(B)})}error(B){this.forEachObserver(O=>{O.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,O,F){let R;if(void 0===B&&void 0===O&&void 0===F)throw new Error("Missing Observer.");R=function jn(H,B){if("object"!=typeof H||null===H)return!1;for(const O of B)if(O in H&&"function"==typeof H[O])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:O,complete:F},void 0===R.next&&(R.next=Cr),void 0===R.error&&(R.error=Cr),void 0===R.complete&&(R.complete=Cr);const W=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),W}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,B)}sendOne(B,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{O(this.observers[B])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cr(){}const Bt=1e3,Hn=2,Mn=144e5,Dr=.5;function zn(H,B=Bt,O=Hn){const F=B*Math.pow(O,H),R=Math.round(Dr*F*(Math.random()-.5)*2);return Math.min(Mn,F+R)}function zr(H){return H&&H._delegate?H._delegate:H}},5511:(Et,Te,L)=>{var c=L(4650);let $=null;function k(){return $}class ie{}const se=new c.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ge(){return(0,c.LFG)(G)}()},providedIn:"platform"}),n})();const ye=new c.OlP("Location Initialized");let G=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){z()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){z()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function J(){return new G((0,c.LFG)(se))}()},providedIn:"platform"}),n})();function z(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let st=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(xe)},providedIn:"root"}),n})();const pe=new c.OlP("appBaseHref");let xe=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+qe(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+qe(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(be(Re(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=je,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(c.LFG(st))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function De(){return new $e((0,c.LFG)(st))}()},providedIn:"root"}),n})();function Re(n){return n.replace(/\/index.html$/,"")}class pr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Js=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new pr(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),Ln(g,i)}});for(let i=0,u=r.length;i<u;i++){const g=r.get(i).context;g.index=i,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ln(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ln(n,e){n.context.$implicit=e.item}let Ci=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class zt{constructor(){this.$implicit=null,this.ngIf=null}}function cu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let bs=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,u]=t.split("."),l=-1===i.indexOf("-")?void 0:c.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Ro="server";function No(n){return n===Ro}let du=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Gh((0,c.LFG)(se),window)}),n})();class Gh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function pc(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=xs(this.window.history)||xs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gd extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Eu extends gd{static makeCurrent(){!function ee(n){$||($=n)}(new Eu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Aa(){return Vo=Vo||document.querySelector("base"),Vo?Vo.getAttribute("href"):null}();return null==t?null:function Xp(n){us=us||document.createElement("a"),us.setAttribute("href",n);const e=us.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Vo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Qs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let us,Vo=null;const Kh=new c.OlP("TRANSITION_ID"),md=[{provide:c.ip1,useFactory:function Iu(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Kh,se,c.zs3],multi:!0}];let Dc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const xa=new c.OlP("EventManagerPlugins");let Cu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xa),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Bo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let yd=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let u=i.get(t)??0;return u+=r,u>0?i.set(t,u):i.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ps=(()=>{class n extends yd{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const u=this.styleRef.get(r);u?u.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$o=/%COMP%/g,Na=new c.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Du(n,e){return e.flat(100).map(t=>t.replace($o,n))}function Sc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ri=(()=>{class n{constructor(t,r,i,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new _d(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof bu?i.applyToHost(t):i instanceof Os&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const l=this.eventManager,g=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case c.ifc.Emulated:u=new bu(l,g,r,this.appId,_);break;case c.ifc.ShadowDom:return new Wn(l,g,t,r);default:u=new Os(l,g,r,_)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Cu),c.LFG(Ps),c.LFG(c.AFp),c.LFG(Na))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class _d{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(uo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(vd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=uo[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=uo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Sc(r)):this.eventManager.addEventListener(e,t,Sc(r))}}function vd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Wn extends _d{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Du(i.id,i.styles);for(const l of u){const g=document.createElement("style");g.textContent=l,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Os extends _d{constructor(e,t,r,i,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Du(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class bu extends Os{constructor(e,t,r,i,u){const l=i+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Yh(n){return"_ngcontent-%COMP%".replace($o,n)}(l),this.hostAttr=function Tc(n){return"_nghost-%COMP%".replace($o,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let wd=(()=>{class n extends Bo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Pa=["alt","control","meta","shift"],Ed={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let sr=(()=>{class n extends Bo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),Pa.forEach(D=>{const T=r.indexOf(D);T>-1&&(r.splice(T,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Ed[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pa.forEach(l=>{l!==i&&(0,Tu[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Jh=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function zo(){Eu.makeCurrent()},multi:!0},{provide:se,useFactory:function Mc(){return(0,c.RDi)(document),document},deps:[]}]),lo=new c.OlP(""),Oa=[{provide:c.rWj,useClass:class cs{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};i.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],ho=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function xc(){return new c.qLn},deps:[]},{provide:xa,useClass:wd,multi:!0,deps:[se,c.R0b,c.Lbi]},{provide:xa,useClass:sr,multi:!0,deps:[se]},{provide:ri,useClass:ri,deps:[Cu,Ps,c.AFp,Na]},{provide:c.FYo,useExisting:ri},{provide:yd,useExisting:Ps},{provide:Ps,useClass:Ps,deps:[se]},{provide:Cu,useClass:Cu,deps:[xa,c.R0b]},{provide:class qh{},useClass:Dc,deps:[]},[]];let Go=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Kh,useExisting:c.AFp},md]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(lo,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...ho,...Oa],imports:[Mo,c.hGG]}),n})(),Xh=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function fo(){return new Xh((0,c.LFG)(se))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var nn=L(8996),Ui=L(7669);function ot(...n){const e=(0,Ui.yG)(n);return(0,nn.D)(n,e)}var Vi=L(7579);class Jn extends Vi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Fa=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Wr=L(9751);const{isArray:Vc}=Array,{getPrototypeOf:Sd,prototype:Ai,keys:Us}=Object;function Bc(n){if(1===n.length){const e=n[0];if(Vc(e))return{args:e,keys:null};if(function go(n){return n&&"object"==typeof n&&Sd(n)===Ai}(e)){const t=Us(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Wo=L(4671),bt=L(4004);const{isArray:$c}=Array;function xi(n){return(0,bt.U)(e=>function Ad(n,e){return $c(e)?n(...e):n(e)}(n,e))}function Nu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var mr=L(5403),La=L(9672);function jc(...n){const e=(0,Ui.yG)(n),t=(0,Ui.jO)(n),{args:r,keys:i}=Bc(n);if(0===r.length)return(0,nn.D)([],e);const u=new Wr.y(function mo(n,e,t=Wo.y){return r=>{Ua(e,()=>{const{length:i}=n,u=new Array(i);let l=i,g=i;for(let _=0;_<i;_++)Ua(e,()=>{const D=(0,nn.D)(n[_],e);let T=!1;D.subscribe((0,mr.x)(r,N=>{u[_]=N,T||(T=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Nu(i,l):Wo.y));return t?u.pipe(xi(t)):u}function Ua(n,e,t){n?(0,La.f)(t,n,e):e()}var Va=L(8189);function Ba(...n){return function nf(){return(0,Va.J)(1)}()((0,nn.D)(n,(0,Ui.yG)(n)))}var $a=L(8421);function Hc(n){return new Wr.y(e=>{(0,$a.Xf)(n()).subscribe(e)})}var zc=L(9635),Gc=L(576);function ja(n,e){const t=(0,Gc.m)(n)?n:()=>n,r=i=>i.error(t());return new Wr.y(e?i=>e.schedule(r,0,i):r)}var mi=L(515),qc=L(727),Ar=L(4482);function Ha(){return(0,Ar.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class rf extends Wr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ar.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qc.w0.EMPTY)}return e}refCount(){return Ha()(this)}}function xn(n,e){return(0,Ar.e)((t,r)=>{let i=null,u=0,l=!1;const g=()=>l&&!i&&r.complete();t.subscribe((0,mr.x)(r,_=>{i?.unsubscribe();let D=0;const T=u++;(0,$a.Xf)(n(_,T)).subscribe(i=(0,mr.x)(r,N=>r.next(e?e(_,N,T,D++):N),()=>{i=null,g()}))},()=>{l=!0,g()}))})}function yo(n){return n<=0?()=>mi.E:(0,Ar.e)((e,t)=>{let r=0;e.subscribe((0,mr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Vs(...n){const e=(0,Ui.yG)(n);return(0,Ar.e)((t,r)=>{(e?Ba(n,t,e):Ba(n,t)).subscribe(r)})}function yi(n,e){return(0,Ar.e)((t,r)=>{let i=0;t.subscribe((0,mr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var ar=L(5577);function za(n){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,mr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Pu(n=Zo){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,mr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Zo(){return new Fa}function Bi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yi((i,u)=>n(i,u,r)):Wo.y,yo(1),t?za(e):Pu(()=>new Fa))}function Bs(n,e){return(0,Gc.m)(e)?(0,ar.z)(n,e,1):(0,ar.z)(n,1)}var yr=L(8505);function $i(n){return(0,Ar.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,mr.x)(t,void 0,void 0,l=>{u=(0,$a.Xf)(n(l,$i(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Ou(n,e){return(0,Ar.e)(function cy(n,e,t,r,i){return(u,l)=>{let g=t,_=e,D=0;u.subscribe((0,mr.x)(l,T=>{const N=D++;_=g?n(_,T,N):(g=!0,T),r&&l.next(_)},i&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Wc(n){return n<=0?()=>mi.E:(0,Ar.e)((e,t)=>{let r=[];e.subscribe((0,mr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ko(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yi((i,u)=>n(i,u,r)):Wo.y,Wc(1),t?za(e):Pu(()=>new Fa))}function Yo(n){return(0,Ar.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const At="primary",$s=Symbol("RouteTitle");class vo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qo(n){return new vo(n)}function js(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))i[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ls(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Kc(n[i],e[i]))return!1;return!0}function Kc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Md(n){return Array.prototype.concat.apply([],n)}function Yc(n){return n.length>0?n[n.length-1]:null}function w(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function C(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,nn.D)(Promise.resolve(n)):ot(n)}const A=!1,U={exact:function We(n,e,t){if(!Mi(n.segments,e.segments)||!Nt(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!We(n.children[r],e.children[r],t))return!1;return!0},subset:dt},q={exact:function ce(n,e){return ls(n,e)},subset:function ze(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Kc(n[t],e[t]))},ignored:()=>!0};function K(n,e,t){return U[t.paths](n.root,e.root,t.matrixParams)&&q[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function dt(n,e,t){return Ot(n,e,e.segments,t)}function Ot(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Mi(i,t)||e.hasChildren()||!Nt(i,t,r))}if(n.segments.length===t.length){if(!Mi(n.segments,t)||!Nt(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!dt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Mi(n.segments,i)&&Nt(n.segments,i,r)&&n.children[At])&&Ot(n.children[At],e,u,r)}}function Nt(n,e,t){return e.every((r,i)=>q[t](n[i].parameters,r.parameters))}class Un{constructor(e=new Ct([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qo(this.queryParams)),this._queryParamMap}toString(){return Nd.serialize(this)}}class Ct{constructor(e,t){this.segments=e,this.children=t,this.parent=null,w(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fu(this)}}class ji{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qo(this.parameters)),this._parameterMap}toString(){return eg(this)}}function Mi(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ur=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new ku},providedIn:"root"}),n})();class ku{parse(e){const t=new x(e);return new Un(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Lu(e.root,!0)}`,r=function tg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qa(t)}=${qa(i)}`).join("&"):`${qa(t)}=${qa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function sf(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nd=new ku;function Fu(n){return n.segments.map(e=>eg(e)).join("/")}function Lu(n,e){if(!n.hasChildren())return Fu(n);if(e){const t=n.children[At]?Lu(n.children[At],!1):"",r=[];return w(n.children,(i,u)=>{u!==At&&r.push(`${u}:${Lu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function _i(n,e){let t=[];return w(n.children,(r,i)=>{i===At&&(t=t.concat(e(r,i)))}),w(n.children,(r,i)=>{i!==At&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===At?[Lu(n.children[At],!1)]:[`${i}:${Lu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${Fu(n)}/${t[0]}`:`${Fu(n)}/(${t.join("//")})`}}function Ga(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qa(n){return Ga(n).replace(/%3B/gi,";")}function Jo(n){return Ga(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uu(n){return decodeURIComponent(n)}function af(n){return Uu(n.replace(/\+/g,"%20"))}function eg(n){return`${Jo(n.path)}${function uf(n){return Object.keys(n).map(e=>`;${Jo(e)}=${Jo(n[e])}`).join("")}(n.parameters)}`}const ly=/^[^\/()?;=#]+/;function cf(n){const e=n.match(ly);return e?e[0]:""}const v=/^[^=?&#]+/,m=/^[^&#]+/;class x{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ct([],{}):new Ct([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[At]=new Ct(e,t)),r}parseSegment(){const e=cf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,A);return this.capture(e),new ji(Uu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=cf(this.remaining);i&&(r=i,this.capture(r))}e[Uu(t)]=Uu(r)}parseQueryParam(e){const t=function f(n){const e=n.match(v);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function E(n){const e=n.match(m);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=af(t),u=af(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,A);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=At);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[At]:new Ct([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,A)}}function P(n){return n.segments.length>0?new Ct([],{[At]:n}):n}function Y(n){const e={};for(const r of Object.keys(n.children)){const u=Y(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ae(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new Ct(n.segments.concat(e.segments),e.children)}return n}(new Ct(n.segments,e))}function Be(n){return n instanceof Un}const Ze=!1;function wo(n,e,t,r,i){if(0===t.length)return ds(e.root,e.root,e.root,r,i);const u=function Xc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Pd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return w(u.outlets,(_,D)=>{g[D]="string"==typeof _?_.split("/"):_}),[...i,{outlets:g}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&i.push(g))}),i):[...i,u]},[]);return new Pd(t,e,r)}(t);return u.toRoot()?ds(e.root,e.root,new Ct([],{}),r,i):function l(_){const D=function kd(n,e,t,r){if(n.isAbsolute)return new ea(e.root,!0,0);if(-1===r)return new ea(t,t===e.root,0);return function Vu(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new c.vHH(4005,Ze&&"Invalid number of '../'");i=r.segments.length}return new ea(r,!1,i-u)}(t,r+(Xo(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),T=D.processChildren?ta(D.segmentGroup,D.index,u.commands):Bu(D.segmentGroup,D.index,u.commands);return ds(e.root,D.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function Xo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Jc(n){return"object"==typeof n&&null!=n&&n.outlets}function ds(n,e,t,r,i){let l,u={};r&&w(r,(_,D)=>{u[D]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),l=n===e?t:lf(n,e,t);const g=P(Y(l));return new Un(g,u,i)}function lf(n,e,t){const r={};return w(n.children,(i,u)=>{r[u]=i===e?t:lf(i,e,t)}),new Ct(n.segments,r)}class Pd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xo(r[0]))throw new c.vHH(4003,Ze&&"Root segment cannot have matrix parameters");const i=r.find(Jc);if(i&&i!==Yc(r))throw new c.vHH(4004,Ze&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ea{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Bu(n,e,t){if(n||(n=new Ct([],{})),0===n.segments.length&&n.hasChildren())return ta(n,e,t);const r=function dy(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],g=t[r];if(Jc(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!hy(_,D,l))return u;r+=2}else{if(!hy(_,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ct(n.segments.slice(0,r.pathIndex),{});return u.children[At]=new Ct(n.segments.slice(r.pathIndex),n.children),ta(u,0,i)}return r.match&&0===i.length?new Ct(n.segments,{}):r.match&&!n.hasChildren()?df(n,e,t):r.match?ta(n,0,i):df(n,e,t)}function ta(n,e,t){if(0===t.length)return new Ct(n.segments,{});{const r=function Fd(n){return Jc(n[0])?n[0].outlets:{[At]:n}}(t),i={};if(!r[At]&&n.children[At]&&1===n.numberOfChildren&&0===n.children[At].segments.length){const u=ta(n.children[At],e,t);return new Ct(n.segments,u.children)}return w(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=Bu(n.children[l],e,u))}),w(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new Ct(n.segments,i)}}function df(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Jc(u)){const _=hf(u.outlets);return new Ct(r,_)}if(0===i&&Xo(t[0])){r.push(new ji(n.segments[e].path,R0(t[0]))),i++;continue}const l=Jc(u)?u.outlets[At]:`${u}`,g=i<t.length-1?t[i+1]:null;l&&g&&Xo(g)?(r.push(new ji(l,R0(g))),i+=2):(r.push(new ji(l,{})),i++)}return new Ct(r,{})}function hf(n){const e={};return w(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=df(new Ct([],{}),0,t))}),e}function R0(n){const e={};return w(n,(t,r)=>e[r]=`${t}`),e}function hy(n,e,t){return n==t.path&&ls(e,t.parameters)}const ff="imperative";class na{constructor(e,t){this.id=e,this.url=t}}class fy extends na{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $u extends na{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pf extends na{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class el extends na{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class gf extends na{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ld extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BC extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $C extends na{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fx extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jC extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class py{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class HC{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class N0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ng{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gy{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class my{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let zC=(()=>{class n{createUrlTree(t,r,i,u,l,g){return wo(t||r.root,i,u,l,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),qC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(e){return zC.\u0275fac(e)},providedIn:"root"}),n})();class F0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=yy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ra(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ra(e,this._root).map(t=>t.value)}}function yy(n,e){if(n===e.value)return e;for(const t of e.children){const r=yy(n,t);if(r)return r}return null}function ra(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ra(n,t);if(r.length)return r.unshift(e),r}return[]}class hs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ud(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class WC extends F0{constructor(e,t){super(e),this.snapshot=t,_y(this,e)}toString(){return this.snapshot.toString()}}function ZC(n,e){const t=function Lx(n,e){const l=new rg([],{},{},"",{},At,e,null,n.root,-1,{});return new U0("",new hs(l,[]))}(n,e),r=new Jn([new ji("",{})]),i=new Jn({}),u=new Jn({}),l=new Jn({}),g=new Jn(""),_=new mf(r,i,l,g,u,At,e,t.root);return _.snapshot=t.root,new WC(new hs(_,[]),t)}class mf{constructor(e,t,r,i,u,l,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.pipe((0,bt.U)(D=>D[$s]))??ot(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>Qo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>Qo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function KC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function L0(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class rg{get title(){return this.data?.[$s]}constructor(e,t,r,i,u,l,g,_,D,T,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._urlSegment=D,this._lastPathIndex=T,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class U0 extends F0{constructor(e,t){super(t),this.url=e,_y(this,t)}toString(){return V0(this._root)}}function _y(n,e){e.value._routerState=n,e.children.forEach(t=>_y(n,t))}function V0(n){const e=n.children.length>0?` { ${n.children.map(V0).join(", ")} } `:"";return`${n.value}${e}`}function yf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ls(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ls(e.params,t.params)||n.params.next(t.params),function Zc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ls(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ls(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Eo(n,e){const t=ls(n.params,e.params)&&function Qc(n,e){return Mi(n,e)&&n.every((t,r)=>ls(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Eo(n.parent,e.parent))}function Vd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function B0(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Vd(n,r,i);return Vd(n,r)})}(n,e,t);return new hs(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>Vd(n,g)),l}}const r=function $0(n){return new mf(new Jn(n.url),new Jn(n.params),new Jn(n.queryParams),new Jn(n.fragment),new Jn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Vd(n,u));return new hs(r,i)}}const j0="ngNavigationCancelingError";function YC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Be(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QC(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function QC(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[j0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ig(n){return sg(n)&&Be(n.url)}function sg(n){return n&&n[j0]}class Ux{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new og,this.attachRef=null}}let og=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ux,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vf=!1;let vy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=At,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(og),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,vf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,vf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,vf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,vf);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new JC(t,g,i.injector);if(r&&function XC(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(l);this.activated=i.createComponent(D,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),n})();class JC{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===mf?this.route:e===og?this.childContexts:this.parent.get(e,t)}}let wy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[vy],encapsulation:2}),n})();function Ey(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ag(n){const e=n.children&&n.children.map(ag),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=wy),t}function Hs(n){return n.outlet||At}function G0(n,e){const t=n.filter(r=>Hs(r)===e);return t.push(...n.filter(r=>Hs(r)!==e)),t}function wf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class q0{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ud(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),w(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ud(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ud(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ud(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new P0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ng(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(yf(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),yf(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=wf(i.snapshot),_=g?.get(c._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=g,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class rD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cy{constructor(e,t){this.component=e,this.route=t}}function Ef(n,e,t){const r=n._root;return Bd(r,e?e._root:null,t,[r.value])}function tl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function Bd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ud(e);return n.children.forEach(l=>{(function W0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function $x(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mi(n.url,e.url)||!ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eo(n,e)||!ls(n.queryParams,e.queryParams);default:return!Eo(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new rD(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Bd(n,e,u.component?g?g.children:null:t,r,i),_&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new Cy(g.outlet.component,l))}else l&&If(e,g,i),i.canActivateChecks.push(new rD(r)),Bd(n,null,u.component?g?g.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),w(u,(l,g)=>If(l,t.getContext(g),i)),i}function If(n,e,t){const r=Ud(n),i=n.value;w(r,(u,l)=>{If(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Cy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $d(n){return"function"==typeof n}function Wa(n){return n instanceof Fa||"EmptyError"===n?.name}const ug=Symbol("INITIAL_VALUE");function ju(){return xn(n=>jc(n.map(e=>e.pipe(yo(1),Vs(ug)))).pipe((0,bt.U)(e=>{for(const t of e)if(!0!==t){if(t===ug)return ug;if(!1===t||t instanceof Un)return t}return!0}),yi(e=>e!==ug),yo(1)))}function My(n){return(0,zc.z)((0,yr.b)(e=>{if(Be(e))throw YC(0,e)}),(0,bt.U)(e=>!0===e))}const Ry={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Q0(n,e,t,r,i){const u=Ny(n,e,t);return u.matched?function jd(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ot(i.map(l=>{const g=tl(l,n);return C(function Sy(n){return n&&$d(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(ju(),My()):ot(!0)}(r=Ey(e,r),e,t).pipe((0,bt.U)(l=>!0===l?u:{...Ry})):ot(u)}function Ny(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ry}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||js)(t,n,e);if(!i)return{...Ry};const u={};w(i.posParams,(g,_)=>{u[_]=g.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Hd(n,e,t,r){if(t.length>0&&function lD(n,e,t){return t.some(r=>Py(n,e,r)&&Hs(r)!==At)}(n,t,r)){const u=new Ct(e,function J0(n,e,t,r){const i={};i[At]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Hs(u)!==At){const l=new Ct([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Hs(u)]=l}return i}(n,e,r,new Ct(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function X0(n,e,t){return t.some(r=>Py(n,e,r))}(n,t,r)){const u=new Ct(n.segments,function cD(n,e,t,r,i){const u={};for(const l of r)if(Py(n,t,l)&&!i[Hs(l)]){const g=new Ct([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[Hs(l)]=g}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new Ct(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Py(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ew(n,e,t,r){return!!(Hs(n)===r||r!==At&&Py(e,t,n))&&("**"===n.path||Ny(e,n,t).matched)}function zd(n,e,t){return 0===e.length&&!n.children[t]}const dg=!1;class Za{constructor(e){this.segmentGroup=e||null}}class Gd{constructor(e){this.urlTree=e}}function Cf(n){return ja(new Za(n))}function Oy(n){return ja(new Gd(n))}class tw{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Hd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ct(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,At).pipe((0,bt.U)(u=>this.createUrlTree(Y(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe($i(u=>{if(u instanceof Gd)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Za?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,At).pipe((0,bt.U)(i=>this.createUrlTree(Y(i),e.queryParams,e.fragment))).pipe($i(i=>{throw i instanceof Za?this.noMatchError(i):i}))}noMatchError(e){return new c.vHH(4002,dg)}createUrlTree(e,t,r){const i=P(e);return new Un(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(u=>new Ct([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,nn.D)(i).pipe(Bs(u=>{const l=r.children[u],g=G0(t,u);return this.expandSegmentGroup(e,g,l,u).pipe((0,bt.U)(_=>({segment:_,outlet:u})))}),Ou((u,l)=>(u[l.outlet]=l.segment,u),{}),Ko())}expandSegment(e,t,r,i,u,l){return(0,nn.D)(r).pipe(Bs(g=>this.expandSegmentAgainstRoute(e,t,r,g,i,u,l).pipe($i(D=>{if(D instanceof Za)return ot(null);throw D}))),Bi(g=>!!g),$i((g,_)=>{if(Wa(g))return zd(t,i,u)?ot(new Ct([],{})):Cf(t);throw g}))}expandSegmentAgainstRoute(e,t,r,i,u,l,g){return ew(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):Cf(t):Cf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Oy(u):this.lineralizeSegments(r,u).pipe((0,ar.z)(l=>{const g=new Ct(l,{});return this.expandSegment(e,g,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:T}=Ny(t,i,u);if(!g)return Cf(t);const N=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?Oy(N):this.lineralizeSegments(i,N).pipe((0,ar.z)(j=>this.expandSegment(e,t,r,j.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=Ey(r,e),r.loadChildren?(r._loadedRoutes?ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,bt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Ct(i,{})))):ot(new Ct(i,{}))):Q0(t,r,i,e).pipe(xn(({matched:l,consumedSegments:g,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ar.z)(T=>{const N=T.injector??e,j=T.routes,{segmentGroup:Q,slicedSegments:oe}=Hd(t,g,_,j),Ae=new Ct(Q.segments,Q.children);if(0===oe.length&&Ae.hasChildren())return this.expandChildren(N,j,Ae).pipe((0,bt.U)(rt=>new Ct(g,rt)));if(0===j.length&&0===oe.length)return ot(new Ct(g,{}));const Ee=Hs(r)===u;return this.expandSegment(N,Ae,j,oe,Ee?At:u,!0).pipe((0,bt.U)(yt=>new Ct(g.concat(yt.segments),yt.children)))})):Cf(t)))}getChildConfig(e,t,r){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function uD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ot(!0):ot(i.map(l=>{const g=tl(l,n);return C(function by(n){return n&&$d(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(ju(),My())}(e,t,r).pipe((0,ar.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,yr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function hD(n){return ja(QC(dg,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ot(r);if(i.numberOfChildren>1||!i.children[At])return e.redirectTo,ja(new c.vHH(4e3,dg));i=i.children[At]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Un(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return w(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[u]=t[g]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return w(t.children,(g,_)=>{l[_]=this.createSegmentGroup(e,g,r,i)}),new Ct(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,dg);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ky{}class Df{constructor(e,t,r,i,u,l,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g}recognize(){const e=Hd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,At).pipe((0,bt.U)(t=>{if(null===t)return null;const r=new rg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new hs(r,t),u=new U0(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=KC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,nn.D)(Object.keys(r.children)).pipe(Bs(i=>{const u=r.children[i],l=G0(t,i);return this.processSegmentGroup(e,l,u,i)}),Ou((i,u)=>i&&u?(i.push(...u),i):null),function xd(n,e=!1){return(0,Ar.e)((t,r)=>{let i=0;t.subscribe((0,mr.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),za(null),Ko(),(0,bt.U)(i=>{if(null===i)return null;const u=rw(i);return function gD(n){n.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,nn.D)(t).pipe(Bs(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),Bi(l=>!!l),$i(l=>{if(Wa(l))return zd(r,i,u)?ot([]):ot(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!ew(t,r,i,u))return ot(null);let l;if("**"===t.path){const g=i.length>0?Yc(i).parameters:{},_=sw(r)+i.length;l=ot({snapshot:new rg(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ia(t),Hs(t),t.component??t._loadedComponent??null,t,iw(r),_,ow(t)),consumedSegments:[],remainingSegments:[]})}else l=Q0(r,t,i,e).pipe((0,bt.U)(({matched:g,consumedSegments:_,remainingSegments:D,parameters:T})=>{if(!g)return null;const N=sw(r)+_.length;return{snapshot:new rg(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ia(t),Hs(t),t.component??t._loadedComponent??null,t,iw(r),N,ow(t)),consumedSegments:_,remainingSegments:D}}));return l.pipe(xn(g=>{if(null===g)return ot(null);const{snapshot:_,consumedSegments:D,remainingSegments:T}=g;e=t._injector??e;const N=t._loadedInjector??e,j=function mD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Q,slicedSegments:oe}=Hd(r,D,T,j.filter(Ee=>void 0===Ee.redirectTo));if(0===oe.length&&Q.hasChildren())return this.processChildren(N,j,Q).pipe((0,bt.U)(Ee=>null===Ee?null:[new hs(_,Ee)]));if(0===j.length&&0===oe.length)return ot([new hs(_,[])]);const Ae=Hs(t)===u;return this.processSegment(N,j,Q,oe,Ae?At:u).pipe((0,bt.U)(Ee=>null===Ee?null:[new hs(_,Ee)]))}))}}function yD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rw(n){const e=[],t=new Set;for(const r of n){if(!yD(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=rw(r.children);e.push(new hs(r.value,i))}return e.filter(r=>!t.has(r))}function iw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function sw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ia(n){return n.data||{}}function ow(n){return n.resolve||{}}function Ly(n){return"string"==typeof n.title||null===n.title}function Uy(n){return xn(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,bt.U)(()=>e)):ot(e)})}const qd=new c.OlP("ROUTES");let By=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=C(t.loadComponent()).pipe((0,bt.U)(cw),(0,yr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Yo(()=>{this.componentLoaders.delete(t)})),i=new rf(r,()=>new Vi.x).pipe(Ha());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,bt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D,T=!1;Array.isArray(g)?D=g:(_=g.create(t).injector,D=Md(_.get(qd,[],c.XFs.Self|c.XFs.Optional)));return{routes:D.map(ag),injector:_}}),Yo(()=>{this.childrenLoaders.delete(r)})),l=new rf(u,()=>new Vi.x).pipe(Ha());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return C(t()).pipe((0,bt.U)(cw),(0,ar.z)(r=>r instanceof c.YKP||Array.isArray(r)?ot(r):(0,nn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cw(n){return function Io(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let fg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Vi.x,this.configLoader=(0,c.f3M)(By),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(Ur),this.rootContexts=(0,c.f3M)(og),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new HC(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new py(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Jn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ff,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yi(r=>0!==r.id),(0,bt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),xn(r=>{let i=!1,u=!1;return ot(r).pipe((0,yr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xn(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new el(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),mi.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return lw(l.source)&&(t.browserUrlTree=l.extractedUrl),ot(l).pipe(xn(T=>{const N=this.transitions?.getValue();return this.events.next(new fy(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),N!==this.transitions?.getValue()?mi.E:Promise.resolve(T)}),function nw(n,e,t,r){return xn(i=>function fD(n,e,t,r,i){return new tw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,bt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,yr.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function vD(n,e,t,r,i){return(0,ar.z)(u=>function Fy(n,e,t,r,i,u,l="emptyOnly"){return new Df(n,e,t,r,i,l,u).recognize().pipe(xn(g=>null===g?function pD(n){return new Wr.y(e=>e.error(n))}(new ky):ot(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,bt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,yr.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const j=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(j,T)}t.browserUrlTree=T.urlAfterRedirects}const N=new Ld(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(N)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:N,source:j,restoredState:Q,extras:oe}=l,Ae=new fy(T,this.urlSerializer.serialize(N),j,Q);this.events.next(Ae);const Ee=ZC(N,this.rootComponentType).snapshot;return ot(r={...l,targetSnapshot:Ee,urlAfterRedirects:N,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new el(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),mi.E}}),(0,yr.b)(l=>{const g=new BC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,bt.U)(l=>r={...l,guards:Ef(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function cg(n,e){return(0,ar.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?ot({...t,guardsResult:!0}):function oD(n,e,t,r){return(0,nn.D)(n).pipe((0,ar.z)(i=>function aD(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ot(u.map(g=>{const _=wf(e)??i,D=tl(g,_);return C(function iD(n){return n&&$d(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(Bi())})).pipe(ju()):ot(!0)}(i.component,i.route,t,e,r)),Bi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ar.z)(g=>g&&function Z0(n){return"boolean"==typeof n}(g)?function Ay(n,e,t,r){return(0,nn.D)(e).pipe(Bs(i=>Ba(function nl(n,e){return null!==n&&e&&e(new N0(n)),ot(!0)}(i.route.parent,r),function lg(n,e){return null!==n&&e&&e(new gy(n)),ot(!0)}(i.route,r),function xy(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Dy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Hc(()=>ot(l.guards.map(_=>{const D=wf(l.node)??t,T=tl(_,D);return C(function Ty(n){return n&&$d(n.canActivateChild)}(T)?T.canActivateChild(r,n):D.runInContext(()=>T(r,n))).pipe(Bi())})).pipe(ju())));return ot(u).pipe(ju())}(n,i.path,t),function Y0(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ot(!0);const i=r.map(u=>Hc(()=>{const l=wf(e)??t,g=tl(u,l);return C(function jx(n){return n&&$d(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(Bi())}));return ot(i).pipe(ju())}(n,i.route,t))),Bi(i=>!0!==i,!0))}(r,u,n,e):ot(g)),(0,bt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,yr.b)(l=>{if(r.guardsResult=l.guardsResult,Be(l.guardsResult))throw YC(0,l.guardsResult);const g=new $C(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),yi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Uy(l=>{if(l.guards.canActivateChecks.length)return ot(l).pipe((0,yr.b)(g=>{const _=new Fx(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),xn(g=>{let _=!1;return ot(g).pipe(function Hx(n,e){return(0,ar.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ot(t);let u=0;return(0,nn.D)(i).pipe(Bs(l=>function zx(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!Ly(i)&&(u[$s]=i.title),function aw(n,e,t,r){const i=function Gx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ot({});const u={};return(0,nn.D)(i).pipe((0,ar.z)(l=>function uw(n,e,t,r){const i=wf(e)??r,u=tl(n,i);return C(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Bi(),(0,yr.b)(g=>{u[l]=g}))),Wc(1),function _o(n){return(0,bt.U)(()=>n)}(u),$i(l=>Wa(l)?mi.E:ja(l)))}(u,n,e,r).pipe((0,bt.U)(l=>(n._resolvedData=l,n.data=KC(n,t).resolve,i&&Ly(i)&&(n.data[$s]=i.title),null)))}(l.route,r,n,e)),(0,yr.b)(()=>u++),Wc(1),(0,ar.z)(l=>u===i.length?ot(t):mi.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,yr.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,yr.b)(g=>{const _=new jC(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),Uy(l=>{const g=_=>{const D=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,yr.b)(T=>{_.component=T}),(0,bt.U)(()=>{})));for(const T of _.children)D.push(...g(T));return D};return jc(g(l.targetSnapshot.root)).pipe(za(),yo(1))}),Uy(()=>this.afterPreactivation()),(0,bt.U)(l=>{const g=function _f(n,e,t){const r=Vd(n,e._root,t?t._root:void 0);return new WC(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,yr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new q0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),yo(1),(0,yr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new $u(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Yo(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),$i(l=>{if(u=!0,sg(l)){ig(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new pf(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),ig(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||lw(r.source)};t.scheduleNavigation(_,ff,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new gf(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return mi.E}))}))}cancelNavigationTransition(t,r,i){const u=new pf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lw(n){return n!==ff}let dw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===At);return r}getResolvedTitleForRoute(t){return t.data[$s]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(wD)},providedIn:"root"}),n})(),wD=(()=>{class n extends dw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xh))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(ID)},providedIn:"root"}),n})();class ED{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let ID=(()=>{class n extends ED{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jt=new c.OlP("",{providedIn:"root",factory:()=>({})});let fw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(pw)},providedIn:"root"}),n})(),pw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DD(n){throw n}function bD(n,e,t){return e.parse("/")}const gw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let si=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(jt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||DD,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bD,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(fw),this.routeReuseStrategy=(0,c.f3M)(hw),this.urlCreationStrategy=(0,c.f3M)(qC),this.titleStrategy=(0,c.f3M)(dw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Md((0,c.f3M)(qd,{optional:!0})??[]),this.navigationTransitions=(0,c.f3M)(fg),this.urlSerializer=(0,c.f3M)(Ur),this.location=(0,c.f3M)($e),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Un,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ZC(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ff,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(ag),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,D=_?this.currentUrlTree.fragment:l;let T=null;switch(g){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,T,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Be(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,ff,null,r)}navigate(t,r={skipLocationChange:!1}){return function SD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...gw}:!1===r?{...TD}:r,Be(t))return K(this.currentUrlTree,t,i);const u=this.parseUrl(t);return K(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,D,T;return l?(g=l.resolve,_=l.reject,D=l.promise):D=new Promise((N,j)=>{g=N,_=j}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hu=(()=>{class n{constructor(t,r,i,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=l,this.locationStrategy=g,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Vi.x;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof $u&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,u=this.el.nativeElement;null!==r?i.setAttribute(u,t,r):i.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(si),c.Y36(mf),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(st))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})();class $y{}let jy=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(yi(t=>t instanceof $u),Bs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,c.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,nn.D)(i).pipe((0,Va.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ot(null);const u=i.pipe((0,ar.z)(l=>null===l?ot(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,nn.D)([u,l]).pipe((0,Va.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(si),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG($y),c.LFG(By))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sf=new c.OlP("");let yw=(()=>{class n{constructor(t,r,i,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $u&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof my&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new my(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();var zs=(()=>((zs=zs||{})[zs.COMPLETE=0]="COMPLETE",zs[zs.FAILED=1]="FAILED",zs[zs.REDIRECTING=2]="REDIRECTING",zs))();const Af=!1;function rl(n,e){return{\u0275kind:n,\u0275providers:e}}const zy=new c.OlP("",{providedIn:"root",factory:()=>!1});function xf(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(si),i=n.get(_w);1===n.get(gg)&&r.initialNavigation(),n.get(vw,null,c.XFs.Optional)?.setUpPreloading(),n.get(Sf,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const _w=new c.OlP(Af?"bootstrap done indicator":"",{factory:()=>new Vi.x}),gg=new c.OlP(Af?"initial navigation":"",{providedIn:"root",factory:()=>1});function RD(){let n=[];return n=Af?[{provide:c.Xts,multi:!0,useFactory:()=>{const e=(0,c.f3M)(si);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function O0(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],rl(1,n)}const vw=new c.OlP(Af?"router preloader":"");function ND(n){return rl(0,[{provide:vw,useExisting:jy},{provide:$y,useExisting:n}])}const Kd=!1,kD=new c.OlP(Kd?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Gy=[$e,{provide:Ur,useClass:ku},si,og,{provide:mf,useFactory:function Hy(n){return n.routerState.root},deps:[si]},By,Kd?{provide:zy,useValue:!0}:[]];function FD(){return new c.PXZ("Router",si)}let LD=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Gy,Kd&&r?.enableTracing?RD().\u0275providers:[],{provide:qd,multi:!0,useValue:t},{provide:kD,useFactory:Iw,deps:[[si,new c.FiY,new c.tp0]]},{provide:jt,useValue:r||{}},r?.useHash?{provide:st,useClass:Oe}:{provide:st,useClass:xe},{provide:Sf,useFactory:()=>{const n=(0,c.f3M)(du),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(jt),r=(0,c.f3M)(fg),i=(0,c.f3M)(Ur);return t.scrollOffset&&n.setOffset(t.scrollOffset),new yw(i,r,n,e,t)}},r?.preloadingStrategy?ND(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:FD},r?.initialNavigation?VD(r):[],[{provide:Cw,useFactory:xf},{provide:c.tb,multi:!0,useExisting:Cw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:qd,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(kD,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[wy]}),n})();function Iw(n){if(Kd&&n)throw new c.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function VD(n){return["disabled"===n.initialNavigation?rl(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(si);return()=>{e.setUpLocationChangeListener()}}},{provide:gg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?rl(2,[{provide:gg,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(ye,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(si),u=e.get(_w);(function Zx(n,e){n.events.pipe(yi(t=>t instanceof $u||t instanceof pf||t instanceof gf||t instanceof el),(0,bt.U)(t=>t instanceof $u||t instanceof el?zs.COMPLETE:t instanceof pf&&(0===t.code||1===t.code)?zs.REDIRECTING:zs.FAILED),yi(t=>t!==zs.REDIRECTING),yo(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(fg).afterPreactivation=()=>(r(!0),u.closed?ot(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const Cw=new c.OlP(Kd?"Router Initializer":"");var le=L(5861),Rf=L(6451),Qd=L(5363),yg=L(6063);class Dw extends Vi.x{constructor(e=1/0,t=1/0,r=yg.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var qy=L(3099);function _g(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,qy.B)({connector:()=>new Dw(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function vg(n,e){return(0,Gc.m)(e)?xn(()=>n,e):xn(()=>n)}var wg=L(9468),cn=L(4976),Hi=L(2011),il=L(259);class sl{constructor(e){return e}}class bw{constructor(){return(0,il.C6)()}}const Wy=new c.OlP("angularfire2._apps"),$D={provide:sl,useFactory:function Tw(n){return n&&1===n.length?n[0]:new sl((0,il.Mq)())},deps:[[new c.FiY,Wy]]},fs={provide:bw,deps:[[new c.FiY,Wy]]};function jD(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sl(r)}}let HD=(()=>{class n{constructor(t){(0,il.KN)("angularfire",cn.q4.full,"core"),(0,il.KN)("angularfire",cn.q4.full,"app"),(0,il.KN)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[$D,fs]}),n})();function Jx(n,...e){return{ngModule:HD,providers:[{provide:Wy,useFactory:jD(n),multi:!0,deps:[c.R0b,c.zs3,cn.HU,...e]}]}}const GD=(0,cn.u3)(il.ZF,!0);var ps=L(6881),zu=L(4859),en=L(2090),Gu=L(1877);const Zy=new Map,Aw={activated:!1,tokenObservers:[]},WD={initialized:!1,enabled:!1};function En(n){return Zy.get(n)||Object.assign({},Aw)}function Eg(){return WD}const Yy="https://content-firebaseappcheck.googleapis.com/v1",KD="exchangeDebugToken",Mw={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class YD{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,le.Z)(function*(){t.stop();try{t.pending=new en.BH,yield function QD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new en.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vr=new en.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Rw(n){if(!En(n).activated)throw Vr.create("use-before-activation",{appName:n.name})}function Pf(n,e){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,le.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const N=yield i.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(N){throw Vr.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw Vr.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(N){throw Vr.create("fetch-parse-error",{originalErrorMessage:N?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),T=Date.now();return{token:g.token,expireTimeMillis:T+D,issuedAtTimeMillis:T}})).apply(this,arguments)}function Dg(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Yy}/projects/${t}/apps/${r}:${KD}?key=${i}`,body:{debug_token:e}}}const Ka="firebase-app-check-database",bg=1,qu="firebase-app-check-store";let Tg=null;function kw(n,e){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,le.Z)(function*(n,e){const r=(yield function Xy(){return Tg||(Tg=new Promise((n,e)=>{try{const t=indexedDB.open(Ka,bg);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(qu,{keyPath:"compositeKey"})}}catch(t){e(Vr.create("storage-open",{originalErrorMessage:t?.message}))}}),Tg)}()).transaction(qu,"readwrite"),u=r.objectStore(qu).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var D;g(Vr.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const kf=new Gu.Yd("@firebase/app-check");function n_(n,e){return(0,en.hl)()?function JD(n,e){return kw(function Uw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function r_(){return Eg().enabled}function Lf(){return i_.apply(this,arguments)}function i_(){return(i_=(0,le.Z)(function*(){const n=Eg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const nb={error:"UNKNOWN_ERROR"};function rb(n){return en.US.encodeString(JSON.stringify(n),!1)}function Sg(n){return s_.apply(this,arguments)}function s_(){return(s_=(0,le.Z)(function*(n,e=!1){const t=n.app;Rw(t);const r=En(t);let u,i=r.token;if(i&&!Ya(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Ya(_)?i=_:yield n_(t,void 0))}if(!e&&i&&Ya(i))return{token:i.token};let g,l=!1;if(r_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Pf(Dg(t,yield Lf()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield n_(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield En(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?kf.warn(_.message):kf.error(_),u=_}return i?u?g=Ya(i)?{token:i.token,internalError:u}:jw(u):(g={token:i.token},r.token=i,yield n_(t,i)):g=jw(u),l&&function sb(n,e){const t=En(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g})).apply(this,arguments)}function Bw(n){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,le.Z)(function*(n){const e=n.app;Rw(e);const{provider:t}=En(e);if(r_()){const r=yield Lf(),{token:i}=yield Pf(Dg(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function o_(n,e){const t=En(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ib(n){const{app:e}=n,t=En(e);let r=t.tokenRefresher;r||(r=function $w(n){const{app:e}=n;return new YD((0,le.Z)(function*(){let r;if(r=En(e).token?yield Sg(n,!0):yield Sg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=En(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Mw.RETRIAL_MIN_WAIT,Mw.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ya(n){return n.expireTimeMillis-Date.now()>0}function jw(n){return{token:rb(nb),error:n}}class ob{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=En(this.app);for(const t of e)o_(this.app,t.next);return Promise.resolve()}}const zw="app-check-internal";!function Gw(){(0,ps._registerComponent)(new zu.wA("app-check",n=>function a_(n,e){return new ob(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zw).initialize()})),(0,ps._registerComponent)(new zu.wA(zw,n=>function ab(n){return{getToken:e=>Sg(n,e),getLimitedUseToken:()=>Bw(n),addTokenListener:e=>function xg(n,e,t,r){const{app:i}=n,u=En(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Ya(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),ib(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ib(n))}(n,"INTERNAL",e),removeTokenListener:e=>o_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ps.registerVersion)("@firebase/app-check","0.8.0")}();class fl{constructor(){return(0,cn.vb)("app-check")}}typeof window<"u"&&window,L(9260);const p_=new c.OlP("angularfire2.auth.use-emulator"),g_=new c.OlP("angularfire2.auth.settings"),m_=new c.OlP("angularfire2.auth.tenant-id"),Xw=new c.OlP("angularfire2.auth.langugage-code"),eE=new c.OlP("angularfire2.auth.use-device-language"),tE=new c.OlP("angularfire.auth.persistence"),y_=(n,e,t,r,i,u,l,g)=>(0,Hi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),l)for(const[D,T]of Object.entries(l))_.settings[D]=T;return g&&_.setPersistence(g),_},[t,r,i,u,l,g]);let rh=(()=>{class n{constructor(t,r,i,u,l,g,_,D,T,N,j,Q){const oe=new Vi.x,Ae=ot(void 0).pipe((0,Qd.Q)(l.outsideAngular),xn(()=>u.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9568)))),(0,bt.U)(()=>(0,Hi.on)(t,u,r)),(0,bt.U)(Ee=>y_(Ee,u,g,D,T,N,_,j)),_g({bufferSize:1,refCount:!1}));if(No(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{Ae.pipe(Bi()).subscribe();const gt=Ae.pipe(xn(pt=>pt.getRedirectResult().then(Vt=>Vt,()=>null)),cn.iC,_g({bufferSize:1,refCount:!1})),yt=Ae.pipe(xn(pt=>new Wr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>pt.onAuthStateChanged(an=>Vt.next(an),an=>Vt.error(an),()=>Vt.complete()))})))),rt=Ae.pipe(xn(pt=>new Wr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>pt.onIdTokenChanged(an=>Vt.next(an),an=>Vt.error(an),()=>Vt.complete()))}))));this.authState=gt.pipe(vg(yt),(0,wg.R)(l.outsideAngular),(0,Qd.Q)(l.insideAngular)),this.user=gt.pipe(vg(rt),(0,wg.R)(l.outsideAngular),(0,Qd.Q)(l.insideAngular)),this.idToken=this.user.pipe(xn(pt=>pt?(0,nn.D)(pt.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(xn(pt=>pt?(0,nn.D)(pt.getIdTokenResult()):ot(null))),this.credential=(0,Rf.T)(gt,oe,this.authState.pipe(yi(pt=>!pt))).pipe((0,bt.U)(pt=>pt?.user?pt:null),(0,wg.R)(l.outsideAngular),(0,Qd.Q)(l.insideAngular))}return(0,Hi.pX)(this,Ae,u,{spy:{apply:(Ee,gt,yt)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&yt.then(rt=>oe.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Hi.Dh),c.LFG(Hi.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(cn.HU),c.LFG(p_,8),c.LFG(g_,8),c.LFG(m_,8),c.LFG(Xw,8),c.LFG(eE,8),c.LFG(tE,8),c.LFG(fl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();L(1389);class v_{constructor(){return(0,cn.vb)("auth")}}var et,lE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qs={},Ug=Ug||{},qt=lE||self;function Bf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function sh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var E_="closure_uid_"+(1e9*Math.random()>>>0),Bb=0;function $b(n,e,t){return n.call.apply(n.bind,arguments)}function jb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ni(n,e,t){return(Ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$b:jb).apply(null,arguments)}function Vg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ai(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[i].apply(r,l)}}function Zu(){this.s=this.s,this.o=this.o}Zu.prototype.s=!1,Zu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Vb(n){Object.prototype.hasOwnProperty.call(n,E_)&&n[E_]||(n[E_]=++Bb)}(this)},Zu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function I_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Bf(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function Pi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Pi.prototype.h=function(){this.defaultPrevented=!0};var zb=function(){if(!qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{qt.addEventListener("test",()=>{},e),qt.removeEventListener("test",()=>{},e)}catch{}return n}();function $f(n){return/^[\s\xa0]*$/.test(n)}function Bg(){var n=qt.navigator;return n&&(n=n.userAgent)?n:""}function ua(n){return-1!=Bg().indexOf(n)}function $g(n){return $g[" "](n),n}$g[" "]=function(){};var Hg,n,pE=ua("Opera"),gl=ua("Trident")||ua("MSIE"),C_=ua("Edge"),jg=C_||gl,D_=ua("Gecko")&&!(-1!=Bg().toLowerCase().indexOf("webkit")&&!ua("Edge"))&&!(ua("Trident")||ua("MSIE"))&&!ua("Edge"),gE=-1!=Bg().toLowerCase().indexOf("webkit")&&!ua("Edge");function b_(){var n=qt.document;return n?n.documentMode:void 0}e:{var zg="",Xa=(n=Bg(),D_?/rv:([^\);]+)(\)|;)/.exec(n):C_?/Edge\/([\d\.]+)/.exec(n):gl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gE?/WebKit\/(\S+)/.exec(n):pE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Xa&&(zg=Xa?Xa[1]:""),gl){var T_=b_();if(null!=T_&&T_>parseFloat(zg)){Hg=String(T_);break e}}Hg=zg}var D1=qt.document&&gl&&(b_()||parseInt(Hg,10))||void 0;function yl(n,e){if(Pi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(D_){e:{try{$g(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:b1[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yl.$.h.call(this)}}ai(yl,Pi);var b1={2:"touch",3:"pen",4:"mouse"};yl.prototype.h=function(){yl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var oh="closure_listenable_"+(1e6*Math.random()|0),mE=0;function T1(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++mE,this.fa=this.ia=!1}function Mt(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function A_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function yE(n){const e={};for(const t in n)e[t]=n[t];return e}const _l="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _E(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<_l.length;u++)t=_l[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vl(n){this.src=n,this.g={},this.h=0}function ah(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=dE(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Mt(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xn(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}vl.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Xn(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new T1(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var vE="closure_lm_"+(1e6*Math.random()|0),Gg={};function x_(n,e,t,r,i){if(r&&r.once)return M_(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)x_(n,e[u],t,r,i);return null}return t=P_(t),n&&n[oh]?n.O(e,t,sh(r)?!!r.capture:!!r,i):wE(n,e,t,!1,r,i)}function wE(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=sh(i)?!!i.capture:!!i,g=N_(n);if(g||(n[vE]=g=new vl(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function EE(){const e=qb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zb||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(IE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function M_(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)M_(n,e[u],t,r,i);return null}return t=P_(t),n&&n[oh]?n.P(e,t,sh(r)?!!r.capture:!!r,i):wE(n,e,t,!0,r,i)}function R_(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)R_(n,e[u],t,r,i);else r=sh(r)?!!r.capture:!!r,t=P_(t),n&&n[oh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xn(u=n.g[e],t,r,i))&&(Mt(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=N_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xn(e,t,r,i)),(t=-1<n?e[n]:null)&&qg(t))}function qg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[oh])ah(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(IE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=N_(e))?(ah(t,n),0==t.h&&(t.src=null,e[vE]=null)):Mt(n)}}}function IE(n){return n in Gg?Gg[n]:Gg[n]="on"+n}function qb(n,e){if(n.fa)n=!0;else{e=new yl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&qg(n),n=t.call(r,e)}return n}function N_(n){return(n=n[vE])instanceof vl?n:null}var wl="__closure_events_fn_"+(1e9*Math.random()>>>0);function P_(n){return"function"==typeof n?n:(n[wl]||(n[wl]=function(e){return n.handleEvent(e)}),n[wl])}function ui(){Zu.call(this),this.i=new vl(this),this.S=this,this.J=null}function vi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Pi(e,n);else if(e instanceof Pi)e.target=e.target||n;else{var i=e;_E(e=new Pi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=El(l,r,!0,e)&&i}if(i=El(l=e.g=n,r,!0,e)&&i,i=El(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=El(l=e.g=t[u],r,!1,e)&&i}function El(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&ah(n.i,l),i=!1!==g.call(_,r)&&i}}return i&&!r.defaultPrevented}ai(ui,Zu),ui.prototype[oh]=!0,ui.prototype.removeEventListener=function(n,e,t,r){R_(this,n,e,t,r)},ui.prototype.N=function(){if(ui.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mt(t[r]);delete n.g[e],n.h--}}this.J=null},ui.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ui.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Wg=qt.JSON.stringify;function DE(){var n=Zg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var uh=new class CE{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new jf,n=>n.reset());class jf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Zb(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Kb(n){qt.setTimeout(()=>{throw n},0)}let Hf,ch=!1,Zg=new class Wb{constructor(){this.h=this.g=null}add(e,t){const r=uh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},O_=()=>{const n=qt.Promise.resolve(void 0);Hf=()=>{n.then(Yb)}};var Yb=()=>{for(var n;n=DE();){try{n.h.call(n.g)}catch(t){Kb(t)}var e=uh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ch=!1};function zf(n,e){ui.call(this),this.h=n||1,this.g=e||qt,this.j=Ni(this.qb,this),this.l=Date.now()}function k_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function F_(n,e,t){if("function"==typeof n)t&&(n=Ni(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ni(n.handleEvent,n)}return 2147483647<Number(e)?-1:qt.setTimeout(n,e||0)}function Qb(n){n.g=F_(()=>{n.g=null,n.i&&(n.i=!1,Qb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ai(zf,ui),(et=zf.prototype).ga=!1,et.T=null,et.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vi(this,"tick"),this.ga&&(k_(this),this.start()))}},et.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.N=function(){zf.$.N.call(this),k_(this),delete this.g};class S1 extends Zu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qb(this)}N(){super.N(),this.g&&(qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kg(n){Zu.call(this),this.h=n,this.g={}}ai(Kg,Zu);var Jb=[];function L_(n,e,t,r){Array.isArray(t)||(t&&(Jb[0]=t.toString()),t=Jb);for(var i=0;i<t.length;i++){var u=x_(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Gf(n){A_(n.g,function(e,t){this.g.hasOwnProperty(t)&&qg(e)},n),n.g={}}function Yg(){this.g=!0}function ca(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return Wg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Kg.prototype.N=function(){Kg.$.N.call(this),Gf(this)},Kg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yg.prototype.Ea=function(){this.g=!1},Yg.prototype.info=function(){};var Il={},TE=null;function U_(){return TE=TE||new ui}function SE(n){Pi.call(this,Il.Ta,n)}function lh(n){const e=U_();vi(e,new SE(e))}function AE(n,e){Pi.call(this,Il.STAT_EVENT,n),this.stat=e}function zi(n){const e=U_();vi(e,new AE(e,n))}function dh(n,e){Pi.call(this,Il.Ua,n),this.size=e}function qf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return qt.setTimeout(function(){n()},e)}Il.Ta="serverreachability",ai(SE,Pi),Il.STAT_EVENT="statevent",ai(AE,Pi),Il.Ua="timingevent",ai(dh,Pi);var Wf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qg(){}function V_(){}Qg.prototype.h=null;var Jg,Zf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kf(){Pi.call(this,"d")}function B_(){Pi.call(this,"c")}function Yf(){}function Qf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Kg(this),this.P=nT,this.V=new zf(n=jg?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new RE}function RE(){this.i=null,this.g="",this.h=!1}ai(Kf,Pi),ai(B_,Pi),ai(Yf,Qg),Yf.prototype.g=function(){return new XMLHttpRequest},Yf.prototype.i=function(){return{}},Jg=new Yf;var nT=45e3,Jf={},Xg={};function em(n,e,t){n.L=1,n.v=im(Co(e)),n.s=t,n.S=!0,NE(n,null)}function NE(n,e){n.G=Date.now(),Xf(n),n.A=Co(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),j_(t.i,"t",r),n.C=0,t=n.l.J,n.h=new RE,n.g=rv(n.l,t?e:null,!n.s),0<n.O&&(n.M=new S1(Ni(n.Pa,n,n.g),n.O)),L_(n.U,n.g,"readystatechange",n.nb),e=n.I?yE(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),lh(),function Xb(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var T=D[0];D=D[1];var N=T.split("_");l=2<=N.length&&"type"==N[1]?l+(T+"=")+D+"&":l+(T+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function PE(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function OE(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=rT(n,t),i==Xg){4==e&&(n.o=4,zi(14),r=!1),ca(n.j,n.m,null,"[Incomplete Response]");break}if(i==Jf){n.o=4,zi(15),ca(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ca(n.j,n.m,i,null),nm(n,i)}PE(n)&&i!=Xg&&i!=Jf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),tv(e),e.M=!0,zi(11))):(ca(n.j,n.m,t,"[Invalid Chunked Response]"),Ku(n),ep(n))}function rT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xg:(t=Number(e.substring(t,r)),isNaN(t)?Jf:(r+=1)+t>e.length?Xg:(e=e.slice(r,r+t),n.C=r+t,e))}function Xf(n){n.Y=Date.now()+n.P,kE(n,n.P)}function kE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qf(Ni(n.lb,n),e)}function tm(n){n.B&&(qt.clearTimeout(n.B),n.B=null)}function ep(n){0==n.l.H||n.J||tI(n.l,n)}function Ku(n){tm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,k_(n.V),Gf(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function nm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||z_(t.i,n)))if(!n.K&&z_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Al(t),Ju(t)}ev(t),zi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=qf(Ni(t.ib,t),6e3));if(1>=GE(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Xu(t,11)}else if((n.K||t.g==n)&&Al(t),!$f(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let D=i[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const T=D[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const N=D[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const j=D[5];null!=j&&"number"==typeof j&&0<j&&(t.L=r=1.5*j,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const oe=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.i;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(G_(u,u.h),u.h=null))}if(r.F){const Ae=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(r.Da=Ae,Zn(r.I,r.F,Ae))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=am(r,r.J?r.pa:null,r.Y),l.K){q_(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(tm(g),Xf(g)),r.g=l}else eI(r);0<t.j.length&&fh(t)}else"stop"!=D[0]&&"close"!=D[0]||Xu(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Xu(t,7):X_(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}lh()}catch{}}function $_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function sT(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Bf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function iT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Bf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(et=Qf.prototype).setTimeout=function(n){this.P=n},et.nb=function(n){n=n.target;const e=this.M;e&&3==la(n)?e.l():this.Pa(n)},et.Pa=function(n){try{if(n==this.g)e:{const T=la(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||jg||this.g&&(this.h.h||this.g.ja()||KE(this.g)))){this.J||4!=T||7==e||lh(),tm(this);var t=this.g.da();this.ca=t;t:if(PE(this)){var r=KE(this.g);n="";var i=r.length,u=4==la(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ku(this),ep(this);var l="";break t}this.h.i=new qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function bE(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$f(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,zi(12),Ku(this),ep(this);break e}ca(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nm(this,t)}this.S?(OE(this,T,l),jg&&this.i&&3==T&&(L_(this.U,this.V,"tick",this.mb),this.V.start())):(ca(this.j,this.m,l,null),nm(this,l)),4==T&&Ku(this),this.i&&!this.J&&(4==T?tI(this.l,this):(this.i=!1,Xf(this)))}else(function M1(n){const e={};n=(n.g&&2<=la(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if($f(n[r]))continue;var t=Zb(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function Gb(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,zi(12)):(this.o=0,zi(13)),Ku(this),ep(this)}}}catch{}},et.mb=function(){if(this.g){var n=la(this.g),e=this.g.ja();this.C<e.length&&(tm(this),OE(this,n,e),this.i&&4!=n&&Xf(this))}},et.cancel=function(){this.J=!0,Ku(this)},et.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function eT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(lh(),zi(17)),Ku(this),this.o=2,ep(this)):kE(this,this.Y-n)};var FE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Cl){this.h=n.h,hh(this,n.j),this.s=n.s,this.g=n.g,tp(this,n.m),this.l=n.l;var e=n.i,t=new Tl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),rm(this,t),this.o=n.o}else n&&(e=String(n).match(FE))?(this.h=!1,hh(this,e[1]||"",!0),this.s=Dl(e[2]||""),this.g=Dl(e[3]||"",!0),tp(this,e[4]),this.l=Dl(e[5]||"",!0),rm(this,e[6]||"",!0),this.o=Dl(e[7]||"")):(this.h=!1,this.i=new Tl(null,this.h))}function Co(n){return new Cl(n)}function hh(n,e,t){n.j=t?Dl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function rm(n,e,t){e instanceof Tl?(n.i=e,function $E(n,e){e&&!n.j&&(Yu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(sm(this,r),j_(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=np(e,A1)),n.i=new Tl(e,n.h))}function Zn(n,e,t){n.i.set(e,t)}function im(n){return Zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function np(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,LE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function LE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Cl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(np(e,bl,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(np(e,bl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(np(t,"/"==t.charAt(0)?aT:UE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",np(t,VE)),n.join("")};var bl=/[#\/\?@]/g,UE=/[#\?:]/g,aT=/[#\?]/g,A1=/[#\?@]/g,VE=/#/g;function Tl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yu(n){n.g||(n.g=new Map,n.h=0,n.i&&function oT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function sm(n,e){Yu(n),e=Qu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function BE(n,e){return Yu(n),e=Qu(n,e),n.g.has(e)}function j_(n,e,t){sm(n,e),0<t.length&&(n.i=null,n.g.set(Qu(n,e),I_(t)),n.h+=t.length)}function Qu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function H_(n){this.l=n||HE,n=qt.PerformanceNavigationTiming?0<(n=qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(qt.g&&qt.g.Ka&&qt.g.Ka()&&qt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Tl.prototype).add=function(n,e){Yu(this),this.i=null,n=Qu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Yu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},et.ta=function(){Yu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},et.Z=function(n){Yu(this);let e=[];if("string"==typeof n)BE(this,n)&&(e=e.concat(this.g.get(Qu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},et.set=function(n,e){return Yu(this),this.i=null,BE(this,n=Qu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var HE=10;function zE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function GE(n){return n.h?1:n.g?n.g.size:0}function z_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function G_(n,e){n.g?n.g.add(e):n.h=e}function q_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function uT(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return I_(n.i)}H_.prototype.cancel=function(){if(this.i=uT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var qE=class{stringify(n){return qt.JSON.stringify(n,void 0)}parse(n){return qt.JSON.parse(n,void 0)}};function cT(){this.g=new qE}function lT(n,e,t){const r=t||"";try{$_(n,function(i,u){let l=i;sh(i)&&(l=Wg(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function om(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function rp(n){this.l=n.fc||null,this.j=n.ob||!1}function ip(n,e){ui.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=W_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ai(rp,Qg),rp.prototype.g=function(){return new ip(this.l,this.j)},rp.prototype.i=function(n){return function(){return n}}({}),ai(ip,ui);var W_=0;function WE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function sp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,op(n)}function op(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=ip.prototype).open=function(n,e){if(this.readyState!=W_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,op(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||qt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sp(this)),this.readyState=W_},et.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,op(this)),this.g&&(this.readyState=3,op(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},et.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sp(this):op(this),3==this.readyState&&WE(this)}},et.Za=function(n){this.g&&(this.response=this.responseText=n,sp(this))},et.Ya=function(n){this.g&&(this.response=n,sp(this))},et.ka=function(){this.g&&sp(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ip.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dT=qt.JSON.parse;function vr(n){ui.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ZE,this.L=this.M=!1}ai(vr,ui);var ZE="",hT=/^https?$/i,fT=["POST","PUT"];function Z_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,K_(n),up(n)}function K_(n){n.F||(n.F=!0,vi(n,"complete"),vi(n,"error"))}function Y_(n){if(n.h&&typeof Ug<"u"&&(!n.C[1]||4!=la(n)||2!=n.da()))if(n.v&&4==la(n))F_(n.La,0,n);else if(vi(n,"readystatechange"),4==la(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(FE)[1]||null;!i&&qt.self&&qt.self.location&&(i=qt.self.location.protocol.slice(0,-1)),r=!hT.test(i?i.toLowerCase():"")}t=r}if(t)vi(n,"complete"),vi(n,"success");else{n.m=6;try{var u=2<la(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",K_(n)}}finally{up(n)}}}function up(n,e){if(n.g){Q_(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||vi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Q_(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(qt.clearTimeout(n.A),n.A=null)}function la(n){return n.g?n.g.readyState:0}function KE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ZE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function YE(n){let e="";return A_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function J_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=YE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Zn(n,e,t))}function cp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function QE(n){this.Ga=0,this.j=[],this.l=new Yg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cp("baseRetryDelayMs",5e3,n),this.hb=cp("retryDelaySeedMs",1e4,n),this.eb=cp("forwardChannelMaxRetries",2,n),this.xa=cp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new H_(n&&n.concurrentRequestLimit),this.Ja=new cT,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function X_(n){if(JE(n),3==n.H){var e=n.W++,t=Co(n.I);if(Zn(t,"SID",n.K),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),Sl(n,t),(e=new Qf(n,n.l,e)).L=2,e.v=im(Co(t)),t=!1,qt.navigator&&qt.navigator.sendBeacon)try{t=qt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=rv(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Xf(e)}nv(n)}function Ju(n){n.g&&(tv(n),n.g.cancel(),n.g=null)}function JE(n){Ju(n),n.u&&(qt.clearTimeout(n.u),n.u=null),Al(n),n.i.cancel(),n.m&&("number"==typeof n.m&&qt.clearTimeout(n.m),n.m=null)}function fh(n){if(!zE(n.i)&&!n.m){n.m=!0;var e=n.Na;Hf||O_(),ch||(Hf(),ch=!0),Zg.add(e,n),n.C=0}}function XE(n,e){var t;t=e?e.m:n.W++;const r=Co(n.I);Zn(r,"SID",n.K),Zn(r,"RID",t),Zn(r,"AID",n.V),Sl(n,r),n.o&&n.s&&J_(r,n.o,n.s),t=new Qf(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ph(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),G_(n.i,t),em(t,r,e)}function Sl(n,e){n.na&&A_(n.na,function(t,r){Zn(e,r,t)}),n.h&&$_({},function(t,r){Zn(e,r,t)})}function ph(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ni(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=i[_].g;const T=i[_].map;if(D-=u,0>D)u=Math.max(0,i[_].g-100),g=!1;else try{lT(T,l,"req"+D+"_")}catch{r&&r(T)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function eI(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Hf||O_(),ch||(Hf(),ch=!0),Zg.add(e,n),n.A=0}}function ev(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=qf(Ni(n.Ma,n),nI(n,n.A)),n.A++,0))}function tv(n){null!=n.B&&(qt.clearTimeout(n.B),n.B=null)}function lp(n){n.g=new Qf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Co(n.wa);Zn(e,"RID","rpc"),Zn(e,"SID",n.K),Zn(e,"AID",n.V),Zn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Zn(e,"TO",n.qa),Zn(e,"TYPE","xmlhttp"),Sl(n,e),n.o&&n.s&&J_(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=im(Co(e)),t.s=null,t.S=!0,NE(t,n)}function Al(n){null!=n.v&&(qt.clearTimeout(n.v),n.v=null)}function tI(n,e){var t=null;if(n.g==e){Al(n),tv(n),n.g=null;var r=2}else{if(!z_(n.i,e))return;t=e.F,q_(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;vi(r=U_(),new dh(r,t)),fh(n)}else eI(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function da(n,e){return!(GE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=qf(Ni(n.Na,n,e),nI(n,n.C)),n.C++,0)))}(n,e)||2==r&&ev(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Xu(n,5);break;case 4:Xu(n,10);break;case 3:Xu(n,6);break;default:Xu(n,2)}}function nI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Xu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ni(n.pb,n);t||(t=new Cl("//www.google.com/images/cleardot.gif"),qt.location&&"http"==qt.location.protocol||hh(t,"https"),im(t)),function x1(n,e){const t=new Yg;if(qt.Image){const r=new Image;r.onload=Vg(om,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Vg(om,t,r,"TestLoadImage: error",!1,e),r.onabort=Vg(om,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vg(om,t,r,"TestLoadImage: timeout",!1,e),qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zi(2);n.H=0,n.h&&n.h.za(e),nv(n),JE(n)}function nv(n){if(n.H=0,n.ma=[],n.h){const e=uT(n.i);(0!=e.length||0!=n.j.length)&&(hE(n.ma,e),hE(n.ma,n.j),n.i.i.length=0,I_(n.j),n.j.length=0),n.h.ya()}}function am(n,e,t){var r=t instanceof Cl?Co(t):new Cl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),tp(r,r.m);else{var i=qt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Cl(null);r&&hh(u,r),e&&(u.g=e),i&&tp(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Zn(r,t,e),Zn(r,"VER",n.ra),Sl(n,r),r}function rv(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t&&n.Ha&&!n.va?new rp({ob:!0}):n.va)).Oa(n.J),e}function um(){}function gh(){if(gl&&!(10<=Number(D1)))throw Error("Environmental error: no available transport.")}function Ji(n,e){ui.call(this),this.g=new QE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!$f(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$f(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new mh(this)}function cm(n){Kf.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function lm(){B_.call(this),this.status=1}function mh(n){this.g=n}function Do(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function iv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=u+((l=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function Dn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(et=vr.prototype).Oa=function(n){this.M=n},et.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Jg.g(),this.C=function ME(n){return n.h||(n.h=n.i())}(this.u?this.u:Jg),this.g.onreadystatechange=Ni(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Z_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=qt.FormData&&n instanceof qt.FormData,!(0<=dE(fT,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Q_(this),0<this.B&&((this.L=function ap(n){return gl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ni(this.ua,this)):this.A=F_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Z_(this,u)}},et.ua=function(){typeof Ug<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vi(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vi(this,"complete"),vi(this,"abort"),up(this))},et.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),up(this,!0)),vr.$.N.call(this)},et.La=function(){this.s||(this.G||this.v||this.l?Y_(this):this.kb())},et.kb=function(){Y_(this)},et.isActive=function(){return!!this.g},et.da=function(){try{return 2<la(this)?this.g.status:-1}catch{return-1}},et.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},et.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dT(e)}},et.Ia=function(){return this.m},et.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=QE.prototype).ra=8,et.H=1,et.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Qf(this,this.l,n);let u=this.s;if(this.U&&(u?(u=yE(u),_E(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ph(this,i,e),Zn(t=Co(this.I),"RID",n),Zn(t,"CVER",22),this.F&&Zn(t,"X-HTTP-Session-Id",this.F),Sl(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(YE(u)))+"&"+e:this.o&&J_(t,this.o,u)),G_(this.i,i),this.bb&&Zn(t,"TYPE","init"),this.P?(Zn(t,"$req",e),Zn(t,"SID","null"),i.aa=!0,em(i,t,null)):em(i,t,e),this.H=2}}else 3==this.H&&(n?XE(this,n):0==this.j.length||zE(this.i)||XE(this))},et.Ma=function(){if(this.u=null,lp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=qf(Ni(this.jb,this),n)}},et.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zi(10),Ju(this),lp(this))},et.ib=function(){null!=this.v&&(this.v=null,Ju(this),ev(this),zi(19))},et.pb=function(n){n?(this.l.info("Successfully pinged google.com"),zi(2)):(this.l.info("Failed to ping google.com"),zi(1))},et.isActive=function(){return!!this.h&&this.h.isActive(this)},(et=um.prototype).Ba=function(){},et.Aa=function(){},et.za=function(){},et.ya=function(){},et.isActive=function(){return!0},et.Va=function(){},gh.prototype.g=function(n,e){return new Ji(n,e)},ai(Ji,ui),Ji.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;zi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=am(n,null,n.Y),fh(n)},Ji.prototype.close=function(){X_(this.g)},Ji.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Wg(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&fh(e)},Ji.prototype.N=function(){this.g.h=null,delete this.j,X_(this.g),delete this.g,Ji.$.N.call(this)},ai(cm,Kf),ai(lm,B_),ai(mh,um),mh.prototype.Ba=function(){vi(this.g,"a")},mh.prototype.Aa=function(n){vi(this.g,new cm(n))},mh.prototype.za=function(n){vi(this.g,new lm)},mh.prototype.ya=function(){vi(this.g,"b")},ai(Do,function pT(){this.blockSize=-1}),Do.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Do.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)iv(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){iv(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){iv(this,r),i=0;break}}this.h=i,this.i+=e},Do.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var sv={};function dm(n){return-128<=n&&128>n?function fE(n,e){var t=sv;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Dn([0|e],0>e?-1:0)}):new Dn([0|n],0>n?-1:0)}function ha(n){if(isNaN(n)||!isFinite(n))return yh;if(0>n)return wi(ha(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=hm;return new Dn(e,0)}var hm=4294967296,yh=dm(0),fm=dm(1),av=dm(16777216);function eu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function gs(n){return-1==n.h}function wi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Dn(t,~n.h).add(fm)}function ci(n,e){return n.add(wi(e))}function tu(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function dp(n,e){this.g=n,this.h=e}function pm(n,e){if(eu(e))throw Error("division by zero");if(eu(n))return new dp(yh,yh);if(gs(n))return e=pm(wi(n),e),new dp(wi(e.g),wi(e.h));if(gs(e))return e=pm(n,wi(e)),new dp(wi(e.g),e.h);if(30<n.g.length){if(gs(n)||gs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=fm,r=e;0>=r.X(n);)t=gT(t),r=gT(r);var i=hp(t,1),u=hp(r,1);for(r=hp(r,2),t=hp(t,2);!eu(r);){var l=u.add(r);0>=l.X(n)&&(i=i.add(t),u=l),r=hp(r,1),t=hp(t,1)}return e=ci(n,i.R(e)),new dp(i,e)}for(i=yh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=ha(t)).R(e);gs(l)||0<l.X(n);)l=(u=ha(t-=r)).R(e);eu(u)&&(u=fm),i=i.add(u),n=ci(n,l)}return new dp(i,n)}function gT(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Dn(t,n.h)}function hp(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Dn(i,n.h)}(et=Dn.prototype).ea=function(){if(gs(this))return-wi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:hm+r)*e,e*=hm}return n},et.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(eu(this))return"0";if(gs(this))return"-"+wi(this).toString(n);for(var e=ha(Math.pow(n,6)),t=this,r="";;){var i=pm(t,e).g,u=((0<(t=ci(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(eu(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},et.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},et.X=function(n){return gs(n=ci(this,n))?-1:eu(n)?0:1},et.abs=function(){return gs(this)?wi(this):this},et.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),l=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(u&=65535)}return new Dn(t,-2147483648&t[t.length-1]?-1:0)},et.R=function(n){if(eu(this)||eu(n))return yh;if(gs(this))return gs(n)?wi(this).R(wi(n)):wi(wi(this).R(n));if(gs(n))return wi(this.R(wi(n)));if(0>this.X(av)&&0>n.X(av))return ha(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=l*_,tu(t,2*r+2*i),t[2*r+2*i+1]+=u*_,tu(t,2*r+2*i+1),t[2*r+2*i+1]+=l*g,tu(t,2*r+2*i+1),t[2*r+2*i+2]+=u*g,tu(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Dn(t,0)},et.gb=function(n){return pm(this,n).h},et.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Dn(t,this.h&n.h)},et.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Dn(t,this.h|n.h)},et.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Dn(t,this.h^n.h)},gh.prototype.createWebChannel=gh.prototype.g,Ji.prototype.send=Ji.prototype.u,Ji.prototype.open=Ji.prototype.m,Ji.prototype.close=Ji.prototype.close,Wf.NO_ERROR=0,Wf.TIMEOUT=8,Wf.HTTP_ERROR=6,xE.COMPLETE="complete",V_.EventType=Zf,Zf.OPEN="a",Zf.CLOSE="b",Zf.ERROR="c",Zf.MESSAGE="d",ui.prototype.listen=ui.prototype.O,vr.prototype.listenOnce=vr.prototype.P,vr.prototype.getLastError=vr.prototype.Sa,vr.prototype.getLastErrorCode=vr.prototype.Ia,vr.prototype.getStatus=vr.prototype.da,vr.prototype.getResponseJson=vr.prototype.Wa,vr.prototype.getResponseText=vr.prototype.ja,vr.prototype.send=vr.prototype.ha,vr.prototype.setWithCredentials=vr.prototype.Oa,Do.prototype.digest=Do.prototype.l,Do.prototype.reset=Do.prototype.reset,Do.prototype.update=Do.prototype.j,Dn.prototype.add=Dn.prototype.add,Dn.prototype.multiply=Dn.prototype.R,Dn.prototype.modulo=Dn.prototype.gb,Dn.prototype.compare=Dn.prototype.X,Dn.prototype.toNumber=Dn.prototype.ea,Dn.prototype.toString=Dn.prototype.toString,Dn.prototype.getBits=Dn.prototype.D,Dn.fromNumber=ha,Dn.fromString=function ov(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return wi(ov(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ha(Math.pow(e,8)),r=yh,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+u),e);8>u?(u=ha(Math.pow(e,u)),r=r.R(u).add(ha(l))):r=(r=r.R(t)).add(ha(l))}return r};var rI=qs.createWebChannelTransport=function(){return new gh},uv=qs.getStatEventTarget=function(){return U_()},xl=qs.ErrorCode=Wf,mT=qs.EventType=xE,cv=qs.Event=Il,iI=qs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},sI=qs.FetchXmlHttpFactory=rp,gm=qs.WebChannel=V_,yT=qs.XhrIo=vr,_T=qs.Md5=Do,ec=qs.Integer=Dn;const lv="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let nu="9.22.1";const fa=new Gu.Yd("@firebase/firestore");function oI(){return fa.logLevel}function Ue(n,...e){if(fa.logLevel<=Gu.in.DEBUG){const t=e.map(dv);fa.debug(`Firestore (${nu}): ${n}`,...t)}}function wr(n,...e){if(fa.logLevel<=Gu.in.ERROR){const t=e.map(dv);fa.error(`Firestore (${nu}): ${n}`,...t)}}function Ei(n,...e){if(fa.logLevel<=Gu.in.WARN){const t=e.map(dv);fa.warn(`Firestore (${nu}): ${n}`,...t)}}function dv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function wt(n,e){n||at()}function Je(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends en.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class uI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class lI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vT{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=D=>this.i!==i?(i=this.i,t(D)):Promise.resolve();let l=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Kr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=l;e.enqueueRetryable((0,le.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Kr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new uI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Zr(e)}}class dI{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class hI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new dI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wT{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new fI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function IT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class hv{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=IT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Ml(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function fv(n){return n+"\0"}class er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return er.fromMillis(Date.now())}static fromDate(e){return er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new er(0,0))}static max(){return new Dt(new er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mm{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gn extends mm{construct(e,t,r){return new gn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new gn(t)}static emptyPath(){return new gn([])}}const N1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends mm{construct(e,t,r){return new xr(e,t,r)}static isValidIdentifier(e){return N1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Se(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new Se(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Se(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===g?(l=!l,i++):"."!==g||l?(r+=g,i++):(u(),i++)}if(u(),l)throw new Se(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(t)}static emptyPath(){return new xr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(gn.fromString(e))}static fromName(e){return new Ke(gn.fromString(e).popFirst(5))}static empty(){return new Ke(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new gn(e.slice()))}}class pv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function pI(n){return n.fields.find(e=>2===e.kind)}function _h(n){return n.fields.filter(e=>2!==e.kind)}pv.UNKNOWN_ID=-1;class gv{constructor(e,t){this.fieldPath=e,this.kind=t}}class _m{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _m(0,Xi.min())}}function mv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new er(t+1,0):new er(t,r));return new Xi(i,Ke.empty(),e)}function fp(n){return new Xi(n.readTime,n.key,-1)}class Xi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xi(Dt.min(),Ke.empty(),-1)}static max(){return new Xi(Dt.max(),Ke.empty(),-1)}}function vm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}const CT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ru(n){return yv.apply(this,arguments)}function yv(){return yv=(0,le.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==CT)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),yv.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,u=0,l=!1;e.forEach(g=>{++i,g.next(()=>{++u,l&&u===i&&t()},_=>r(_))}),l=!0,u===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(T=>{l[D]=T,++g,g===u&&r(l)},T=>i(T))}})}static doWhile(e,t){return new ne((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class _v{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Kr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new tc(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=vv(r.target.error);this.v.reject(new tc(e,i))}}static open(e,t,r,i){try{return new _v(t,e.transaction(i,r))}catch(u){throw new tc(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new O1(t)}}class bo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===bo.S((0,en.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),vh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,en.hl)())return!1;if(bo.C())return!0;const e=(0,en.z$)(),t=bo.S(e),r=0<t&&t<10,i=bo.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,le.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new tc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;i("VersionError"===g.name?new Se(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Se(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new tc(e,g))},u.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,le.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=_v.open(u.db,e,l?"readonly":"readwrite",r),D=i(_).next(T=>(_.P(),T)).catch(T=>(_.abort(T),ne.reject(T))).toPromise();return D.catch(()=>{}),yield _.R,D}catch(_){const D=_,T="FirebaseError"!==D.name&&g<3;if(Ue("SimpleDb","Transaction failed with error:",D.message,"Retrying:",T),u.close(),!T)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class DT{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return vh(this.L.delete())}}class tc extends Se{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nc(n){return"IndexedDbTransactionError"===n.name}class O1{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vh(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),vh(this.store.add(e))}get(e){return vh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),vh(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),vh(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(l,g)=>{u.push(g)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ne((u,l)=>{i.onerror=g=>{l(g.target.error)},i.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=u=>{const l=vv(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void i();const _=new DT(g),D=t(g.primaryKey,g.value,_);if(D instanceof ne){const T=D.catch(N=>(_.done(),ne.reject(N)));r.push(T)}_.isDone?i():null===_.K?g.continue():g.continue(_.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vh(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=vv(r.target.error);t(i)}})}let bT=!1;function vv(n){const e=bo.S((0,en.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bT||(bT=!0,setTimeout(()=>{throw r},0)),r}}return n}class TT{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){nc(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ru(r)}yield t.et(6e4)}))}}class ST{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return ne.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(g=>{i-=g,r.add(l)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,u)).next(g=>(Ue("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=fp(u);vm(l,r)>0&&(r=l)}),new Xi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ws=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function pp(n){return null==n}function wh(n){return 0===n&&1/n==-1/0}function wv(n){return"number"==typeof n&&Number.isInteger(n)&&!wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gI(e)),e=To(n.get(t),e);return gI(e)}function To(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function gI(n){return n+"\x01\x01"}function Zs(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),gn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&at(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===i.length?_=g:(i+=g,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:at()}u=l+2}return new gn(r)}const mI=["userId","batchId"];function Ev(n,e){return[n,Gi(e)]}function ms(n,e,t){return[n,Gi(e),t]}const AT={},Iv=["prefixPath","collectionGroup","readTime","documentId"],xT=["prefixPath","collectionGroup","documentId"],MT=["collectionGroup","readTime","prefixPath","documentId"],Cv=["canonicalId","targetId"],yI=["targetId","path"],_I=["path","targetId"],RT=["collectionId","parent"],vI=["indexId","uid"],wI=["uid","sequenceNumber"],NT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EI=["indexId","uid","orderedDocumentKey"],PT=["userId","collectionPath","documentId"],Dv=["userId","collectionPath","largestBatchId"],iu=["userId","collectionGroup","largestBatchId"],su=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],II=[...su,"documentOverlays"],Em=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bv=Em,OT=[...bv,"indexConfiguration","indexState","indexEntries"];class CI extends wm{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function li(n,e){const t=Je(n);return bo.M(t.ht,e)}function DI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||di.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,di.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tv(this.root,e,this.comparator,!0)}}class Tv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class di{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??di.RED,this.left=i??di.EMPTY,this.right=u??di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new di(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}di.EMPTY=null,di.RED=!0,di.BLACK=!1,di.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sv(this.data.getIterator())}getIteratorFrom(e){return new Sv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class Sv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gp(n){return n.hasNext()?n.getNext():void 0}class Oi{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new Kn(xr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Av extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Av("Invalid base64 string: "+i):i}}(e);return new Br(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const SI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ou(n){if(wt(!!n),"string"==typeof n){let e=0;const t=SI.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ks(n){return"string"==typeof n?Br.fromBase64String(n):Br.fromUint8Array(n)}function mp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Im(n){const e=n.mapValue.fields.__previous_value__;return mp(e)?Im(e):e}function yp(n){const e=ou(n.mapValue.fields.__local_write_time__.timestampValue);return new er(e.seconds,e.nanos)}class k1{constructor(e,t,r,i,u,l,g,_,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=D}}class Rl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Rl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Rl&&e.projectId===this.projectId&&e.database===this.database}}const Nl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_p={nullValue:"NULL_VALUE"};function ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mp(n)?4:Cm(n)?9007199254740991:10:at()}function pa(n,e){if(n===e)return!0;const t=ic(n);if(t!==ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yp(n).isEqual(yp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=ou(r.timestampValue),l=ou(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ks(n.bytesValue).isEqual(Ks(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Yn(r.geoPointValue.latitude)===Yn(i.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Yn(r.integerValue)===Yn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Yn(r.doubleValue),l=Yn(i.doubleValue);return u===l?wh(u)===wh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Ml(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(DI(u)!==DI(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!pa(u[g],l[g])))return!1;return!0}(n,e);default:return at()}var i}function vp(n,e){return void 0!==(n.values||[]).find(t=>pa(t,e))}function Pl(n,e){if(n===e)return 0;const t=ic(n),r=ic(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=Yn(i.integerValue||i.doubleValue),g=Yn(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return kT(n.timestampValue,e.timestampValue);case 4:return kT(yp(n),yp(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Ks(i),g=Ks(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const D=Ht(l[_],g[_]);if(0!==D)return D}return Ht(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Ht(Yn(i.latitude),Yn(u.latitude));return 0!==l?l:Ht(Yn(i.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const D=Pl(l[_],g[_]);if(D)return D}return Ht(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Nl.mapValue&&u===Nl.mapValue)return 0;if(i===Nl.mapValue)return 1;if(u===Nl.mapValue)return-1;const l=i.fields||{},g=Object.keys(l),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let T=0;T<g.length&&T<D.length;++T){const N=Ht(g[T],D[T]);if(0!==N)return N;const j=Pl(l[g[T]],_[D[T]]);if(0!==j)return j}return Ht(g.length,D.length)}(n.mapValue,e.mapValue);default:throw at()}}function kT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=ou(n),r=ou(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function wp(n){return AI(n)}function AI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ou(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ks(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=AI(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of i)l?l=!1:u+=",",u+=`${g}:${AI(r.fields[g])}`;return u+"}"}(n.mapValue):at();var e}function Ol(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Eh(n){return!!n&&"integerValue"in n}function Ep(n){return!!n&&"arrayValue"in n}function xI(n){return!!n&&"nullValue"in n}function Mv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ga(n){return!!n&&"mapValue"in n}function Ih(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ih(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ih(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Cm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rv(n){return"nullValue"in n?_p:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ol(Rl.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function FT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ol(Rl.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Nl:at()}function Dm(n,e){const t=Pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bm(n,e){const t=Pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ga(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ih(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=g.popLast()}l?r[g.lastSegment()]=Ih(l):i.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());ga(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ga(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){rc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new $r(Ih(this.value))}}function LT(n){const e=[];return rc(n.fields,(t,r)=>{const i=new xr([t]);if(ga(r)){const u=LT(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new Oi(e)}class tr{constructor(e,t,r,i,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new tr(e,0,Dt.min(),Dt.min(),Dt.min(),$r.empty(),0)}static newFoundDocument(e,t,r,i){return new tr(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new tr(e,2,t,Dt.min(),Dt.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,Dt.min(),Dt.min(),$r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kl{constructor(e,t){this.position=e,this.inclusive=t}}function UT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):Pl(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Nv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}class Ch{constructor(e,t="asc"){this.field=e,this.dir=t}}function VT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class MI{}class dn extends MI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new kv(e,t,r):"array-contains"===t?new F1(e,r):"in"===t?new NI(e,r):"not-in"===t?new zT(e,r):"array-contains-any"===t?new GT(e,r):new dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new $T(e,r):new jT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Pl(t,this.value)):null!==t&&ic(this.value)===ic(t)&&this.matchesComparison(Pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bn extends MI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new bn(e,t)}matches(e){return Fl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Fl(n){return"and"===n.op}function Tm(n){return"or"===n.op}function Pv(n){return RI(n)&&Fl(n)}function RI(n){for(const e of n.filters)if(e instanceof bn)return!1;return!0}function Sm(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+wp(n.value);if(Pv(n))return n.filters.map(e=>Sm(e)).join(",");{const e=n.filters.map(t=>Sm(t)).join(",");return`${n.op}(${e})`}}function Am(n,e){return n instanceof dn?(t=n,(r=e)instanceof dn&&t.op===r.op&&t.field.isEqual(r.field)&&pa(t.value,r.value)):n instanceof bn?function(t,r){return r instanceof bn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,l)=>i&&Am(u,r.filters[l]),!0)}(n,e):void at();var t,r}function BT(n,e){const t=n.filters.concat(e);return bn.create(t,n.op)}function Ov(n){return n instanceof dn?`${(e=n).field.canonicalString()} ${e.op} ${wp(e.value)}`:n instanceof bn?function(e){return e.op.toString()+" {"+e.getFilters().map(Ov).join(" ,")+"}"}(n):"Filter";var e}class kv extends dn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class $T extends dn{constructor(e,t){super(e,"in",t),this.keys=HT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jT extends dn{constructor(e,t){super(e,"not-in",t),this.keys=HT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class F1 extends dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ep(t)&&vp(t.arrayValue,this.value)}}class NI extends dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vp(this.value.arrayValue,t)}}class zT extends dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(vp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vp(this.value.arrayValue,t)}}class GT extends dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vp(this.value.arrayValue,r))}}class L1{constructor(e,t=null,r=[],i=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function PI(n,e=null,t=[],r=[],i=null,u=null,l=null){return new L1(n,e,t,r,i,u,l)}function Dh(n){const e=Je(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),pp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wp(r)).join(",")),e.dt=t}return e.dt}function xm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Am(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nv(n.startAt,e.startAt)&&Nv(n.endAt,e.endAt)}function Mm(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Fv(n,e){return n.filters.filter(t=>t instanceof dn&&t.field.isEqual(e))}function qT(n,e,t){let r=_p,i=!0;for(const u of Fv(n,e)){let l=_p,g=!0;switch(u.op){case"<":case"<=":l=Rv(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=_p}Dm({value:r,inclusive:i},{value:l,inclusive:g})<0&&(r=l,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Dm({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function WT(n,e,t){let r=Nl,i=!0;for(const u of Fv(n,e)){let l=Nl,g=!0;switch(u.op){case">=":case">":l=FT(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Nl}bm({value:r,inclusive:i},{value:l,inclusive:g})>0&&(r=l,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];bm({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class sc{constructor(e,t=null,r=[],i=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function ZT(n,e,t,r,i,u,l,g){return new sc(n,e,t,r,i,u,l,g)}function Ip(n){return new sc(n)}function s(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function o(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function a(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function d(n){return null!==n.collectionGroup}function h(n){const e=Je(n);if(null===e.wt){e.wt=[];const t=a(e),r=o(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Ch(t)),e.wt.push(new Ch(xr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ch(xr.keyField(),u))}}}return e.wt}function p(n){const e=Je(n);if(!e._t)if("F"===e.limitType)e._t=PI(e.path,e.collectionGroup,h(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of h(e))t.push(new Ch(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new kl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new kl(e.startAt.position,e.startAt.inclusive):null;e._t=PI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function y(n,e){e.getFirstInequalityField(),a(n);const t=n.filters.concat([e]);return new sc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function I(n,e,t){return new sc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function b(n,e){return xm(p(n),p(e))&&n.limitType===e.limitType}function S(n){return`${Dh(p(n))}|lt:${n.limitType}`}function M(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Ov(r)).join(", ")}]`),pp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wp(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wp(r)).join(",")),`Target(${t})`}(p(n))}; limitType=${n.limitType})`}function V(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of h(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const g=UT(i,u,l);return i.inclusive?g<=0:g<0}(t.startAt,h(t),r)||t.endAt&&!function(i,u,l){const g=UT(i,u,l);return i.inclusive?g>=0:g>0}(t.endAt,h(t),r)));var t,r}function Z(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function X(n){return(e,t)=>{let r=!1;for(const i of h(n)){const u=we(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function we(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,u,l){const g=u.data.field(i),_=l.data.field(i);return null!==g&&null!==_?Pl(g,_):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}class Ve{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return bI(this.inner)}size(){return this.innerSize}}const Xe=new Pn(Ke.comparator);function Ye(){return Xe}const kt=new Pn(Ke.comparator);function Ne(...n){let e=kt;for(const t of n)e=e.insert(t.key,t);return e}function Wt(n){let e=kt;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yn(){return Rm()}function Er(){return Rm()}function Rm(){return new Ve(n=>n.toString(),(n,e)=>n.isEqual(e))}const wO=new Pn(Ke.comparator),EO=new Kn(Ke.comparator);function on(...n){let e=EO;for(const t of n)e=e.add(t);return e}const IO=new Kn(Ht);function KT(){return IO}function U1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function V1(n){return{integerValue:""+n}}function B1(n,e){return wv(e)?V1(e):U1(n,e)}class OI{constructor(){this._=void 0}}function CO(n,e,t){return n instanceof Nm?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&mp(i)&&(i=Im(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Cp?j1(n,e):n instanceof Dp?H1(n,e):function(r,i){const u=$1(r,i),l=z1(u)+z1(r.gt);return Eh(u)&&Eh(r.gt)?V1(l):U1(r.serializer,l)}(n,e)}function DO(n,e,t){return n instanceof Cp?j1(n,e):n instanceof Dp?H1(n,e):t}function $1(n,e){return n instanceof Pm?Eh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Nm extends OI{}class Cp extends OI{constructor(e){super(),this.elements=e}}function j1(n,e){const t=G1(e);for(const r of n.elements)t.some(i=>pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Dp extends OI{constructor(e){super(),this.elements=e}}function H1(n,e){let t=G1(e);for(const r of n.elements)t=t.filter(i=>!pa(i,r));return{arrayValue:{values:t}}}class Pm extends OI{constructor(e,t){super(),this.serializer=e,this.gt=t}}function z1(n){return Yn(n.integerValue||n.doubleValue)}function G1(n){return Ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Lv{constructor(e,t){this.field=e,this.transform=t}}class TO{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class FI{}function q1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new km(n.key,Ir.none()):new Om(n.key,n.data,Ir.none());{const t=n.data,r=$r.empty();let i=new Kn(xr.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new Ll(n.key,r,new Oi(i.toArray()),Ir.none())}}function SO(n,e,t){n instanceof Om?function(r,i,u){const l=r.value.clone(),g=K1(r.fieldTransforms,i,u.transformResults);l.setAll(g),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ll?function(r,i,u){if(!kI(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=K1(r.fieldTransforms,i,u.transformResults),g=i.data;g.setAll(Z1(r)),g.setAll(l),i.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Uv(n,e,t,r){return n instanceof Om?function(i,u,l,g){if(!kI(i.precondition,u))return l;const _=i.value.clone(),D=Y1(i.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ll?function(i,u,l,g){if(!kI(i.precondition,u))return l;const _=Y1(i.fieldTransforms,g,u),D=u.data;return D.setAll(Z1(i)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,kI(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function AO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=$1(r.transform,i||null);null!=u&&(null===t&&(t=$r.empty()),t.set(r.field,u))}return t||null}function W1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ml(t,r,(i,u)=>function bO(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cp&&r instanceof Cp||t instanceof Dp&&r instanceof Dp?Ml(t.elements,r.elements,pa):t instanceof Pm&&r instanceof Pm?pa(t.gt,r.gt):t instanceof Nm&&r instanceof Nm);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Om extends FI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ll extends FI{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Z1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function K1(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,g=e.data.field(u.field);r.set(u.field,DO(l,g,t[i]))}return r}function Y1(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,CO(u,l,e))}return r}class km extends FI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YT extends FI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&SO(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Uv(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Uv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Er();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(i.key)?null:g;const _=q1(l,g);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,(t,r)=>W1(t,r))&&Ml(this.baseMutations,e.baseMutations,(t,r)=>W1(t,r))}}class JT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=wO;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new JT(e,t,r,i)}}class XT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class MO{constructor(e,t){this.count=e,this.unchangedNames=t}}var hi,vn;function Q1(n){switch(n){default:return at();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function J1(n){if(void 0===n)return wr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case hi.OK:return ue.OK;case hi.CANCELLED:return ue.CANCELLED;case hi.UNKNOWN:return ue.UNKNOWN;case hi.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case hi.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case hi.INTERNAL:return ue.INTERNAL;case hi.UNAVAILABLE:return ue.UNAVAILABLE;case hi.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case hi.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case hi.NOT_FOUND:return ue.NOT_FOUND;case hi.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case hi.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case hi.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case hi.ABORTED:return ue.ABORTED;case hi.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case hi.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case hi.DATA_LOSS:return ue.DATA_LOSS;default:return at()}}(vn=hi||(hi={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class eS{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return LI}static getOrCreateInstance(){return null===LI&&(LI=new eS),LI}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let LI=null;function X1(){return new TextEncoder}const RO=new ec([4294967295,4294967295],0);function eM(n){const e=X1().encode(n),t=new _T;return t.update(e),new Uint8Array(t.digest())}function tM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ec([t,r],0),new ec([i,u],0)]}class tS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vv(`Invalid padding: ${t}`);if(r<0)throw new Vv(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Vv(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Vv(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ec.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(ec.fromNumber(r)));return 1===i.compare(RO)&&(i=new ec([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=eM(e),[r,i]=tM(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,i,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new tS(u,i,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=eM(e),[r,i]=tM(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,i,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Vv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bv{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,$v.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Bv(Dt.min(),i,new Pn(Ht),Ye(),on())}}class $v{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $v(r,t,on(),on(),on())}}class UI{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class nM{constructor(e,t){this.targetId=e,this.Vt=t}}class rM{constructor(e,t,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iM{constructor(){this.St=0,this.Dt=oM(),this.Ct=Br.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=on(),t=on(),r=on();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new $v(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=oM()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class NO{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ye(),this.zt=sM(),this.Wt=new Pn(Ht)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Mm(l))if(0===i){const g=new Ke(l.path);this.Yt(r,g,tr.newNoDocument(g,Dt.min()))}else wt(1===i);else{const g=this.ie(r);if(g!==i){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=eS.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,T,N){var j,Q,oe,Ae,Ee,gt;const yt={localCacheCount:T,existenceFilterCount:N.count},rt=N.unchangedNames;return rt&&(yt.bloomFilter={applied:0===D,hashCount:null!==(j=rt?.hashCount)&&void 0!==j?j:0,bitmapLength:null!==(Ae=null===(oe=null===(Q=rt?.bits)||void 0===Q?void 0:Q.bitmap)||void 0===oe?void 0:oe.length)&&void 0!==Ae?Ae:0,padding:null!==(gt=null===(Ee=rt?.bits)||void 0===Ee?void 0:Ee.padding)&&void 0!==gt?gt:0}),yt}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,D;try{_=Ks(u).toUint8Array()}catch(T){if(T instanceof Av)return Ei("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{D=new tS(_,l,g)}catch(T){return Ei(T instanceof Vv?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===D.It?1:i!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&Mm(g.target)){const _=new Ke(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,tr.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=on();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const D=this.se(_);return!D||"TargetPurposeLimboResolution"===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const i=new Bv(e,t,this.Wt,this.jt,r);return this.jt=Ye(),this.zt=sM(),this.Wt=new Pn(Ht),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new iM,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Kn(Ht),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new iM),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function sM(){return new Pn(Ke.comparator)}function oM(){return new Pn(Ke.comparator)}const PO={asc:"ASCENDING",desc:"DESCENDING"},OO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kO={and:"AND",or:"OR"};class FO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nS(n,e){return n.useProto3Json||pp(e)?e:{value:e}}function Fm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LO(n,e){return Fm(n,e.toTimestamp())}function Yr(n){return wt(!!n),Dt.fromTimestamp(function(e){const t=ou(e);return new er(t.seconds,t.nanos)}(n))}function rS(n,e){return(t=n,new gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function uM(n){const e=gn.fromString(n);return wt(yM(e)),e}function jv(n,e){return rS(n.databaseId,e.path)}function oc(n,e){const t=uM(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(lM(t))}function iS(n,e){return rS(n.databaseId,e)}function cM(n){const e=uM(n);return 4===e.length?gn.emptyPath():lM(e)}function Hv(n){return new gn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lM(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function dM(n,e,t){return{name:jv(n,e),fields:t.value.mapValue.fields}}function hM(n,e,t){const r=oc(n,e.name),i=Yr(e.updateTime),u=e.createTime?Yr(e.createTime):Dt.min(),l=new $r({mapValue:{fields:e.fields}}),g=tr.newFoundDocument(r,i,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function zv(n,e){let t;if(e instanceof Om)t={update:dM(n,e.key,e.value)};else if(e instanceof km)t={delete:jv(n,e.key)};else if(e instanceof Ll)t={update:dM(n,e.key,e.data),updateMask:GO(e.fieldMask)};else{if(!(e instanceof YT))return at();t={verify:jv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof Nm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Dp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pm)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:LO(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function sS(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ir.updateTime(Yr(i.updateTime)):void 0!==i.exists?Ir.exists(i.exists):Ir.none():Ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let g=null;"setToServerValue"in l?(wt("REQUEST_TIME"===l.setToServerValue),g=new Nm):"appendMissingElements"in l?g=new Cp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Dp(l.removeAllFromArray.values||[]):"increment"in l?g=new Pm(u,l.increment):at();const _=xr.fromServerFormat(l.fieldPath);return new Lv(_,g)}(n,i)):[];var i;if(e.update){const i=oc(n,e.update.name),u=new $r({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Oi((e.updateMask.fieldPaths||[]).map(D=>xr.fromServerFormat(D)));return new Ll(i,u,l,t,r)}return new Om(i,u,t,r)}if(e.delete){const i=oc(n,e.delete);return new km(i,t)}if(e.verify){const i=oc(n,e.verify);return new YT(i,t)}return at()}function fM(n,e){return{documents:[iS(n,e.path)]}}function oS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=iS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=iS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return mM(bn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:bh((T=D).field),direction:jO(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=nS(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function pM(n){let e=cM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const N=gM(T);return N instanceof bn&&Pv(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new Ch(Lm((N=T).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(T){let N;return N="object"==typeof T?T.value:T,pp(N)?null:N}(t.limit));let _=null;var T;t.startAt&&(_=new kl((T=t.startAt).values||[],!!T.before));let D=null;return t.endAt&&(D=function(T){return new kl(T.values||[],!T.before)}(t.endAt)),ZT(e,i,l,u,g,"F",_,D)}function gM(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lm(e.unaryFilter.field);return dn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Lm(e.unaryFilter.field);return dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Lm(e.unaryFilter.field);return dn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Lm(e.unaryFilter.field);return dn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?dn.create(Lm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return bn.create(e.compositeFilter.filters.map(t=>gM(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function jO(n){return PO[n]}function HO(n){return OO[n]}function zO(n){return kO[n]}function bh(n){return{fieldPath:n.canonicalString()}}function Lm(n){return xr.fromServerFormat(n.fieldPath)}function mM(n){return n instanceof dn?function(e){if("=="===e.op){if(Mv(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NAN"}};if(xI(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mv(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NAN"}};if(xI(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(e.field),op:HO(e.op),value:e.value}}}(n):n instanceof bn?function(e){const t=e.getFilters().map(r=>mM(r));return 1===t.length?t[0]:{compositeFilter:{op:zO(e.op),filters:t}}}(n):at()}function GO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ul{constructor(e,t,r,i,u=Dt.min(),l=Dt.min(),g=Br.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Ul(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _M{constructor(e){this.fe=e}}function vM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:VI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jv(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Fm(i,u.version.toTimestamp()),createTime:Fm(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bp(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:bp(e.version)}}var i,u;return r}function VI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tp(n){const e=new er(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Sp(n,e){const t=(e.baseMutations||[]).map(u=>sS(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>sS(n.fe,u)),i=er.fromMillis(e.localWriteTimeMs);return new QT(e.batchId,i,t,r)}function Gv(n){const e=Tp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tp(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=p(Ip(cM(i.documents[0])))):r=p(pM(n.query)),new Ul(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function wM(n,e){const t=bp(e.snapshotVersion),r=bp(e.lastLimboFreeSnapshotVersion);let i;i=Mm(e.target)?fM(n.fe,e.target):oS(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function aS(n){const e=pM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?I(e,e.limit,"L"):e}function uS(n,e){return new XT(e.largestBatchId,sS(n.fe,e.overlayMutation))}function EM(n,e){const t=e.path.lastSegment();return[n,Gi(e.path.popLast()),t]}function IM(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:bp(r.readTime),documentKey:Gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class WO{getBundleMetadata(e,t){return CM(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Tp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return CM(e).put({bundleId:(r=t).id,createTime:bp(Yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return DM(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:aS(i.bundledQuery),readTime:Tp(i.readTime)};var i})}saveNamedQuery(e,t){return DM(e).put({name:(r=t).name,readTime:bp(Yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function CM(n){return li(n,"bundles")}function DM(n){return li(n,"namedQueries")}class BI{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new BI(e,t.uid||"")}getOverlay(e,t){return qv(e).get(EM(this.userId,t)).next(r=>r?uS(this.serializer,r):null)}getOverlays(e,t){const r=yn();return ne.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const g=new XT(t,l);i.push(this.we(e,g))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Gi(l.getCollectionPath())));const u=[];return i.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(qv(e).J("collectionPathOverlayIndex",g))}),ne.waitFor(u)}getOverlaysForCollection(e,t,r){const i=yn(),u=Gi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return qv(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const D=uS(this.serializer,_);i.set(D.getKey(),D)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=yn();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qv(e).X({index:"collectionGroupOverlayIndex",range:g},(_,D,T)=>{const N=uS(this.serializer,D);u.size()<i||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):T.done()}).next(()=>u)}we(e,t){return qv(e).put(function(r,i,u){const[l,g,_]=EM(i,u.mutation.key);return{userId:i,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:zv(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function qv(n){return li(n,"documentOverlays")}class Ap{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),wh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ks(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Cm(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):at()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function ZO(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function bM(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=ZO(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ap.Ve=new Ap;class KO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=bM(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=bM(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class YO{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class QO{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Wv{constructor(){this.je=new KO,this.ze=new YO(this.je),this.We=new QO(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class xp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xp(this.indexId,this.documentKey,this.arrayValue,r)}}function Th(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=TM(n.arrayValue,e.arrayValue),0!==t?t:(t=TM(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function TM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class JO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=pI(e);if(void 0!==t&&!this.en(t))return!1;const r=_h(e);let i=0,u=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const l=r[i];if(!this.nn(this.Ze,l)||!this.sn(this.Ye[u++],l))return!1;++i}for(;i<r.length;++i)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[i]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function SM(n){var e,t;if(wt(n instanceof dn||n instanceof bn),n instanceof dn){if(n instanceof NI){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>dn.create(n.field,"==",u)))||[];return bn.create(i,"or")}return n}const r=n.filters.map(i=>SM(i));return bn.create(r,n.op)}function XO(n){if(0===n.getFilters().length)return[];const e=dS(SM(n));return wt(AM(e)),cS(e)||lS(e)?[e]:e.getFilters()}function cS(n){return n instanceof dn}function lS(n){return n instanceof bn&&Pv(n)}function AM(n){return cS(n)||lS(n)||function(e){if(e instanceof bn&&Tm(e)){for(const t of e.getFilters())if(!cS(t)&&!lS(t))return!1;return!0}return!1}(n)}function dS(n){if(wt(n instanceof dn||n instanceof bn),n instanceof dn)return n;if(1===n.filters.length)return dS(n.filters[0]);const e=n.filters.map(r=>dS(r));let t=bn.create(e,n.op);return t=$I(t),AM(t)?t:(wt(t instanceof bn),wt(Fl(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>hS(r,i)))}function hS(n,e){let t;return wt(n instanceof dn||n instanceof bn),wt(e instanceof dn||e instanceof bn),t=n instanceof dn?e instanceof dn?bn.create([n,e],"and"):xM(n,e):e instanceof dn?xM(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),Fl(r)&&Fl(i))return BT(r,i.getFilters());const u=Tm(r)?r:i,l=Tm(r)?i:r,g=u.filters.map(_=>hS(_,l));return bn.create(g,"or")}(n,e),$I(t)}function xM(n,e){if(Fl(e))return BT(e,n.getFilters());{const t=e.filters.map(r=>hS(n,r));return bn.create(t,"or")}}function $I(n){if(wt(n instanceof dn||n instanceof bn),n instanceof dn)return n;const e=n.getFilters();if(1===e.length)return $I(e[0]);if(RI(n))return n;const t=e.map(i=>$I(i)),r=[];return t.forEach(i=>{i instanceof dn?r.push(i):i instanceof bn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:bn.create(r,n.op)}class ek{constructor(){this.rn=new fS}addToCollectionParentIndex(e,t){return this.rn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Xi.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class fS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kn(gn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kn(gn.comparator)).toArray()}}const jI=new Uint8Array(0);class tk{constructor(e,t){this.user=e,this.databaseId=t,this.on=new fS,this.un=new Ve(r=>Dh(r),(r,i)=>xm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Gi(i)};return MM(e).put(u)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[fv(t),""],!1,!0);return MM(e).j(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Zs(l.parent))}return r})}addFieldIndex(e,t){const r=HI(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=Kv(e);return u.next(g=>{l.put(IM(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=HI(e),i=Kv(e),u=Zv(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Zv(e);let i=!0;const u=new Map;return ne.forEach(this.cn(t),l=>this.an(e,l).next(g=>{i&&(i=!!g),u.set(l,g)})).next(()=>{if(i){let l=on();const g=[];return ne.forEach(u,(_,D)=>{var T;Ue("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${Dh(t)}`);const N=function(rt,pt){const Vt=pI(pt);if(void 0===Vt)return null;for(const an of Fv(rt,Vt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(D,_),j=function(rt,pt){const Vt=new Map;for(const an of _h(pt))for(const fi of Fv(rt,an.fieldPath))switch(fi.op){case"==":case"in":Vt.set(an.fieldPath.canonicalString(),fi.value);break;case"not-in":case"!=":return Vt.set(an.fieldPath.canonicalString(),fi.value),Array.from(Vt.values())}return null}(D,_),Q=function(rt,pt){const Vt=[];let an=!0;for(const fi of _h(pt)){const Ao=0===fi.kind?qT(rt,fi.fieldPath,rt.startAt):WT(rt,fi.fieldPath,rt.startAt);Vt.push(Ao.value),an&&(an=Ao.inclusive)}return new kl(Vt,an)}(D,_),oe=function(rt,pt){const Vt=[];let an=!0;for(const fi of _h(pt)){const Ao=0===fi.kind?WT(rt,fi.fieldPath,rt.endAt):qT(rt,fi.fieldPath,rt.endAt);Vt.push(Ao.value),an&&(an=Ao.inclusive)}return new kl(Vt,an)}(D,_),Ae=this.hn(_,D,Q),Ee=this.hn(_,D,oe),gt=this.ln(_,D,j),yt=this.fn(_.indexId,N,Ae,Q.inclusive,Ee,oe.inclusive,gt);return ne.forEach(yt,rt=>r.H(rt,t.limit).next(pt=>{pt.forEach(Vt=>{const an=Ke.fromSegments(Vt.documentKey);l.has(an)||(l=l.add(an),g.push(an))})}))}).next(()=>g)}return ne.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:XO(bn.create(e.filters,"and")).map(r=>PI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),T=[];for(let N=0;N<_;++N){const j=t?this.dn(t[N/D]):jI,Q=this.wn(e,j,r[N%D],i),oe=this._n(e,j,u[N%D],l),Ae=g.map(Ee=>this.wn(e,j,Ee,!0));T.push(...this.createRange(Q,oe,Ae))}return T}wn(e,t,r,i){const u=new xp(e,Ke.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new xp(e,Ke.empty(),t,r);return i?u.Je():u}an(e,t){const r=new JO(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ne.forEach(i,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Kn(xr.comparator),D=!1;for(const T of g.filters)for(const N of T.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:_=_.add(N.field));for(const T of g.orderBy)T.field.isKeyField()||(_=_.add(T.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Wv;for(const i of _h(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.He(i.kind);Ap.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Wv;return Ap.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Wv;return Ap.Ve._e(Ol(this.databaseId,t),r.He(function(i){const u=_h(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Wv);let u=0;for(const l of _h(e)){const g=r[u++];for(const _ of i)if(this.yn(t,l.fieldPath)&&Ep(g))i=this.pn(i,l,g);else{const D=_.He(l.kind);Ap.Ve._e(g,D)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of i){const _=new Wv;_.seed(g.Qe()),Ap.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof dn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=HI(e),i=Kv(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ne.forEach(u,g=>i.get([g.indexId,this.uid]).next(_=>{l.push(function(D,T){const N=T?new _m(T.sequenceNumber,new Xi(Tp(T.readTime),new Ke(Zs(T.documentKey)),T.largestBatchId)):_m.empty(),j=D.fields.map(([Q,oe])=>new gv(xr.fromServerFormat(Q),oe));return new pv(D.indexId,D.collectionGroup,j,N)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=HI(e),u=Kv(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ne.forEach(g,_=>u.put(IM(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?ne.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),ne.forEach(g,_=>this.En(e,i,_).next(D=>{const T=this.An(u,_);return D.isEqual(T)?ne.resolve():this.vn(e,u,_,D,T)}))))})}Rn(e,t,r,i){return Zv(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Zv(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Zv(e);let u=new Kn(Th);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new xp(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Kn(Th);const i=this.mn(t,e);if(null==i)return r;const u=pI(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Ep(l))for(const g of l.arrayValue.values||[])r=r.add(new xp(t.indexId,e.key,this.dn(g),i))}else r=r.add(new xp(t.indexId,e.key,jI,i));return r}vn(e,t,r,i,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,D,T,N){const j=g.getIterator(),Q=_.getIterator();let oe=gp(j),Ae=gp(Q);for(;oe||Ae;){let Ee=!1,gt=!1;if(oe&&Ae){const yt=D(oe,Ae);yt<0?gt=!0:yt>0&&(Ee=!0)}else null!=oe?gt=!0:Ee=!0;Ee?(T(Ae),Ae=gp(Q)):gt?(N(oe),oe=gp(j)):(oe=gp(j),Ae=gp(Q))}}(i,u,Th,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),ne.waitFor(l)}Tn(e){let t=1;return Kv(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>Th(l,g)).filter((l,g,_)=>!g||0!==Th(l,_[g-1]));const i=[];i.push(e);for(const l of r){const g=Th(l,e),_=Th(l,t);if(0===g)i[0]=e.Je();else if(g>0&&_<0)i.push(l),i.push(l.Je());else if(_>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,jI,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,jI,[]]))}return u}bn(e,t){return Th(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RM)}getMinOffset(e,t){return ne.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||at())).next(RM)}}function MM(n){return li(n,"collectionParents")}function Zv(n){return li(n,"indexEntries")}function HI(n){return li(n,"indexConfiguration")}function Kv(n){return li(n,"indexState")}function RM(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;vm(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xi(e.readTime,e.documentKey,t)}const NM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PM(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(T,N,j)=>(g++,j.delete()));u.push(_.next(()=>{wt(1===g)}));const D=[];for(const T of t.mutations){const N=ms(e,T.key.path,t.batchId);u.push(i.delete(N)),D.push(T.key)}return ne.waitFor(u).next(()=>D)}function zI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(41943040,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class GI{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new GI(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sh(e).X({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Um(e),l=Sh(e);return l.add({}).next(g=>{wt("number"==typeof g);const _=new QT(g,t,r,i),D=function(j,Q,oe){const Ae=oe.baseMutations.map(gt=>zv(j.fe,gt)),Ee=oe.mutations.map(gt=>zv(j.fe,gt));return{userId:Q,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Ae,mutations:Ee}}(this.serializer,this.userId,_),T=[];let N=new Kn((j,Q)=>Ht(j.canonicalString(),Q.canonicalString()));for(const j of i){const Q=ms(this.userId,j.key.path,g);N=N.add(j.key.path.popLast()),T.push(l.put(D)),T.push(u.put(Q,AT))}return N.forEach(j=>{T.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),ne.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Sh(e).get(t).next(r=>r?(wt(r.userId===this.userId),Sp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ne.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Sh(e).X({index:"userMutationsIndex",range:i},(l,g,_)=>{g.userId===this.userId&&(wt(g.batchId>=r),u=Sp(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Sh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sh(e).j("userMutationsIndex",t).next(r=>r.map(i=>Sp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ev(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Um(e).X({range:i},(l,g,_)=>{const[D,T,N]=l,j=Zs(T);if(D===this.userId&&t.path.isEqual(j))return Sh(e).get(N).next(Q=>{if(!Q)throw at();wt(Q.userId===this.userId),u.push(Sp(this.serializer,Q))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Ht);const i=[];return t.forEach(u=>{const l=Ev(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Um(e).X({range:g},(D,T,N)=>{const[j,Q,oe]=D,Ae=Zs(Q);j===this.userId&&u.path.isEqual(Ae)?r=r.add(oe):N.done()});i.push(_)}),ne.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Ev(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Kn(Ht);return Um(e).X({range:l},(_,D,T)=>{const[N,j,Q]=_,oe=Zs(j);N===this.userId&&r.isPrefixOf(oe)?oe.length===i&&(g=g.add(Q)):T.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Sh(e).get(u).next(l=>{if(null===l)throw at();wt(l.userId===this.userId),r.push(Sp(this.serializer,l))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return PM(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Um(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=Zs(u[1]);i.push(_)}else g.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return OM(e,this.userId,t)}xn(e){return kM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function OM(n,e,t){const r=Ev(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Um(n).X({range:u,Y:!0},(g,_,D)=>{const[T,N,j]=g;T===e&&N===i&&(l=!0),D.done()}).next(()=>l)}function Sh(n){return li(n,"mutations")}function Um(n){return li(n,"documentMutations")}function kM(n){return li(n,"mutationQueues")}class Mp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Mp(0)}static Mn(){return new Mp(-1)}}class nk{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Mp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vm(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Vm(e).X((l,g)=>{const _=Gv(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>ne.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Vm(e).X((r,i)=>{const u=Gv(i);t(u)})}$n(e){return FM(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return FM(e).put("targetGlobalKey",t)}Fn(e,t){return Vm(e).put(wM(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Dh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Vm(e).X({range:i,index:"queryTargetsIndex"},(l,g,_)=>{const D=Gv(g);xm(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Ah(e);return t.forEach(l=>{const g=Gi(l.path);i.push(u.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,l))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ah(e);return ne.forEach(t,u=>{const l=Gi(u.path);return ne.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ah(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ah(e);let u=on();return i.X({range:r,Y:!0},(l,g,_)=>{const D=Zs(l[1]),T=new Ke(D);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Gi(t.path),i=IDBKeyRange.bound([r],[fv(r)],!1,!0);let u=0;return Ah(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,g],_,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}le(e,t){return Vm(e).get(t).next(r=>r?Gv(r):null)}}function Vm(n){return li(n,"targets")}function FM(n){return li(n,"targetGlobal")}function Ah(n){return li(n,"targetDocuments")}function LM([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class rk{constructor(e){this.Ln=e,this.buffer=new Kn(LM),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nc(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ru(r)}yield t.Qn(3e5)}))}}class ik{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(Ws.ct);const r=new rk(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(NM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NM):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,l,g,_,D;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,l=Date.now(),this.nthSequenceNumber(e,i))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),oI()<=Gu.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${N} documents in `+(D-_)+`ms\nTotal Duration: ${D-T}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:N})))}}class sk{constructor(e,t){this.db=e,this.garbageCollector=function VM(n,e){return new ik(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return qI(e,r)}removeReference(e,t,r){return qI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qI(e,t)}Xn(e,t){return function(r,i){let u=!1;return kM(r).Z(l=>OM(r,l,i).next(g=>(g&&(u=!0),ne.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),Ah(e).delete([0,Gi(l.path)])))});i.push(_)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qI(e,t)}Yn(e,t){const r=Ah(e);let i,u=Ws.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:D})=>{0===l?(u!==Ws.ct&&t(new Ke(Zs(i)),u),u=D,i=_):u=Ws.ct}).next(()=>{u!==Ws.ct&&t(new Ke(Zs(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qI(n,e){return Ah(n).put((r=n.currentSequenceNumber,{targetId:0,path:Gi(e.path),sequenceNumber:r}));var r}class BM{constructor(){this.changes=new Ve(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ok{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rp(e).put(r)}removeEntry(e,t,r){return Rp(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],VI(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return Rp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Yv(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return Rp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Yv(t))},(i,u)=>{r={document:this.ts(t,u),size:zI(u)}}).next(()=>r)}getEntries(e,t){let r=Ye();return this.ns(e,t,(i,u)=>{const l=this.ts(i,u);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Ye(),i=new Pn(Ke.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),i=i.insert(u,zI(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ne.resolve();let i=new Kn(zM);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Yv(i.first()),Yv(i.last())),l=i.getIterator();let g=l.getNext();return Rp(e).X({index:"documentKeyIndex",range:u},(_,D,T)=>{const N=Ke.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&zM(g,N)<0;)r(g,null),g=l.getNext();g&&g.isEqual(N)&&(r(g,D),g=l.hasNext()?l.getNext():null),g?T.G(Yv(g)):T.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),VI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rp(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let D=Ye();for(const T of _){const N=this.ts(Ke.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);N.isFoundDocument()&&(V(t,N)||i.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,i){let u=Ye();const l=HM(t,r),g=HM(t,Xi.max());return Rp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,D,T)=>{const N=this.ts(Ke.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new ak(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jM(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return jM(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function qO(n,e){let t;if(e.document)t=hM(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Tp(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ke.fromSegments(e.unknownDocument.path),i=Tp(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new er(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return tr.newInvalidDocument(e)}}function $M(n){return new ok(n)}class ak extends BM{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ve(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kn((u,l)=>Ht(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=vM(this.os.serializer,l);i=i.add(u.path.popLast());const D=zI(_);r+=D-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=vM(this.os.serializer,l.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function jM(n){return li(n,"remoteDocumentGlobal")}function Rp(n){return li(n,"remoteDocumentsV14")}function Yv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HM(n,e){const t=e.documentKey.path.toArray();return[n,VI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zM(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Ht(t[u],r[u]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Uv(r.mutation,i,Oi.empty(),er.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,on()).next(()=>r))}getLocalViewOfDocuments(e,t,r=on()){const i=yn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=Ne();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=yn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,on()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,i){let u=Ye();const l=Rm(),g=Rm();return t.forEach((_,D)=>{const T=r.get(D.key);i.has(D.key)&&(void 0===T||T.mutation instanceof Ll)?u=u.insert(D.key,D):void 0!==T?(l.set(D.key,T.mutation.getFieldMask()),Uv(T.mutation,D,T.mutation.getFieldMask(),er.now())):l.set(D.key,Oi.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,T)=>l.set(D,T)),t.forEach((D,T)=>{var N;return g.set(D,new uk(T,null!==(N=l.get(D))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Rm();let i=new Pn((l,g)=>l-g),u=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let T=r.get(_)||Oi.empty();T=g.applyToLocalView(D,T),r.set(_,T);const N=(i.get(g.batchId)||on()).add(_);i=i.insert(g.batchId,N)})}).next(()=>{const l=[],g=i.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,T=_.value,N=Er();T.forEach(j=>{if(!u.has(j)){const Q=q1(t.get(j),r.get(j));null!==Q&&N.set(j,Q),u=u.add(j)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,N))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):d(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ne.resolve(yn());let g=-1,_=u;return l.next(D=>ne.forEach(D,(T,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(T)?ne.resolve():this.remoteDocumentCache.getEntry(e,T).next(j=>{_=_.insert(T,j)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,on())).next(T=>({batchId:g,changes:Wt(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Ne();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Ne();return this.indexManager.getCollectionParents(e,i).next(l=>ne.forEach(l,g=>{const _=(D=t,T=g.child(i),new sc(T,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((T,N)=>{u=u.insert(T,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((g,_)=>{const D=_.getKey();null===u.get(D)&&(u=u.insert(D,tr.newInvalidDocument(D)))});let l=Ne();return u.forEach((g,_)=>{const D=i.get(g);void 0!==D&&Uv(D.mutation,_,Oi.empty(),er.now()),V(t,_)&&(l=l.insert(g,_))}),l})}}class ck{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ne.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Yr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:aS(r.bundledQuery),readTime:Yr(r.readTime)}),ne.resolve();var r}}class lk{constructor(){this.overlays=new Pn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=yn();return ne.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=yn(),u=t.length+1,l=new Ke(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Pn((D,T)=>D-T);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let T=u.get(D.largestBatchId);null===T&&(T=yn(),u=u.insert(D.largestBatchId,T)),T.set(D.getKey(),D)}}const g=yn(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,T)=>g.set(D,T)),!(g.size()>=i)););return ne.resolve(g)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new XT(t,r));let u=this.ls.get(t);void 0===u&&(u=on(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class pS{constructor(){this.fs=new Kn(ki.ds),this.ws=new Kn(ki._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ki(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ki(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new gn([])),r=new ki(t,e),i=new ki(t,e+1),u=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new gn([])),r=new ki(t,e),i=new ki(t,e+1);let u=on();return this.ws.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new ki(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ki{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Ht(e.As,t.As)}static _s(e,t){return Ht(e.As,t.As)||Ke.comparator(e.key,t.key)}}class dk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Kn(ki.ds)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const l=new QT(u,t,r,i);this.mutationQueue.push(l);for(const g of i)this.Rs=this.Rs.add(new ki(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ki(t,0),i=new ki(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],l=>{const g=this.Ps(l.As);u.push(g)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Ht);return t.forEach(i=>{const u=new ki(i,0),l=new ki(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),ne.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const l=new ki(new Ke(u),0);let g=new Kn(Ht);return this.Rs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===i&&(g=g.add(_.As)),!0)},l),ne.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ne.forEach(t.mutations,i=>{const u=new ki(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ki(t,0),i=this.Rs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hk{constructor(e){this.Ds=e,this.docs=new Pn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=Ye();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():tr.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=Ye();const l=t.path,g=new Ke(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:T}}=_.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||vm(fp(T),r)<=0||(i.has(T.key)||V(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,r,i){at()}Cs(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fk(this)}getSize(e){return ne.resolve(this.size)}}class fk extends BM{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class pk{constructor(e){this.persistence=e,this.xs=new Ve(t=>Dh(t),xm),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new pS,this.targetCount=0,this.Ms=Mp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ne.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Mp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Fn(t),ne.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),ne.waitFor(u).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ks.containsKey(t))}}class gS{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ws(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new pk(this),this.indexManager=new ek,this.remoteDocumentCache=new hk(r=>this.referenceDelegate.Ls(r)),this.serializer=new _M(t),this.qs=new ck(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new dk(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new gk(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return ne.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class gk extends wm{constructor(e){super(),this.currentSequenceNumber=e}}class WI{constructor(e){this.persistence=e,this.Qs=new pS,this.js=null}static zs(e){return new WI(e)}get Ws(){if(this.js)return this.js;throw at()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Ws,r=>{const i=Ke.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ne.or([()=>ne.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class mk{constructor(e){this.serializer=e}O(e,t,r,i){const u=new _v("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mI,{unique:!0}),g.createObjectStore("documentMutations"),qM(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),qM(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mI,{unique:!0});const T=_.store("mutations"),N=D.map(j=>T.put(j));return ne.waitFor(N)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(u))),r<6&&i>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(u))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(u))),r<11&&i>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:PT});_.createIndex("collectionPathOverlayIndex",Dv,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",iu,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:Iv});_.createIndex("documentKeyIndex",xT),_.createIndex("collectionGroupIndex",MT)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,u))),r<15&&i>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:vI}).createIndex("sequenceNumberIndex",wI,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:NT}).createIndex("documentKeyIndex",EI,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=zI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>ne.forEach(g,_=>{wt(_.userId===u.userId);const D=Sp(this.serializer,_);return PM(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((l,g)=>{const _=new gn(l),D=[0,Gi(_)];u.push(t.get(D).next(T=>T?ne.resolve():t.put({targetId:0,path:Gi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:RT});const r=t.store("collectionParents"),i=new fS,u=l=>{if(i.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:Gi(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new gn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],D)=>{const T=Zs(g);return u(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=Gv(i),l=wM(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(D=l,D.document?new Ke(gn.fromString(D.document.name).popFirst(5)):D.noDocument?Ke.fromSegments(D.noDocument.path):D.unknownDocument?Ke.fromSegments(D.unknownDocument.path):at()).path.toArray();var D;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(g.put(T))}).next(()=>ne.waitFor(i))}si(e,t){const r=t.store("mutations"),i=$M(this.serializer),u=new gS(WI.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var D;let T=null!==(D=g.get(_.userId))&&void 0!==D?D:on();Sp(this.serializer,_).keys().forEach(N=>T=T.add(N)),g.set(_.userId,T)}),ne.forEach(g,(_,D)=>{const T=new Zr(D),N=BI.de(this.serializer,T),j=u.getIndexManager(T),Q=GI.de(T,this.serializer,j,u.referenceDelegate);return new GM(i,Q,N,j).recalculateAndSaveOverlaysForDocumentKeys(new CI(t,Ws.ct),_).next()})})}}function qM(n){n.createObjectStore("targetDocuments",{keyPath:yI}).createIndex("documentTargetsIndex",_I,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cv,{unique:!0}),n.createObjectStore("targetGlobal")}const mS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yS{constructor(e,t,r,i,u,l,g,_,D,T,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=D,this.oi=T,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=j=>Promise.resolve(),!yS.D())throw new Se(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sk(this,i),this.di=t+"main",this.serializer=new _M(_),this.wi=new bo(this.di,this.ui,new mk(this.serializer)),this.Bs=new nk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$M(this.serializer),this.qs=new WO,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ue.FAILED_PRECONDITION,mS);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ws(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,le.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,le.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>KI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(nc(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Qv(e).get("owner").next(t=>ne.resolve(this.Ri(t)))}Pi(e){return KI(e).delete(this.clientId)}bi(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=li(r,"clientMetadata");return i.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return ne.forEach(g,_=>i.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ne.resolve(!0):Qv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Se(ue.FAILED_PRECONDITION,mS);return!1}}return!(!this.networkEnabled||!this.inForeground)||KI(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CI(t,Ws.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>KI(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return GI.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tk(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return BI.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?OT:14===l?bv:13===l?Em:12===l?II:11===l?su:void at();var l;let g;return this.wi.runTransaction(e,i,u,_=>(g=new CI(_,this.Os?this.Os.next():Ws.ct),"readwrite-primary"===t?this.Ti(g).next(D=>!!D||this.Ei(g)).next(D=>{if(!D)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Se(ue.FAILED_PRECONDITION,CT);return r(g)}).next(D=>this.vi(g).next(()=>D)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return Qv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ue.FAILED_PRECONDITION,mS)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qv(e).put("owner",t)}static D(){return bo.D()}Ai(e){const t=Qv(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,en.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qv(n){return li(n,"owner")}function KI(n){return li(n,"clientMetadata")}function _S(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class vS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=on(),i=on();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new vS(e,t.fromCache,r,i)}}class WM{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(s(t))return ne.resolve(null);let r=p(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=I(t,null,"F"),r=p(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=on(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.ji(t,g);return this.zi(t,D,l,_.readTime)?this.Ki(e,I(t,null,"F")):this.Wi(e,D,t,_)}))})))}Gi(e,t,r,i){return s(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,i)?this.Qi(e,t):(oI()<=Gu.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),M(t)),this.Wi(e,l,t,mv(i,-1)))})}ji(e,t){let r=new Kn(X(e));return t.forEach((i,u)=>{V(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return oI()<=Gu.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",M(t)),this.Ui.getDocumentsMatchingQuery(e,t,Xi.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class yk{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Pn(Ht),this.Yi=new Ve(u=>Dh(u),xm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GM(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ZM(n,e,t,r){return new yk(n,e,t,r)}function KM(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,le.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=on();for(const D of i){l.push(D.batchId);for(const T of D.mutations)_=_.add(T.key)}for(const D of u){g.push(D.batchId);for(const T of D.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(D=>({er:D,removedBatchIds:l,addedBatchIds:g}))})})}),wS.apply(this,arguments)}function YM(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function QM(n,e,t){let r=on(),i=on();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ye();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(i=i.add(g)),_.isNoDocument()&&_.version.isEqual(Dt.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Ue("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{nr:l,sr:i}})}function wk(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bm(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,ne.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Ul(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function $m(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=(0,le.Z)(function*(n,e,t){const r=Je(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!nc(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),ES.apply(this,arguments)}function YI(n,e,t){const r=Je(n);let i=Dt.min(),u=on();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,D){const T=Je(g),N=T.Yi.get(D);return void 0!==N?ne.resolve(T.Ji.get(N)):T.Bs.getTargetData(_,D)}(r,l,p(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?u:on())).next(g=>(eR(r,Z(e),g),{documents:g,ir:u})))}function JM(n,e){const t=Je(n),r=Je(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function XM(n,e){const t=Je(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,mv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eR(t,e,i),i))}function eR(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function IS(){return IS=(0,le.Z)(function*(n,e,t,r){const i=Je(n);let u=on(),l=Ye();for(const D of t){const T=e.rr(D.metadata.name);D.document&&(u=u.add(T));const N=e.ur(D);N.setReadTime(e.cr(D.metadata.readTime)),l=l.insert(T,N)}const g=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Bm(i,(D=r,p(Ip(gn.fromString(`__bundle__/docs/${D}`)))));var D;return i.persistence.runTransaction("Apply bundle documents","readwrite",D=>QM(D,g,l).next(T=>(g.apply(D),T)).next(T=>i.Bs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>i.Bs.addMatchingKeys(D,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(D,T.nr,T.sr)).next(()=>T.nr)))}),IS.apply(this,arguments)}function Ik(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,le.Z)(function*(n,e,t=on()){const r=yield Bm(n,p(aS(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=Yr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(u,e);const g=r.withResumeToken(Br.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(g.targetId,g),i.Bs.updateTargetData(u,g).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),CS.apply(this,arguments)}function tR(n,e){return`firestore_clients_${n}_${e}`}function nR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function DS(n,e){return`firestore_targets_${n}_${e}`}class QI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new Se(i.error.code,i.error.message))),l?new QI(e,t,i.state,u):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Se(r.error.code,r.error.message))),u?new Jv(e,r.state,i):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=KT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=wv(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new JI(e,u):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class bS{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bS(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class TS{constructor(){this.activeTargetIds=KT()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SS{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pn(Ht),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=tR(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new TS),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(tR(e.persistenceKey,i));if(u){const l=JI.ar(i,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(DS(this.persistenceKey,e));if(r){const i=Jv.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(DS(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let l=Ws.ct;if(null!=u)try{const g=JSON.parse(u);wt("number"==typeof g),l=g}catch(g){wr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);i!==Ws.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new QI(this.currentUser,e,t,r),u=nR(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=nR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=DS(this.persistenceKey,e),u=new Jv(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return JI.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return QI.ar(new Zr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Jv.ar(i,t)}br(e){return bS.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=KT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class rR{constructor(){this.Hr=new TS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new TS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ck{Yr(e){}shutdown(){}}class iR{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let XI=null;function AS(){return null===XI?XI=268435456+Math.round(2147483648*Math.random()):XI++,"0x"+XI.toString(16)}const Dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bk{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ts="WebChannelConnection";class Tk extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const l=AS(),g=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,i,u),this.Ao(e,g,_,r).then(D=>(Ue("RestConnection",`Received RPC '${e}' ${l}: `,D),D),D=>{throw Ei("RestConnection",`RPC '${e}' ${l} failed with error: `,D,"url: ",g,"request:",r),D})}vo(e,t,r,i,u,l){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${Dk[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=AS();return new Promise((l,g)=>{const _=new yT;_.setWithCredentials(!0),_.listenOnce(mT.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case xl.NO_ERROR:const T=_.getResponseJson();Ue(ts,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),l(T);break;case xl.TIMEOUT:Ue(ts,`RPC '${e}' ${u} timed out`),g(new Se(ue.DEADLINE_EXCEEDED,"Request time out"));break;case xl.HTTP_ERROR:const N=_.getStatus();if(Ue(ts,`RPC '${e}' ${u} failed with status:`,N,"response text:",_.getResponseText()),N>0){let j=_.getResponseJson();Array.isArray(j)&&(j=j[0]);const Q=j?.error;if(Q&&Q.status&&Q.message){const oe=function(Ae){const Ee=Ae.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Ee)>=0?Ee:ue.UNKNOWN}(Q.status);g(new Se(oe,Q.message))}else g(new Se(ue.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Se(ue.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Ue(ts,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(i);Ue(ts,`RPC '${e}' ${u} sending request:`,i),_.send(t,"POST",D,r,15)})}Ro(e,t,r){const i=AS(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=rI(),g=uv(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(_.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(_.xmlHttpFactory=new sI({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const T=u.join("");Ue(ts,`Creating RPC '${e}' stream ${i}: ${T}`,_);const N=l.createWebChannel(T,_);let j=!1,Q=!1;const oe=new bk({ro:Ee=>{Q?Ue(ts,`Not sending because RPC '${e}' stream ${i} is closed:`,Ee):(j||(Ue(ts,`Opening RPC '${e}' stream ${i} transport.`),N.open(),j=!0),Ue(ts,`RPC '${e}' stream ${i} sending:`,Ee),N.send(Ee))},oo:()=>N.close()}),Ae=(Ee,gt,yt)=>{Ee.listen(gt,rt=>{try{yt(rt)}catch(pt){setTimeout(()=>{throw pt},0)}})};return Ae(N,gm.EventType.OPEN,()=>{Q||Ue(ts,`RPC '${e}' stream ${i} transport opened.`)}),Ae(N,gm.EventType.CLOSE,()=>{Q||(Q=!0,Ue(ts,`RPC '${e}' stream ${i} transport closed`),oe.wo())}),Ae(N,gm.EventType.ERROR,Ee=>{Q||(Q=!0,Ei(ts,`RPC '${e}' stream ${i} transport errored:`,Ee),oe.wo(new Se(ue.UNAVAILABLE,"The operation could not be completed")))}),Ae(N,gm.EventType.MESSAGE,Ee=>{var gt;if(!Q){const yt=Ee.data[0];wt(!!yt);const pt=yt.error||(null===(gt=yt[0])||void 0===gt?void 0:gt.error);if(pt){Ue(ts,`RPC '${e}' stream ${i} received error:`,pt);const Vt=pt.status;let an=function(Ao){const sy=hi[Ao];if(void 0!==sy)return J1(sy)}(Vt),fi=pt.message;void 0===an&&(an=ue.INTERNAL,fi="Unknown error status: "+Vt+" with message "+pt.message),Q=!0,oe.wo(new Se(an,fi)),N.close()}else Ue(ts,`RPC '${e}' stream ${i} received:`,yt),oe._o(yt)}}),Ae(g,cv.STAT_EVENT,Ee=>{Ee.stat===iI.PROXY?Ue(ts,`RPC '${e}' stream ${i} detected buffering proxy`):Ee.stat===iI.NOPROXY&&Ue(ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{oe.fo()},0),oe}}function sR(){return typeof window<"u"?window:null}function eC(){return typeof document<"u"?document:null}function Xv(n){return new FO(n,!0)}class xS{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class oR{constructor(e,t,r,i,u,l,g,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new xS(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,le.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,le.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,le.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Se(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,le.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sk extends oR{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function VO(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:at(),i=e.targetChange.targetIds||[],u=function(_,D){return _.useProto3Json?(wt(void 0===D||"string"==typeof D),Br.fromBase64String(D||"")):(wt(void 0===D||D instanceof Uint8Array),Br.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const D=void 0===_.code?ue.UNKNOWN:J1(_.code);return new Se(D,_.message||"")}(l);t=new rM(r,i,u,g||null)}else if("documentChange"in e){const r=e.documentChange,i=oc(n,r.document.name),u=Yr(r.document.updateTime),l=r.document.createTime?Yr(r.document.createTime):Dt.min(),g=new $r({mapValue:{fields:r.document.fields}}),_=tr.newFoundDocument(i,u,l,g);t=new UI(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=oc(n,r.document),u=r.readTime?Yr(r.readTime):Dt.min(),l=tr.newNoDocument(i,u);t=new UI([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=oc(n,r.document);t=new UI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,{count:i=0,unchangedNames:u}=r,l=new MO(i,u);t=new nM(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Yr(u.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Hv(this.serializer),t.addTarget=function(i,u){let l;const g=u.target;if(l=Mm(g)?{documents:fM(i,g)}:{query:oS(i,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=aM(i,u.resumeToken);const _=nS(i,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(Dt.min())>0){l.readTime=Fm(i,u.snapshotVersion.toTimestamp());const _=nS(i,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function $O(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Hv(this.serializer),t.removeTarget=e,this.Wo(t)}}class Ak extends oR{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function BO(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let u=Yr(r.updateTime?r.updateTime:i);return u.isEqual(Dt.min())&&(u=Yr(i)),new TO(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Hv(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>zv(this.serializer,r))};this.Wo(t)}}class xk extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Se(ue.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ue.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class Rk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(wr(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Nk{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,le.Z)(function*(){var _;xh(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,le.Z)(function*(D){const T=Je(D);T.vu.add(4),yield jm(T),T.bu.set("Unknown"),T.vu.delete(4),yield e0(T)}),function(D){return _.apply(this,arguments)})(l))}))}),this.bu=new Rk(r,i)}}function e0(n){return RS.apply(this,arguments)}function RS(){return RS=(0,le.Z)(function*(n){if(xh(n))for(const e of n.Ru)yield e(!0)}),RS.apply(this,arguments)}function jm(n){return NS.apply(this,arguments)}function NS(){return NS=(0,le.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),NS.apply(this,arguments)}function tC(n,e){const t=Je(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),kS(t)?OS(t):zm(t).Ko()&&PS(t,e))}function t0(n,e){const t=Je(n),r=zm(t);t.Au.delete(e),r.Ko()&&aR(t,e),0===t.Au.size&&(r.Ko()?r.jo():xh(t)&&t.bu.set("Unknown"))}function PS(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zm(n).su(e)}function aR(n,e){n.Vu.qt(e),zm(n).iu(e)}function OS(n){n.Vu=new NO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),zm(n).start(),n.bu.gu()}function kS(n){return xh(n)&&!zm(n).Uo()&&n.Au.size>0}function xh(n){return 0===Je(n).vu.size}function uR(n){n.Vu=void 0}function Pk(n){return FS.apply(this,arguments)}function FS(){return FS=(0,le.Z)(function*(n){n.Au.forEach((e,t)=>{PS(n,e)})}),FS.apply(this,arguments)}function Ok(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,le.Z)(function*(n,e){uR(n),kS(n)?(n.bu.Iu(e),OS(n)):n.bu.set("Unknown")}),LS.apply(this,arguments)}function kk(n,e,t){return US.apply(this,arguments)}function US(){return US=(0,le.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof rM&&2===e.state&&e.cause)try{yield(r=(0,le.Z)(function*(i,u){const l=u.cause;for(const g of u.targetIds)i.Au.has(g)&&(yield i.remoteSyncer.rejectListen(g,l),i.Au.delete(g),i.Vu.removeTarget(g))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nC(n,r)}else if(e instanceof UI?n.Vu.Ht(e):e instanceof nM?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield YM(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=i.Au.get(_);D&&i.Au.set(_,D.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const D=i.Au.get(g);if(!D)return;i.Au.set(g,D.withResumeToken(Br.EMPTY_BYTE_STRING,D.snapshotVersion)),aR(i,g);const T=new Ul(D.target,g,_,D.sequenceNumber);PS(i,T)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield nC(n,r)}var r}),US.apply(this,arguments)}function nC(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,le.Z)(function*(n,e,t){if(!nc(e))throw e;n.vu.add(1),yield jm(n),n.bu.set("Offline"),t||(t=()=>YM(n.localStore)),n.asyncQueue.enqueueRetryable((0,le.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield e0(n)}))}),VS.apply(this,arguments)}function cR(n,e){return e().catch(t=>nC(n,t,e))}function Hm(n){return BS.apply(this,arguments)}function BS(){return BS=(0,le.Z)(function*(n){const e=Je(n),t=Mh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Fk(e);)try{const i=yield wk(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Lk(e,i)}catch(i){yield nC(e,i)}lR(e)&&dR(e)}),BS.apply(this,arguments)}function Fk(n){return xh(n)&&n.Eu.length<10}function Lk(n,e){n.Eu.push(e);const t=Mh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function lR(n){return xh(n)&&!Mh(n).Uo()&&n.Eu.length>0}function dR(n){Mh(n).start()}function Uk(n){return $S.apply(this,arguments)}function $S(){return $S=(0,le.Z)(function*(n){Mh(n).hu()}),$S.apply(this,arguments)}function Vk(n){return jS.apply(this,arguments)}function jS(){return jS=(0,le.Z)(function*(n){const e=Mh(n);for(const t of n.Eu)e.uu(t.mutations)}),jS.apply(this,arguments)}function Bk(n,e,t){return HS.apply(this,arguments)}function HS(){return HS=(0,le.Z)(function*(n,e,t){const r=n.Eu.shift(),i=JT.from(r,e,t);yield cR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Hm(n)}),HS.apply(this,arguments)}function $k(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,le.Z)(function*(n,e){var t;e&&Mh(n).ou&&(yield(t=(0,le.Z)(function*(r,i){if(Q1(u=i.code)&&u!==ue.ABORTED){const l=r.Eu.shift();Mh(r).Qo(),yield cR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Hm(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),lR(n)&&dR(n)}),zS.apply(this,arguments)}function hR(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,le.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=xh(t);t.vu.add(3),yield jm(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield e0(t)}),GS.apply(this,arguments)}function qS(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,le.Z)(function*(n,e){const t=Je(n);e?(t.vu.delete(2),yield e0(t)):e||(t.vu.add(2),yield jm(t),t.bu.set("Unknown"))}),WS.apply(this,arguments)}function zm(n){return n.Su||(n.Su=function(e,t,r){const i=Je(e);return i.fu(),new Sk(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Pk.bind(null,n),ao:Ok.bind(null,n),nu:kk.bind(null,n)}),n.Ru.push(function(){var e=(0,le.Z)(function*(t){t?(n.Su.Qo(),kS(n)?OS(n):n.bu.set("Unknown")):(yield n.Su.stop(),uR(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Mh(n){return n.Du||(n.Du=function(e,t,r){const i=Je(e);return i.fu(),new Ak(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Uk.bind(null,n),ao:$k.bind(null,n),au:Vk.bind(null,n),cu:Bk.bind(null,n)}),n.Ru.push(function(){var e=(0,le.Z)(function*(t){t?(n.Du.Qo(),yield Hm(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class ZS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,g=new ZS(e,t,l,i,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(n,e){if(wr("AsyncQueue",`${e}: ${n}`),nc(n))return new Se(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class qm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Ne(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class fR{constructor(){this.Cu=new Pn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):at():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wm{constructor(e,t,r,i,u,l,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Wm(e,t,qm.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&b(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class jk{constructor(){this.Nu=void 0,this.listeners=[]}}class Hk{constructor(){this.queries=new Ve(e=>S(e),b),this.onlineState="Unknown",this.ku=new Set}}function KS(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,le.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new jk),i)try{u.Nu=yield t.onListen(r)}catch(l){const g=Gm(l,`Initialization of query '${M(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&XS(t)}),YS.apply(this,arguments)}function QS(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,le.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),JS.apply(this,arguments)}function zk(n,e){const t=Je(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const g of l.listeners)g.$u(i)&&(r=!0);l.Nu=i}}r&&XS(t)}function Gk(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function XS(n){n.ku.forEach(e=>{e.next()})}class eA{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Wm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class qk{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class pR{constructor(e){this.serializer=e}rr(e){return oc(this.serializer,e)}ur(e){return e.metadata.exists?hM(this.serializer,e.document,!1):tr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Yr(e)}}class Wk{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gR(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=gn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new pR(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const l of i.metadata.queries){const g=(t.get(l)||on()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function Ek(n,e,t,r){return IS.apply(this,arguments)}(e.localStore,new pR(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield Ik(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function gR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mR{constructor(e){this.key=e}}class yR{constructor(e){this.key=e}}class _R{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=on(),this.mutatedKeys=on(),this.tc=X(e),this.ec=new qm(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new fR,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,g=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,D="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,N)=>{const j=i.get(T),Q=V(this.query,N)?N:null,oe=!!j&&this.mutatedKeys.has(j.key),Ae=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Ee=!1;j&&Q?j.data.isEqual(Q.data)?oe!==Ae&&(r.track({type:3,doc:Q}),Ee=!0):this.rc(j,Q)||(r.track({type:2,doc:Q}),Ee=!0,(_&&this.tc(Q,_)>0||D&&this.tc(Q,D)<0)&&(g=!0)):!j&&Q?(r.track({type:0,doc:Q}),Ee=!0):j&&!Q&&(r.track({type:1,doc:j}),Ee=!0,(_||D)&&(g=!0)),Ee&&(Q?(l=l.add(Q),u=Ae?u.add(T):u.delete(T)):(l=l.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,T)=>function(N,j){const Q=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return Q(N)-Q(j)}(D.type,T.type)||this.tc(D.doc,T.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Wm(this.query,e.ec,i,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new fR,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=on(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new yR(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new mR(r))}),t}hc(e){this.Yu=e.ir,this.Zu=on();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Wm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Zk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Kk{constructor(e){this.key=e,this.fc=!1}}class Yk{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ve(g=>S(g),b),this._c=new Map,this.mc=new Set,this.gc=new Pn(Ke.comparator),this.yc=new Map,this.Ic=new pS,this.Tc={},this.Ec=new Map,this.Ac=Mp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Qk(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,le.Z)(function*(n,e){const t=DA(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const l=yield Bm(t.localStore,p(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield nA(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&tC(t.remoteStore,l)}return i}),tA.apply(this,arguments)}function nA(n,e,t,r,i){return rA.apply(this,arguments)}function rA(){return rA=(0,le.Z)(function*(n,e,t,r,i){n.Rc=(N,j,Q)=>{return(oe=(0,le.Z)(function*(Ae,Ee,gt,yt){let rt=Ee.view.sc(gt);rt.zi&&(rt=yield YI(Ae.localStore,Ee.query,!1).then(({documents:an})=>Ee.view.sc(an,rt)));const pt=yt&&yt.targetChanges.get(Ee.targetId),Vt=Ee.view.applyChanges(rt,Ae.isPrimaryClient,pt);return fA(Ae,Ee.targetId,Vt.cc),Vt.snapshot}),function(Ae,Ee,gt,yt){return oe.apply(this,arguments)})(n,N,j,Q);var oe};const u=yield YI(n.localStore,e,!0),l=new _R(e,u.ir),g=l.sc(u.documents),_=$v.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),D=l.applyChanges(g,n.isPrimaryClient,_);fA(n,t,D.cc);const T=new Zk(e,t,l);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),rA.apply(this,arguments)}function Jk(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,le.Z)(function*(n,e){const t=Je(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!b(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $m(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),t0(t.remoteStore,r.targetId),Zm(t,r.targetId)}).catch(ru))):(Zm(t,r.targetId),yield $m(t.localStore,r.targetId,!0))}),iA.apply(this,arguments)}function sA(){return sA=(0,le.Z)(function*(n,e,t){const r=bA(n);try{const i=yield function(u,l){const g=Je(u),_=er.now(),D=l.reduce((j,Q)=>j.add(Q.key),on());let T,N;return g.persistence.runTransaction("Locally write mutations","readwrite",j=>{let Q=Ye(),oe=on();return g.Zi.getEntries(j,D).next(Ae=>{Q=Ae,Q.forEach((Ee,gt)=>{gt.isValidDocument()||(oe=oe.add(Ee))})}).next(()=>g.localDocuments.getOverlayedDocuments(j,Q)).next(Ae=>{T=Ae;const Ee=[];for(const gt of l){const yt=AO(gt,T.get(gt.key).overlayedDocument);null!=yt&&Ee.push(new Ll(gt.key,yt,LT(yt.value.mapValue),Ir.exists(!0)))}return g.mutationQueue.addMutationBatch(j,_,Ee,l)}).next(Ae=>{N=Ae;const Ee=Ae.applyToLocalDocumentSet(T,oe);return g.documentOverlayCache.saveOverlays(j,Ae.batchId,Ee)})}).then(()=>({batchId:N.batchId,changes:Wt(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new Pn(Ht)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Vl(r,i.changes),yield Hm(r.remoteStore)}catch(i){const u=Gm(i,"Failed to persist write");t.reject(u)}}),sA.apply(this,arguments)}function vR(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,le.Z)(function*(n,e){const t=Je(n);try{const r=yield function vk(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const g=[];e.targetChanges.forEach((T,N)=>{const j=i.get(N);if(!j)return;g.push(t.Bs.removeMatchingKeys(u,T.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,T.addedDocuments,N)));let Q=j.withSequenceNumber(u.currentSequenceNumber);var oe,Ae,Ee;null!==e.targetMismatches.get(N)?Q=Q.withResumeToken(Br.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):T.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(T.resumeToken,r)),i=i.insert(N,Q),Ae=Q,Ee=T,(0===(oe=j).resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,Q))});let _=Ye(),D=on();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),g.push(QM(u,l,e.documentUpdates).next(T=>{_=T.nr,D=T.sr})),!r.isEqual(Dt.min())){const T=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(T)}return ne.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.Ji=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.yc.get(u);l&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?wt(l.fc):i.removedDocuments.size>0&&(wt(l.fc),l.fc=!1))}),yield Vl(t,r,e)}catch(r){yield ru(r)}}),oA.apply(this,arguments)}function wR(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&i.push(g.snapshot)}),function(u,l){const g=Je(u);g.onlineState=l;let _=!1;g.queries.forEach((D,T)=>{for(const N of T.listeners)N.Mu(l)&&(_=!0)}),_&&XS(g)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eF(n,e,t){return aA.apply(this,arguments)}function aA(){return aA=(0,le.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let l=new Pn(Ke.comparator);l=l.insert(u,tr.newNoDocument(u,Dt.min()));const g=on().add(u),_=new Bv(Dt.min(),new Map,new Pn(Ht),l,g);yield vR(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),pA(r)}else yield $m(r.localStore,e,!1).then(()=>Zm(r,e,t)).catch(ru)}),aA.apply(this,arguments)}function tF(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,le.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield function _k(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,D){const T=_.batch,N=T.keys();let j=ne.resolve();return N.forEach(Q=>{j=j.next(()=>D.getEntry(g,Q)).next(oe=>{const Ae=_.docVersions.get(Q);wt(null!==Ae),oe.version.compareTo(Ae)<0&&(T.applyToRemoteDocument(oe,_),oe.isValidDocument()&&(oe.setReadTime(_.commitVersion),D.addEntry(oe)))})}),j.next(()=>l.mutationQueue.removeMutationBatch(g,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=on();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);hA(t,r,null),dA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vl(t,i)}catch(i){yield ru(i)}}),uA.apply(this,arguments)}function nF(n,e,t){return cA.apply(this,arguments)}function cA(){return cA=(0,le.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(u,l){const g=Je(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,l).next(T=>(wt(null!==T),D=T.keys(),g.mutationQueue.removeMutationBatch(_,T))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);hA(r,e,t),dA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vl(r,i)}catch(i){yield ru(i)}}),cA.apply(this,arguments)}function lA(){return lA=(0,le.Z)(function*(n,e){const t=Je(n);xh(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Je(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Gm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),lA.apply(this,arguments)}function dA(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function hA(n,e,t){const r=Je(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Zm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||ER(n,r)})}function ER(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(t0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),pA(n))}function fA(n,e,t){for(const r of t)r instanceof mR?(n.Ic.addReference(r.key,e),iF(n,r)):r instanceof yR?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||ER(n,r.key)):at()}function iF(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(r),pA(n))}function pA(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(gn.fromString(e)),r=n.Ac.next();n.yc.set(r,new Kk(t)),n.gc=n.gc.insert(t,r),tC(n.remoteStore,new Ul(p(Ip(t.path)),r,"TargetPurposeLimboResolution",Ws.ct))}}function Vl(n,e,t){return gA.apply(this,arguments)}function gA(){return gA=(0,le.Z)(function*(n,e,t){const r=Je(n),i=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){i.push(D);const T=vS.Li(_.targetId,D);u.push(T)}}))}),yield Promise.all(l),r.dc.nu(i),yield(g=(0,le.Z)(function*(_,D){const T=Je(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ne.forEach(D,j=>ne.forEach(j.Fi,Q=>T.persistence.referenceDelegate.addReference(N,j.targetId,Q)).next(()=>ne.forEach(j.Bi,Q=>T.persistence.referenceDelegate.removeReference(N,j.targetId,Q)))))}catch(N){if(!nc(N))throw N;Ue("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const j=N.targetId;if(!N.fromCache){const Q=T.Ji.get(j),Ae=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);T.Ji=T.Ji.insert(j,Ae)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),gA.apply(this,arguments)}function sF(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,le.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield KM(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new Se(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vl(t,r.er)}var i}),mA.apply(this,arguments)}function oF(n,e){const t=Je(n),r=t.yc.get(e);if(r&&r.fc)return on().add(r.key);{let i=on();const u=t._c.get(e);if(!u)return i;for(const l of u){const g=t.wc.get(l);i=i.unionWith(g.view.nc)}return i}}function aF(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,le.Z)(function*(n,e){const t=Je(n),r=yield YI(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&fA(t,e.targetId,i.cc),i}),yA.apply(this,arguments)}function uF(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,le.Z)(function*(n,e){const t=Je(n);return XM(t.localStore,e).then(r=>Vl(t,r))}),_A.apply(this,arguments)}function cF(n,e,t,r){return vA.apply(this,arguments)}function vA(){return vA=(0,le.Z)(function*(n,e,t,r){const i=Je(n),u=yield function(l,g){const _=Je(l),D=Je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>D.Sn(T,g).next(N=>N?_.localDocuments.getDocuments(T,N):ne.resolve(null)))}(i.localStore,e);var g;null!==u?("pending"===t?yield Hm(i.remoteStore):"acknowledged"===t||"rejected"===t?(hA(i,e,r||null),dA(i,e),g=e,Je(Je(i.localStore).mutationQueue).Cn(g)):at(),yield Vl(i,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),vA.apply(this,arguments)}function wA(){return wA=(0,le.Z)(function*(n,e){const t=Je(n);if(DA(t),bA(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield IR(t,r.toArray());t.vc=!0,yield qS(t.remoteStore,!0);for(const u of i)tC(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Zm(t,l),$m(t.localStore,l,!0))),t0(t.remoteStore,l)}),yield i,yield IR(t,r),function(u){const l=Je(u);l.yc.forEach((g,_)=>{t0(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Pn(Ke.comparator)}(t),t.vc=!1,yield qS(t.remoteStore,!1)}}),wA.apply(this,arguments)}function IR(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,le.Z)(function*(n,e,t){const r=Je(n),i=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield Bm(r.localStore,p(_[0]));for(const D of _){const T=r.wc.get(D),N=yield aF(r,T);N.snapshot&&u.push(N.snapshot)}}else{const D=yield JM(r.localStore,l);g=yield Bm(r.localStore,D),yield nA(r,CR(D),l,!1,g.resumeToken)}i.push(g)}return r.dc.nu(u),i}),EA.apply(this,arguments)}function CR(n){return ZT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dF(n){const e=Je(n);return Je(Je(e.localStore).persistence).$i()}function hF(n,e,t,r){return IA.apply(this,arguments)}function IA(){return IA=(0,le.Z)(function*(n,e,t,r){const i=Je(n);if(i.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield XM(i.localStore,Z(u[0])),g=Bv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Br.EMPTY_BYTE_STRING);yield Vl(i,l,g);break}case"rejected":yield $m(i.localStore,e,!0),Zm(i,e,r);break;default:at()}}),IA.apply(this,arguments)}function fF(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,le.Z)(function*(n,e,t){const r=DA(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const u=yield JM(r.localStore,i),l=yield Bm(r.localStore,u);yield nA(r,CR(u),l.targetId,!1,l.resumeToken),tC(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield $m(r.localStore,i,!1).then(()=>{t0(r.remoteStore,i),Zm(r,i)}).catch(ru))}}),CA.apply(this,arguments)}function DA(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eF.bind(null,e),e.dc.nu=zk.bind(null,e.eventManager),e.dc.Pc=Gk.bind(null,e.eventManager),e}function bA(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nF.bind(null,e),e}class n0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.serializer=Xv(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ZM(this.persistence,new WM,e.initialUser,this.serializer)}createPersistence(e){return new gS(WI.zs,this.serializer)}createSharedClientState(e){return new rR}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class TA extends n0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield bA(r.Vc.syncEngine),yield Hm(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ZM(this.persistence,new WM,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new UM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new ST(t,this.persistence);return new TT(e.asyncQueue,r)}createPersistence(e){const t=_S(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new yS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sR(),eC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rR}}class DR extends TA{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,le.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof SS&&(r.sharedClientState.syncEngine={jr:cF.bind(null,i),zr:hF.bind(null,i),Wr:fF.bind(null,i),$i:dF.bind(null,i),Qr:uF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,le.Z)(function*(l){yield function lF(n,e){return wA.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=sR();if(!SS.D(t))throw new Se(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_S(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Km{initialize(e,t){var r=this;return(0,le.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>wR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=sF.bind(null,r.syncEngine),yield qS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Hk}createDatastore(e){const t=Xv(e.databaseInfo.databaseId),r=new Tk(e.databaseInfo);return new xk(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=g=>wR(this.syncEngine,g,0),l=iR.D()?new iR:new Ck,new Nk(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,g,_,D){const T=new Yk(r,i,u,l,g,_);return D&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(t){const r=Je(t);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield jm(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bR(n,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class rC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mF{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Kr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,le.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new qk(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,le.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class yF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,le.Z)(function*(u,l){const g=Je(u),_=Hv(g.serializer)+"/documents",D={documents:l.map(Q=>jv(g.serializer,Q))},T=yield g.vo("BatchGetDocuments",_,D,l.length),N=new Map;T.forEach(Q=>{const oe=function UO(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=oc(t,r.found.name),u=Yr(r.found.updateTime),l=r.found.createTime?Yr(r.found.createTime):Dt.min(),g=new $r({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,u,l,g)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=oc(t,r.missing),u=Yr(r.readTime);return tr.newNoDocument(i,u)}(n,e):at()}(g.serializer,Q);N.set(oe.key.toString(),oe)});const j=[];return l.forEach(Q=>{const oe=N.get(Q.toString());wt(!!oe),j.push(oe)}),j}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new km(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ke.fromPath(i);e.mutations.push(new YT(u,e.precondition(u)))}),yield(r=(0,le.Z)(function*(i,u){const l=Je(i),g=Hv(l.serializer)+"/documents",_={writes:u.map(D=>zv(l.serializer,D))};yield l.Io("Commit",g,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Ir.exists(!1):Ir.updateTime(t):Ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Se(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ir.updateTime(t)}return Ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _F{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new xS(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,le.Z)(function*(){const t=new yF(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!pp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Q1(t)}return!1}}class vF{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Zr.UNAUTHENTICATED,this.clientId=hv.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,le.Z)(function*(g){Ue("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Gm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function iC(n,e){return SA.apply(this,arguments)}function SA(){return SA=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,le.Z)(function*(u){r.isEqual(u)||(yield KM(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),SA.apply(this,arguments)}function AA(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,le.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield MA(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>hR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>hR(e.remoteStore,u)),n._onlineComponents=e}),xA.apply(this,arguments)}function TR(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function MA(n){return RA.apply(this,arguments)}function RA(){return RA=(0,le.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield iC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!TR(t))throw t;Ei("Error using user provided cache. Falling back to memory cache: "+t),yield iC(n,new n0)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield iC(n,new n0);return n._offlineComponents}),RA.apply(this,arguments)}function sC(n){return NA.apply(this,arguments)}function NA(){return NA=(0,le.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield AA(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield AA(n,new Km))),n._onlineComponents}),NA.apply(this,arguments)}function SR(n){return MA(n).then(e=>e.persistence)}function oC(n){return MA(n).then(e=>e.localStore)}function AR(n){return sC(n).then(e=>e.remoteStore)}function PA(n){return sC(n).then(e=>e.syncEngine)}function Ym(n){return OA.apply(this,arguments)}function OA(){return OA=(0,le.Z)(function*(n){const e=yield sC(n),t=e.eventManager;return t.onListen=Qk.bind(null,e.syncEngine),t.onUnlisten=Jk.bind(null,e.syncEngine),t}),OA.apply(this,arguments)}function MR(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(i,u,l,g,_){const D=new rC({next:N=>{u.enqueueAndForget(()=>QS(i,T));const j=N.docs.has(l);!j&&N.fromCache?_.reject(new Se(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&N.fromCache&&g&&"server"===g.source?_.reject(new Se(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),T=new eA(Ip(l.path),D,{includeMetadataChanges:!0,Ku:!0});return KS(i,T)}(yield Ym(n),n.asyncQueue,e,t,r)})),r.promise}function RR(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(i,u,l,g,_){const D=new rC({next:N=>{u.enqueueAndForget(()=>QS(i,T)),N.fromCache&&"server"===g.source?_.reject(new Se(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),T=new eA(l,D,{includeMetadataChanges:!0,Ku:!0});return KS(i,T)}(yield Ym(n),n.asyncQueue,e,t,r)})),r.promise}function NR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const PR=new Map;function kA(n,e,t){if(!t)throw new Se(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OR(n,e,t,r){if(!0===e&&!0===r)throw new Se(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kR(n){if(!Ke.isDocumentKey(n))throw new Se(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FR(n){if(Ke.isDocumentKey(n))throw new Se(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=aC(n);throw new Se(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LR(n,e){if(e<=0)throw new Se(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class UR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=NR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cI;switch(t.type){case"firstParty":return new hI(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=PR.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),PR.delete(e),t.terminate())}(this),Promise.resolve()}}function VR(n,e,t,r={}){var i;const u=(n=mn(n,r0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ei("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=Zr.MOCK_USER;else{l=(0,en.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Se(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Zr(_)}n._authCredentials=new lI(new uI(l,g))}}class ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qi(this.firestore,e,this._query)}}class ac extends qi{constructor(e,t,r){super(e,t,Ip(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new Ke(e))}withConverter(e){return new ac(this.firestore,e,this._path)}}function FA(n,e,...t){if(n=(0,en.m9)(n),kA("collection","path",e),n instanceof r0){const r=gn.fromString(e,...t);return FR(r),new ac(n,null,r)}{if(!(n instanceof ur||n instanceof ac))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return FR(r),new ac(n.firestore,null,r)}}function s0(n,e,...t){if(n=(0,en.m9)(n),1===arguments.length&&(e=hv.A()),kA("doc","path",e),n instanceof r0){const r=gn.fromString(e,...t);return kR(r),new ur(n,null,new Ke(r))}{if(!(n instanceof ur||n instanceof ac))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return kR(r),new ur(n.firestore,n instanceof ac?n.converter:null,new Ke(r))}}function BR(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),(n instanceof ur||n instanceof ac)&&(e instanceof ur||e instanceof ac)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LA(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),n instanceof qi&&e instanceof qi&&n.firestore===e.firestore&&b(n._query,e._query)&&n.converter===e.converter}class xF{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new xS(this,"async_queue_retry"),this.Xc=()=>{const t=eC();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=eC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=eC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Kr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,le.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!nc(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=ZS.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&at()}verifyOperationInProgress(){}sa(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function UA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class MF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cr extends r0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xF,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$R(this),this._firestoreClient.terminate()}}function NF(n,e){const t="object"==typeof n?n:(0,ps.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,ps._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const u=(0,en.P0)("firestore");u&&VR(i,...u)}return i}function Qr(n){return n._firestoreClient||$R(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $R(n){var e,t,r;const i=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new k1(n._databaseId,g,n._persistenceKey,(D=i).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,NR(D.experimentalLongPollingOptions),D.useFetchStreams));var g,D;n._firestoreClient=new vF(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function jR(n,e,t){const r=new Kr;return n.asyncQueue.enqueue((0,le.Z)(function*(){try{yield iC(n,t),yield AA(n,e),r.resolve()}catch(i){const u=i;if(!TR(u))throw u;Ei("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function HR(n){if(n._initialized||n._terminated)throw new Se(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(Br.fromBase64String(e))}catch(t){throw new Se(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uc(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Np{constructor(e){this._methodName=e}}class uC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const jF=/^__.*__$/;class HF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms):new Om(e,this.data,t,this.fieldTransforms)}}class zR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ll(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class cC{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new cC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return hC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(GR(this.ca)&&jF.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class zF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xv(e)}ya(e,t,r,i=!1){return new cC({ca:e,methodName:t,ga:r,path:xr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pp(n){const e=n._freezeSettings(),t=Xv(n._databaseId);return new zF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lC(n,e,t,r,i,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,i);jA("Data must be an object, but it was:",l,r);const g=ZR(r,l);let _,D;if(u.merge)_=new Oi(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const T=[];for(const N of u.mergeFields){const j=u0(e,N,t);if(!l.contains(j))throw new Se(ue.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);YR(T,j)||T.push(j)}_=new Oi(T),D=l.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,D=l.fieldTransforms;return new HF(new $r(g),_,D)}class a0 extends Np{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a0}}function qR(n,e,t){return new cC({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class VA extends Np{_toFieldTransform(e){return new Lv(e.path,new Nm)}isEqual(e){return e instanceof VA}}class GF extends Np{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=qR(this,e,!0),r=this.pa.map(u=>Op(u,t)),i=new Cp(r);return new Lv(e.path,i)}isEqual(e){return this===e}}class qF extends Np{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=qR(this,e,!0),r=this.pa.map(u=>Op(u,t)),i=new Dp(r);return new Lv(e.path,i)}isEqual(e){return this===e}}class WF extends Np{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Pm(e.serializer,B1(e.serializer,this.Ia));return new Lv(e.path,t)}isEqual(e){return this===e}}function BA(n,e,t,r){const i=n.ya(1,e,t);jA("Data must be an object, but it was:",i,r);const u=[],l=$r.empty();rc(r,(_,D)=>{const T=dC(e,_,t);D=(0,en.m9)(D);const N=i.da(T);if(D instanceof a0)u.push(T);else{const j=Op(D,N);null!=j&&(u.push(T),l.set(T,j))}});const g=new Oi(u);return new zR(l,g,i.fieldTransforms)}function $A(n,e,t,r,i,u){const l=n.ya(1,e,t),g=[u0(e,r,t)],_=[i];if(u.length%2!=0)throw new Se(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)g.push(u0(e,u[j])),_.push(u[j+1]);const D=[],T=$r.empty();for(let j=g.length-1;j>=0;--j)if(!YR(D,g[j])){const Q=g[j];let oe=_[j];oe=(0,en.m9)(oe);const Ae=l.da(Q);if(oe instanceof a0)D.push(Q);else{const Ee=Op(oe,Ae);null!=Ee&&(D.push(Q),T.set(Q,Ee))}}const N=new Oi(D);return new zR(T,N,l.fieldTransforms)}function WR(n,e,t,r=!1){return Op(t,n.ya(r?4:3,e))}function Op(n,e){if(KR(n=(0,en.m9)(n)))return jA("Unsupported field value:",e,n),ZR(n,e);if(n instanceof Np)return function(t,r){if(!GR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let g=Op(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,en.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return B1(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=er.fromDate(t);return{timestampValue:Fm(r.serializer,i)}}if(t instanceof er){const i=new er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Fm(r.serializer,i)}}if(t instanceof uC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uc)return{bytesValue:aM(r.serializer,t._byteString)};if(t instanceof ur){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${aC(t)}`)}(n,e)}function ZR(n,e){const t={};return bI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rc(n,(r,i)=>{const u=Op(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function KR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof er||n instanceof uC||n instanceof uc||n instanceof ur||n instanceof Np)}function jA(n,e,t){if(!KR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=aC(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function u0(n,e,t){if((e=(0,en.m9)(e))instanceof Bl)return e._internalPath;if("string"==typeof e)return dC(n,e);throw hC("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZF=new RegExp("[~\\*/\\[\\]]");function dC(n,e,t){if(e.search(ZF)>=0)throw hC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bl(...e.split("."))._internalPath}catch{throw hC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hC(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Se(ue.INVALID_ARGUMENT,g+n+_)}function YR(n,e){return n.some(t=>t.isEqual(e))}class c0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KF extends c0{data(){return super.data()}}function fC(n,e){return"string"==typeof e?dC(n,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}function QR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HA{}class l0 extends HA{}function Rh(n,e,...t){let r=[];e instanceof HA&&r.push(e),r=r.concat(t),function(i){const u=i.filter(g=>g instanceof Qm).length,l=i.filter(g=>g instanceof d0).length;if(u>1||u>0&&l>0)throw new Se(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class d0 extends l0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new d0(e,t,r)}_apply(e){const t=this._parse(e);return tN(e._query,t),new qi(e.firestore,e.converter,y(e._query,t))}_parse(e){const t=Pp(e.firestore);return function(i,u,l,g,_,D,T){let N;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Se(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){eN(T,D);const j=[];for(const Q of T)j.push(XR(g,i,Q));N={arrayValue:{values:j}}}else N=XR(g,i,T)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||eN(T,D),N=WR(l,"where",T,"in"===D||"not-in"===D);return dn.create(_,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Qm extends HA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const l=i.getFlattenedFilters();for(const g of l)tN(u,g),u=y(u,g)}(e._query,t),new qi(e.firestore,e.converter,y(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zA extends l0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zA(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Se(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ch(i,u);return function(g,_){if(null===o(g)){const D=a(g);null!==D&&nN(0,D,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new qi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new sc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class pC extends l0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new pC(e,t,r)}_apply(e){return new qi(e.firestore,e.converter,I(e._query,this._limit,this._limitType))}}class gC extends l0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gC(e,t,r)}_apply(e){const t=JR(e,this.type,this._docOrFields,this._inclusive);return new qi(e.firestore,e.converter,(i=t,new sc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class mC extends l0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mC(e,t,r)}_apply(e){const t=JR(e,this.type,this._docOrFields,this._inclusive);return new qi(e.firestore,e.converter,(i=t,new sc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function JR(n,e,t,r){if(t[0]=(0,en.m9)(t[0]),t[0]instanceof c0)return function(i,u,l,g,_){if(!g)throw new Se(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const T of h(i))if(T.field.isKeyField())D.push(Ol(u,g.key));else{const N=g.data.field(T.field);if(mp(N))throw new Se(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const j=T.field.canonicalString();throw new Se(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}D.push(N)}return new kl(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Pp(n.firestore);return function(u,l,g,_,D,T){const N=u.explicitOrderBy;if(D.length>N.length)throw new Se(ue.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let Q=0;Q<D.length;Q++){const oe=D[Q];if(N[Q].field.isKeyField()){if("string"!=typeof oe)throw new Se(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof oe}`);if(!d(u)&&-1!==oe.indexOf("/"))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${oe}' contains a slash.`);const Ae=u.path.child(gn.fromString(oe));if(!Ke.isDocumentKey(Ae))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const Ee=new Ke(Ae);j.push(Ol(l,Ee))}else{const Ae=WR(g,_,oe);j.push(Ae)}}return new kl(j,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function XR(n,e,t){if("string"==typeof(t=(0,en.m9)(t))){if(""===t)throw new Se(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d(e)&&-1!==t.indexOf("/"))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gn.fromString(t));if(!Ke.isDocumentKey(r))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ol(n,new Ke(r))}if(t instanceof ur)return Ol(n,t._key);throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aC(t)}.`)}function eN(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tN(n,e){if(e.isInequality()){const r=a(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=o(n);null!==u&&nN(0,i,u)}const t=function(r,i){for(const u of r)for(const l of u.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function nN(n,e,t){if(!t.isEqual(e))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class GA{convertValue(e,t="none"){switch(ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return rc(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new uC(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Im(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yp(e));default:return null}}convertTimestamp(e){const t=ou(e);return new er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gn.fromString(e);wt(yM(r));const i=new Rl(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return i.isEqual(t)||wr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function yC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iL extends GA{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}class kp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $l extends c0{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new h0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class h0 extends $l{data(e={}){return super.data(e)}}class Nh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new h0(this._firestore,this._userDataWriter,r.key,r,new kp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new h0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const g=new h0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:oL(l.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function iN(n,e){return n instanceof $l&&e instanceof $l?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Nh&&e instanceof Nh&&n._firestore===e._firestore&&LA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sN(n){n=mn(n,ur);const e=mn(n.firestore,cr);return MR(Qr(e),n._key).then(t=>WA(e,n,t))}class Ph extends GA{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}function oN(n){n=mn(n,qi);const e=mn(n.firestore,cr),t=Qr(e),r=new Ph(e);return QR(n._query),RR(t,n._query).then(i=>new Nh(e,r,n,i))}function aN(n,e,t){n=mn(n,ur);const r=mn(n.firestore,cr),i=yC(n.converter,e,t);return Jm(r,[lC(Pp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ir.none())])}function qA(n,e,t,...r){n=mn(n,ur);const i=mn(n.firestore,cr),u=Pp(i);let l;return l="string"==typeof(e=(0,en.m9)(e))||e instanceof Bl?$A(u,"updateDoc",n._key,e,t,r):BA(u,"updateDoc",n._key,e),Jm(i,[l.toMutation(n._key,Ir.exists(!0))])}function uN(n,...e){var t,r,i;n=(0,en.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||UA(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(UA(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(i=N.complete)||void 0===i?void 0:i.bind(N)}let _,D,T;if(n instanceof ur)D=mn(n.firestore,cr),T=Ip(n._key.path),_={next:N=>{e[l]&&e[l](WA(D,n,N))},error:e[l+1],complete:e[l+2]};else{const N=mn(n,qi);D=mn(N.firestore,cr),T=N._query;const j=new Ph(D);_={next:Q=>{e[l]&&e[l](new Nh(D,j,N,Q))},error:e[l+1],complete:e[l+2]},QR(n._query)}return function(N,j,Q,oe){const Ae=new rC(oe),Ee=new eA(j,Ae,Q);return N.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return KS(yield Ym(N),Ee)})),()=>{Ae.Dc(),N.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return QS(yield Ym(N),Ee)}))}}(Qr(D),T,g,_)}function Jm(n,e){return function(t,r){const i=new Kr;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function Xk(n,e,t){return sA.apply(this,arguments)}(yield PA(t),r,i)})),i.promise}(Qr(n),e)}function WA(n,e,t){const r=t.docs.get(e._key),i=new Ph(n);return new $l(n,i,e._key,r,new kp(t.hasPendingWrites,t.fromCache),e.converter)}const IL={maxAttempts:5};class cN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pp(e)}set(e,t,r){this._verifyNotCommitted();const i=Oh(e,this._firestore),u=yC(i.converter,t,r),l=lC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Oh(e,this._firestore);let l;return l="string"==typeof(t=(0,en.m9)(t))||t instanceof Bl?$A(this._dataReader,"WriteBatch.update",u._key,t,r,i):BA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Oh(e,this._firestore);return this._mutations=this._mutations.concat(new km(t._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oh(n,e){if((n=(0,en.m9)(n)).firestore!==e)throw new Se(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class CL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pp(e)}get(e){const t=Oh(e,this._firestore),r=new iL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const u=i[0];if(u.isFoundDocument())return new c0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new c0(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Oh(e,this._firestore),u=yC(i.converter,t,r),l=lC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=Oh(e,this._firestore);let l;return l="string"==typeof(t=(0,en.m9)(t))||t instanceof Bl?$A(this._dataReader,"Transaction.update",u._key,t,r,i):BA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Oh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Oh(e,this._firestore),r=new Ph(this._firestore);return super.get(e).then(i=>new $l(this._firestore,r,t._key,i._document,new kp(!1,!1),t.converter))}}!function(n,e=!0){nu=ps.SDK_VERSION,(0,ps._registerComponent)(new zu.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new cr(new vT(t.getProvider("auth-internal")),new wT(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Se(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rl(g.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(lv,"3.12.1",n),(0,ps.registerVersion)(lv,"3.12.1","esm2017")}();class f0{constructor(e){return e}}const dN="firestore",ZA=new c.OlP("angularfire2.firestore-instances");function NL(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new f0(r)}}const PL={provide:class ML{constructor(){return(0,cn.vb)(dN)}},deps:[[new c.FiY,ZA]]},OL={provide:f0,useFactory:function RL(n,e){const t=(0,cn.JM)(dN,n,e);return t&&new f0(t)},deps:[[new c.FiY,ZA],sl]};let kL=(()=>{class n{constructor(){(0,il.KN)("angularfire",cn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[OL,PL]}),n})();function FL(n,...e){return{ngModule:kL,providers:[{provide:ZA,useFactory:NL(n),multi:!0,deps:[c.R0b,c.zs3,cn.HU,bw,[new c.FiY,v_],[new c.FiY,fl],...e]}]}}const LL=(0,cn.u3)(FA,!0),hN=(0,cn.u3)(s0,!0),UL=(0,cn.u3)(sN,!0),VL=(0,cn.u3)(oN,!0),BL=(0,cn.u3)(NF,!0),$L=(0,cn.u3)(qA,!0);var fN=L(4986);function KA(){return(0,Ar.e)((n,e)=>{let t,r=!1;n.subscribe((0,mr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function HL(n,e){return n===e}L(9568);var pN=L(3942);function YA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gN(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function mN(){if(!function TI(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}class p0{constructor(e){this._delegate=e}static fromBase64String(e){return mN(),new p0(uc.fromBase64String(e))}static fromUint8Array(e){return gN(),new p0(uc.fromUint8Array(e))}toBase64(){return mN(),this._delegate.toBase64()}toUint8Array(){return gN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function QA(n){return function qL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class WL{enableIndexedDbPersistence(e,t){return function PF(n,e){HR(n=mn(n,cr));const t=Qr(n);if(t._uninitializedComponentsProvider)throw new Se(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ei("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Km;return jR(t,i,new TA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function OF(n){HR(n=mn(n,cr));const e=Qr(n);if(e._uninitializedComponentsProvider)throw new Se(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ei("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Km;return jR(e,r,new DR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kF(n){if(n._initialized&&!n._terminated)throw new Se(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(r){if(!bo.D())return Promise.resolve();const i=r+"main";yield bo.delete(i)}),function(r){return t.apply(this,arguments)})(_S(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Rl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ei("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){VR(this._delegate,e,t,r)}enableNetwork(){return function LF(n){return function wF(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield SR(n),t=yield AR(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i.vu.delete(0),e0(i)}(t)}))}(Qr(n=mn(n,cr)))}(this._delegate)}disableNetwork(){return function UF(n){return function EF(n){return n.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield SR(n),t=yield AR(n);return e.setNetworkEnabled(!1),(r=(0,le.Z)(function*(i){const u=Je(i);u.vu.add(0),yield jm(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Qr(n=mn(n,cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,OR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function FF(n){return function(e){const t=new Kr;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function rF(n,e){return lA.apply(this,arguments)}(yield PA(e),t)})),t.promise}(Qr(n=mn(n,cr)))}(this._delegate)}onSnapshotsInSync(e){return function fL(n,e){return function DF(n,e){const t=new rC(e);return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Ym(n),i=t,Je(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return r=yield Ym(n),i=t,void Je(r).ku.delete(i);var r,i}))}}(Qr(n=mn(n,cr)),UA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xm(this,FA(this._delegate,e))}catch(t){throw ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new ma(this,s0(this._delegate,e))}catch(t){throw ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,function AF(n,e){if(n=mn(n,r0),kA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qi(n,null,(t=e,new sc(gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function DL(n,e,t){n=mn(n,cr);const r=Object.assign(Object.assign({},IL),t);return function(i){if(i.maxAttempts<1)throw new Se(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const g=new Kr;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const _=yield function xR(n){return sC(n).then(e=>e.datastore)}(i);new _F(i.asyncQueue,_,l,u,g).run()})),g.promise}(Qr(n),i=>e(new CL(n,i)),r)}(this._delegate,t=>e(new _N(this,t)))}batch(){return Qr(this._delegate),new vN(new cN(this._delegate,e=>Jm(this._delegate,e)))}loadBundle(e){return function VF(n,e){const t=Qr(n=mn(n,cr)),r=new MF;return function bF(n,e,t,r){const i=function(u,l){let g;return g="string"==typeof u?X1().encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return bR(_,D);if(_ instanceof ArrayBuffer)return bR(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new mF(_,l);var _}(t,Xv(e));n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function pF(n,e,t){const r=Je(n);var i;(i=(0,le.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function(j,Q){const oe=Je(j),Ae=Yr(Q.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Ee=>oe.qs.getBundleMetadata(Ee,Q.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(Ae)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(j=_).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);g._updateProgress(gR(_));const D=new Wk(_,u.localStore,l.serializer);let T=yield l.bc();for(;T;){const j=yield D.zu(T);j&&g._updateProgress(j),T=yield l.bc()}const N=yield D.complete();return yield Vl(u,N.Ju,void 0),yield function(j,Q){const oe=Je(j);return oe.persistence.runTransaction("Save bundle","readwrite",Ae=>oe.qs.saveBundleMetadata(Ae,Q))}(u.localStore,_),g._completeWith(N.progress),Promise.resolve(N.Hu)}catch(_){return Ei("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var j}),function(u,l,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield PA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function BF(n,e){return function TF(n,e){return n.asyncQueue.enqueue((0,le.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield oC(n),e)}))}(Qr(n=mn(n,cr)),e).then(t=>t?new qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _s(this,t):null)}}class _C extends GA{constructor(e){super(),this.firestore=e}convertBytes(e){return new p0(new uc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ma.forKey(t,this.firestore,null)}}class _N{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _C(e)}get(e){const t=Lp(e);return this._delegate.get(t).then(r=>new g0(this._firestore,new $l(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Lp(e);return r?(YA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}}class vN{constructor(e){this._delegate=e}set(e,t,r){const i=Lp(e);return r?(YA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new h0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new m0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Fp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Fp(e,new _C(e),t),i.set(t,u)),u}}Fp.INSTANCES=new WeakMap;class ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _C(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ma(t,new ur(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new ma(t,new ur(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xm(this.firestore,FA(this._delegate,e))}catch(t){throw ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,en.m9)(e))instanceof ur&&BR(this._delegate,e)}set(e,t){t=YA("DocumentReference.set",t);try{return t?aN(this._delegate,e,t):aN(this._delegate,e)}catch(r){throw ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?qA(this._delegate,e):qA(this._delegate,e,t,...r)}catch(i){throw ys(i,"updateDoc()","DocumentReference.update()")}}delete(){return function dL(n){return Jm(mn(n.firestore,cr),[new km(n._key,Ir.none())])}(this._delegate)}onSnapshot(...e){const t=wN(e),r=EN(e,i=>new g0(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function aL(n){n=mn(n,ur);const e=mn(n.firestore,cr),t=Qr(e),r=new Ph(e);return function IF(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(i,u,l){try{const g=yield function(_,D){const T=Je(_);return T.persistence.runTransaction("read document","readonly",N=>T.localDocuments.getDocument(N,D))}(i,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Se(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Gm(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield oC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new $l(e,r,n._key,i,new kp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function uL(n){n=mn(n,ur);const e=mn(n.firestore,cr);return MR(Qr(e),n._key,{source:"server"}).then(t=>WA(e,n,t))}(this._delegate):sN(this._delegate),t.then(r=>new g0(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ma(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}function ys(n,e,t){return n.message=n.message.replace(e,t),n}function wN(n){for(const e of n)if("object"==typeof e&&!QA(e))return e;return{}}function EN(n,e){var t,r;let i;return i=QA(n[0])?n[0]:QA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class g0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iN(this._delegate,e._delegate)}}class m0 extends g0{data(e){const t=this._delegate.data(e);return function R1(n,e){n||at()}(void 0!==t),t}}class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _C(e)}where(e,t,r){try{return new _s(this.firestore,Rh(this._delegate,function YF(n,e,t){const r=e,i=fC("where",n);return d0._create(i,r,t)}(e,t,r)))}catch(i){throw ys(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _s(this.firestore,Rh(this._delegate,function QF(n,e="asc"){const t=e,r=fC("orderBy",n);return zA._create(r,t)}(e,t)))}catch(r){throw ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _s(this.firestore,Rh(this._delegate,function JF(n){return LR("limit",n),pC._create("limit",n,"F")}(e)))}catch(t){throw ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _s(this.firestore,Rh(this._delegate,function XF(n){return LR("limitToLast",n),pC._create("limitToLast",n,"L")}(e)))}catch(t){throw ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _s(this.firestore,Rh(this._delegate,function eL(...n){return gC._create("startAt",n,!0)}(...e)))}catch(t){throw ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _s(this.firestore,Rh(this._delegate,function tL(...n){return gC._create("startAfter",n,!1)}(...e)))}catch(t){throw ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _s(this.firestore,Rh(this._delegate,function nL(...n){return mC._create("endBefore",n,!1)}(...e)))}catch(t){throw ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _s(this.firestore,Rh(this._delegate,function rL(...n){return mC._create("endAt",n,!0)}(...e)))}catch(t){throw ys(t,"endAt()","Query.endAt()")}}isEqual(e){return LA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function cL(n){n=mn(n,qi);const e=mn(n.firestore,cr),t=Qr(e),r=new Ph(e);return function CF(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(r=(0,le.Z)(function*(i,u,l){try{const g=yield YI(i,u,!0),_=new _R(u,g.ir),D=_.sc(g.documents),T=_.applyChanges(D,!1);l.resolve(T.snapshot)}catch(g){const _=Gm(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield oC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Nh(e,r,n,i))}(this._delegate):"server"===e?.source?function lL(n){n=mn(n,qi);const e=mn(n.firestore,cr),t=Qr(e),r=new Ph(e);return RR(t,n._query,{source:"server"}).then(i=>new Nh(e,r,n,i))}(this._delegate):oN(this._delegate),t.then(r=>new JA(this.firestore,new Nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wN(e),r=EN(e,i=>new JA(this.firestore,new Nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uN(this._delegate,t,r)}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}class KL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new m0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class JA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new m0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new KL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new m0(this._firestore,r))})}isEqual(e){return iN(this._delegate,e._delegate)}}class Xm extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ma(this.firestore,e):null}doc(e){try{return new ma(this.firestore,void 0===e?s0(this._delegate):s0(this._delegate,e))}catch(t){throw ys(t,"doc()","CollectionReference.doc()")}}add(e){return function hL(n,e){const t=mn(n.firestore,cr),r=s0(n),i=yC(n.converter,e);return Jm(t,[lC(Pp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ma(this.firestore,t))}isEqual(e){return BR(this._delegate,e._delegate)}withConverter(e){return new Xm(this.firestore,this._delegate.withConverter(e?Fp.getInstance(this.firestore,e):null))}}function Lp(n){return mn(n,ur)}class XA{constructor(...e){this._delegate=new Bl(...e)}static documentId(){return new XA(xr.keyField().canonicalString())}isEqual(e){return(e=(0,en.m9)(e))instanceof Bl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function TL(){return new VA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=function bL(){return new a0("deleteField")}();return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function SL(...n){return new GF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function AL(...n){return new qF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function xL(n){return new WF("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const YL={Firestore:yN,GeoPoint:uC,Timestamp:er,Blob:p0,Transaction:_N,WriteBatch:vN,DocumentReference:ma,DocumentSnapshot:g0,Query:_s,QueryDocumentSnapshot:m0,QuerySnapshot:JA,CollectionReference:Xm,FieldPath:XA,FieldValue:Up,setLogLevel:function ZL(n){!function aI(n){fa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function IN(n,e){return function XL(n,e=fN.z){return new Wr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ex(n,e){return IN(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function vC(n,e){return ex(n,e).pipe(Vs(void 0),KA(),(0,bt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=i.find(T=>T.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function CN(n,e,t){return vC(n,t).pipe(Ou((r,i)=>function t2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function n2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return tx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function jL(n,e=Wo.y){return n=n??HL,(0,Ar.e)((t,r)=>{let i,u=!0;t.subscribe((0,mr.x)(r,l=>{const g=e(l);(u||!n(i,g))&&(u=!1,i=g,r.next(l))}))})}(),(0,bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function tx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function DN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function JL(n){(function QL(n,e){n.INTERNAL.registerComponent(new zu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},YL)))})(n,(e,t)=>new yN(e,t,new WL)),n.registerVersion("@firebase/firestore-compat","0.3.10")}(pN.Z);class bN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Vs(void 0),KA(),yi(([r,i])=>i.length>0||!r),(0,bt.U)(([r,i])=>i),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ou((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DN(e);return CN(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return ex(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new TN(this.ref.doc(e),this.afs)}}class TN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=SN(r,t);return new bN(i,u,this.afs)}snapshotChanges(){return function e2(n,e){return IN(n,e).pipe(Vs(void 0),KA(),(0,bt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(cn.iC)}}class r2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vC(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),yi(t=>t.length>0),cn.iC):vC(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ou((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DN(e);return CN(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return ex(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),cn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(cn.iC)}}const i2=new c.OlP("angularfire2.enableFirestorePersistence"),s2=new c.OlP("angularfire2.firestore.persistenceSettings"),o2=new c.OlP("angularfire2.firestore.settings"),a2=new c.OlP("angularfire2.firestore.use-emulator");function SN(n,e=(t=>t)){return{query:e(n),ref:n}}let AN=(()=>{class n{constructor(t,r,i,u,l,g,_,D,T,N,j,Q,oe,Ae,Ee,gt,yt){this.schedulers=_;const rt=(0,Hi.on)(t,g,r),pt=T;N&&y_(rt,g,j,oe,Ae,Ee,Q,gt),[this.firestore,this.persistenceEnabled$]=(0,Hi.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const Vt=g.runOutsideAngular(()=>rt.firestore());if(u&&Vt.settings(u),pt&&Vt.useEmulator(...pt),i&&!No(l)){const an=()=>{try{return(0,nn.D)(Vt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(fi){return typeof console<"u"&&console.warn(fi),ot(!1)}};return[Vt,g.runOutsideAngular(an)]}return[Vt,ot(!1)]},[u,pt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=SN(i,r),g=this.schedulers.ngZone.run(()=>u);return new bN(g,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new r2(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new TN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Hi.Dh),c.LFG(Hi.xv,8),c.LFG(i2,8),c.LFG(o2,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(cn.HU),c.LFG(s2,8),c.LFG(a2,8),c.LFG(rh,8),c.LFG(p_,8),c.LFG(g_,8),c.LFG(m_,8),c.LFG(Xw,8),c.LFG(eE,8),c.LFG(tE,8),c.LFG(fl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),y0=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.firestore=r,this.firestore2=i}adduser(t){var r=this;return(0,le.Z)(function*(){yield r.firestore.collection("users").doc(t.id.toString()).set(t,{merge:!0})})()}getUsers(){var t=this;return(0,le.Z)(function*(){const r=LL(t.firestore2,"users");return(yield VL(r)).docs.map(u=>u.data())})()}setEnable(t,r){var i=this;return(0,le.Z)(function*(){yield $L(hN(i.firestore2,"users",r),{enabled:t})})()}getUserTypeById(t){var r=this;return(0,le.Z)(function*(){return(yield UL(hN(r.firestore2,"users",t))).data().type})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(rh),c.LFG(AN),c.LFG(f0))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vp=(()=>{class n{constructor(t,r){this.af=t,this.userService=r}login(t,r){var i=this;return(0,le.Z)(function*(){return i.af.signInWithEmailAndPassword(t,r)})()}register(t,r){var i=this;return(0,le.Z)(function*(){return(yield i.af.createUserWithEmailAndPassword(t,r)).user?.uid})()}getLoggedUser(){return this.af.authState}logout(){this.af.signOut()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(rh),c.LFG(y0))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function u2(n,e){1&n&&(c.TgZ(0,"li",6)(1,"button",7),c._uU(2,"Ingresar"),c.qZA()())}function c2(n,e){1&n&&(c.TgZ(0,"li",6)(1,"button",8),c._uU(2,"Registrarse"),c.qZA()())}function l2(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",6)(1,"button",9),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.logout())}),c._uU(2,"Salir"),c.qZA()()}}let d2=(()=>{class n{constructor(t){this.authService=t,this.isLoggedIn=!1}ngOnInit(){this.authService.getLoggedUser().subscribe(t=>{this.isLoggedIn=null!==t})}logout(){this.authService.logout()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vp))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-navbar"]],decls:8,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],["href","#",1,"navbar-brand"],["src","/assets/images/logo.png","alt","Logo","height","55"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLink","/login",1,"btn","btn-primary","mr-2"],["routerLink","/registro-paciente",1,"btn","btn-success"],[1,"btn","btn-success",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"nav",0)(1,"a",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",3)(4,"ul",4),c.YNc(5,u2,3,0,"li",5),c.YNc(6,c2,3,0,"li",5),c.YNc(7,l2,3,0,"li",5),c.qZA()()()),2&t&&(c.xp6(5),c.Q6J("ngIf",!r.isLoggedIn),c.xp6(1),c.Q6J("ngIf",!r.isLoggedIn),c.xp6(1),c.Q6J("ngIf",r.isLoggedIn))},dependencies:[Ci,Hu],styles:[".navbar[_ngcontent-%COMP%]{padding:10px}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 5px}"]}),n})(),h2=(()=>{class n{constructor(){this.title="Clinica"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&c._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[vy,d2]}),n})(),f2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:26,vars:0,consts:[[1,"home-container"],[1,"home-content"],[1,"footer"],[1,"container"],[1,"row"],[1,"col-md-3"],[1,"btn","btn-primary"],[1,"col-md-1"],["routerLink","/admin",1,"btn","btn-primary"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"div",1),c.TgZ(2,"footer",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),c._uU(7,"Conoce a nuestros profesionales"),c.qZA(),c._UZ(8,"p"),c.TgZ(9,"button",6),c._uU(10,"Ver Especialistas"),c.qZA()(),c._UZ(11,"div",7),c.TgZ(12,"div",5)(13,"h3"),c._uU(14,"Contacto"),c.qZA(),c._UZ(15,"p"),c.TgZ(16,"button",6),c._uU(17,"Contacto"),c.qZA()(),c._UZ(18,"div",7),c.TgZ(19,"div",5)(20,"h3"),c._uU(21,"\xbfEres administrador?"),c.qZA(),c.TgZ(22,"p"),c._uU(23,"Accede al backoffice"),c.qZA(),c.TgZ(24,"button",8),c._uU(25,"Ir al Admin Dashboard"),c.qZA()()()()()())},dependencies:[Hu],styles:[".home-container[_ngcontent-%COMP%]{height:calc(100vh - 85px);width:100%;background-image:url(/assets/images/background.png);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.home-content[_ngcontent-%COMP%]{text-align:center;color:#fff}footer[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0;background-color:#979797;padding:20px 0}footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:100%}footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{height:100%}footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}"]}),n})(),xN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Bp=(()=>{class n extends xN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const cc=new c.OlP("NgValueAccessor"),g2={provide:cc,useExisting:(0,c.Gpc)(()=>nx),multi:!0};let nx=(()=>{class n extends Bp{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.checked)})("blur",function(){return r.onTouched()})},features:[c._Bn([g2]),c.qOj]}),n})();const m2={provide:cc,useExisting:(0,c.Gpc)(()=>kh),multi:!0},_2=new c.OlP("CompositionEventMode");let kh=(()=>{class n extends xN{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function y2(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(_2,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([m2]),c.qOj]}),n})();const v2=!1;function Fh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function MN(n){return null!=n&&"number"==typeof n.length}const ns=new c.OlP("NgValidators"),Lh=new c.OlP("NgAsyncValidators"),w2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _n{static min(e){return function RN(n){return e=>{if(Fh(e.value)||Fh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function NN(n){return e=>{if(Fh(e.value)||Fh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function PN(n){return Fh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function ON(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function kN(n){return Fh(n.value)||w2.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function FN(n){return e=>Fh(e.value)||!MN(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function LN(n){return e=>MN(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function UN(n){if(!n)return wC;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Fh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return zN(e)}static composeAsync(e){return GN(e)}}function wC(n){return null}function VN(n){return null!=n}function BN(n){const e=(0,c.QGY)(n)?(0,nn.D)(n):n;if(v2&&!(0,c.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new c.vHH(-1101,t)}return e}function $N(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jN(n,e){return e.map(t=>t(n))}function HN(n){return n.map(e=>function E2(n){return!n.validate}(e)?e:t=>e.validate(t))}function zN(n){if(!n)return null;const e=n.filter(VN);return 0==e.length?null:function(t){return $N(jN(t,e))}}function rx(n){return null!=n?zN(HN(n)):null}function GN(n){if(!n)return null;const e=n.filter(VN);return 0==e.length?null:function(t){return function p2(...n){const e=(0,Ui.jO)(n),{args:t,keys:r}=Bc(n),i=new Wr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,D=l;for(let T=0;T<l;T++){let N=!1;(0,$a.Xf)(t[T]).subscribe((0,mr.x)(u,j=>{N||(N=!0,D--),g[T]=j},()=>_--,void 0,()=>{(!_||!N)&&(D||u.next(r?Nu(r,g):g),u.complete())}))}});return e?i.pipe(xi(e)):i}(jN(t,e).map(BN)).pipe((0,bt.U)($N))}}function ix(n){return null!=n?GN(HN(n)):null}function qN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function WN(n){return n._rawValidators}function ZN(n){return n._rawAsyncValidators}function sx(n){return n?Array.isArray(n)?n:[n]:[]}function EC(n,e){return Array.isArray(n)?n.includes(e):n===e}function KN(n,e){const t=sx(e);return sx(n).forEach(i=>{EC(t,i)||t.push(i)}),t}function YN(n,e){return sx(e).filter(t=>!EC(n,t))}class QN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ix(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vs extends QN{get formDirective(){return null}get path(){return null}}class Uh extends QN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class JN{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let $p=(()=>{class n extends JN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Uh,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),_0=(()=>{class n extends JN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vs,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();function XN(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const ux=!1,v0="VALID",CC="INVALID",ey="PENDING",w0="DISABLED";function cx(n){return(DC(n)?n.validators:n)||null}function lx(n,e){return(DC(e)?e.asyncValidators:n)||null}function DC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function eP(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,ux?function b2(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new c.vHH(1001,ux?function T2(n,e){return`Cannot find form control ${XN(n,e)}`}(e,t):"")}function tP(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,ux?function S2(n,e){return`Must supply a value for form control ${XN(n,e)}`}(e,i):"")})}class bC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===v0}get invalid(){return this.status===CC}get pending(){return this.status==ey}get disabled(){return this.status===w0}get enabled(){return this.status!==w0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(KN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YN(e,this._rawAsyncValidators))}hasValidator(e){return EC(this._rawValidators,e)}hasAsyncValidator(e){return EC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ey,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=w0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=v0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===v0||this.status===ey)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?w0:v0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ey,this._hasOwnPendingAsyncValidator=!0;const t=BN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?w0:this.errors?CC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ey)?ey:this._anyControlsHaveStatus(CC)?CC:v0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){DC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function A2(n){return Array.isArray(n)?rx(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function x2(n){return Array.isArray(n)?ix(n):n||null}(this._rawAsyncValidators)}}class E0 extends bC{constructor(e,t,r){super(cx(t),lx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){tP(this,!0,e),Object.keys(e).forEach(r=>{eP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class nP extends E0{}const jp=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>I0}),I0="always";function TC(n,e){return[...e.path,n]}function C0(n,e,t=I0){dx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function R2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&rP(n,e)})}(n,e),function P2(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function N2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&rP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function M2(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function SC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xC(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function AC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dx(n,e){const t=WN(n);null!==e.validator?n.setValidators(qN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ZN(n);null!==e.asyncValidator?n.setAsyncValidators(qN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();AC(e._rawValidators,i),AC(e._rawAsyncValidators,i)}function xC(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=WN(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=ZN(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return AC(e._rawValidators,r),AC(e._rawAsyncValidators,r),t}function rP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function px(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===kh?t=u:function F2(n){return Object.getPrototypeOf(n.constructor)===Bp}(u)?r=u:i=u}),i||r||t||null}function oP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function aP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const jl=class extends bC{constructor(e=null,t,r){super(cx(t),lx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),DC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=aP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){aP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},$2={provide:Uh,useExisting:(0,c.Gpc)(()=>MC)},lP=(()=>Promise.resolve())();let MC=(()=>{class n extends Uh{constructor(t,r,i,u,l,g){super(),this._changeDetectorRef=l,this.callSetDisabledState=g,this.control=new jl,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=px(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),fx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){lP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,c.D6c)(r);lP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?TC(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vs,9),c.Y36(ns,10),c.Y36(Lh,10),c.Y36(cc,10),c.Y36(c.sBO,8),c.Y36(jp,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([$2]),c.qOj,c.TTD]}),n})(),b0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const j2={provide:cc,useExisting:(0,c.Gpc)(()=>T0),multi:!0};let T0=(()=>{class n extends Bp{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([j2]),c.qOj]}),n})();const H2={provide:cc,useExisting:(0,c.Gpc)(()=>mx),multi:!0};let dP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),z2=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:dP}),n})(),mx=(()=>{class n extends Bp{constructor(t,r,i,u){super(t,r),this._registry=i,this._injector=u,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,c.f3M)(jp,{optional:!0})??I0}ngOnInit(){this._control=this._injector.get(Uh),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(z2),c.Y36(c.zs3))},n.\u0275dir=c.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[c._Bn([H2]),c.qOj]}),n})();const yx=new c.OlP("NgModelWithFormControlWarning"),q2={provide:Uh,useExisting:(0,c.Gpc)(()=>_x)};let _x=(()=>{class n extends Uh{set isDisabled(t){}constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=u,this.callSetDisabledState=l,this.update=new c.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=px(0,i)}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&SC(r,this,!1),C0(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}fx(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&SC(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(ns,10),c.Y36(Lh,10),c.Y36(cc,10),c.Y36(yx,8),c.Y36(jp,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[c._Bn([q2]),c.qOj,c.TTD]}),n})();const W2={provide:vs,useExisting:(0,c.Gpc)(()=>Hp)};let Hp=(()=>{class n extends vs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return C0(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){SC(t.control||null,t,!1),function L2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function sP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(SC(r||null,t),(n=>n instanceof jl)(i)&&(C0(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function iP(n,e){dx(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function O2(n,e){return xC(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dx(this.form,this),this._oldForm&&xC(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ns,10),c.Y36(Lh,10),c.Y36(jp,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([W2]),c.qOj,c.TTD]}),n})();const Y2={provide:Uh,useExisting:(0,c.Gpc)(()=>ty)};let ty=(()=>{class n extends Uh{set isDisabled(t){}constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=px(0,u)}ngOnChanges(t){this._added||this._setUpControl(),fx(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return TC(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(vs,13),c.Y36(ns,10),c.Y36(Lh,10),c.Y36(cc,10),c.Y36(yx,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([Y2]),c.qOj,c.TTD]}),n})();const Q2={provide:cc,useExisting:(0,c.Gpc)(()=>RC),multi:!0};function pP(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let RC=(()=>{class n extends Bp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=pP(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function J2(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([Q2]),c.qOj]}),n})(),gP=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(pP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(RC,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const X2={provide:cc,useExisting:(0,c.Gpc)(()=>Ex),multi:!0};function mP(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ex=(()=>{class n extends Bp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,l)=>{u._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const l=u;for(let g=0;g<l.length;g++){const D=this._getOptionValue(l[g].value);i.push(D)}}else{const l=r.options;for(let g=0;g<l.length;g++){const _=l[g];if(_.selected){const D=this._getOptionValue(_.value);i.push(D)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function eU(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([X2]),c.qOj]}),n})(),yP=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(mP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(mP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(Ex,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),SP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[dP]}),n})();class AP extends bC{constructor(e,t,r){super(cx(t),lx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){tP(this,!1,e),e.forEach((r,i)=>{eP(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function xP(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let NC=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return xP(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new E0(i,u)}record(t,r=null){const i=this._reduceControls(t);return new nP(i,r)}control(t,r,i){let u={};return this.useNonNullable?(xP(r)?u=r:(u.validators=r,u.asyncValidators=i),new jl(t,{...u,nonNullable:!0})):new jl(t,r,i)}array(t,r,i){const u=t.map(l=>this._createControl(l));return new AP(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof jl||t instanceof bC?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jp,useValue:t.callSetDisabledState??I0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[SP]}),n})(),lU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yx,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:jp,useValue:t.callSetDisabledState??I0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[SP]}),n})();function dU(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"Se requiere un correo"),c.qZA())}function hU(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"El formato del correo es incorrecto"),c.qZA())}function fU(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,dU,2,0,"div",14),c.YNc(2,hU,2,0,"div",14),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.loginForm.controls.email.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.loginForm.controls.email.hasError("email"))}}function pU(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"Se requiere una contrase\xf1a"),c.qZA())}function gU(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,pU,2,0,"div",14),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.loginForm.controls.password.hasError("required"))}}let mU=(()=>{class n{constructor(t,r,i){this.formBuilder=t,this.authService=r,this.router=i,this.submitted=!1,this.users=[{email:"admin@admin.com",password:"111111"},{email:"especialista@especialista.com",password:"333333"},{email:"paciente@paciente.com",password:"222222"}]}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[_n.required,_n.email]],password:["",_n.required]})}onSubmit(){var t=this;return(0,le.Z)(function*(){try{if(t.submitted=!0,t.loginForm.invalid)return void console.log("Error inputs");const{email:r,password:i}=t.loginForm.value;yield t.authService.login(r,i),t.router.navigate(["/"])}catch(r){console.log(r)}})()}onUserSelect(){const t=this.users[parseInt(this.selectedUser)];this.loginForm.get("email")?.setValue(t.email),this.loginForm.get("password")?.setValue(t.password)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(NC),c.Y36(Vp),c.Y36(si))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:26,vars:7,consts:[[1,"login-container"],[1,"login-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control"],["class","text-danger",4,"ngIf"],["type","password","id","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"form-check","form-check-inline"],["type","radio","name","options","value","0",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"form-check-label"],["type","radio","name","options","value","1",1,"form-check-input",3,"ngModel","ngModelChange","change"],["type","radio","name","options","value","2",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"text-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h2"),c._uU(3,"Login"),c.qZA(),c.TgZ(4,"form",2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(5,"div",3),c._UZ(6,"input",4),c.YNc(7,fU,3,2,"div",5),c.qZA(),c.TgZ(8,"div",3),c._UZ(9,"input",6),c.YNc(10,gU,2,1,"div",5),c.qZA(),c.TgZ(11,"button",7),c._uU(12,"Login"),c.qZA()(),c.TgZ(13,"div")(14,"div",8)(15,"input",9),c.NdJ("ngModelChange",function(u){return r.selectedUser=u})("change",function(){return r.onUserSelect()}),c.qZA(),c.TgZ(16,"label",10),c._uU(17,"Admin"),c.qZA()(),c.TgZ(18,"div",8)(19,"input",11),c.NdJ("ngModelChange",function(u){return r.selectedUser=u})("change",function(){return r.onUserSelect()}),c.qZA(),c.TgZ(20,"label",10),c._uU(21,"Especialista"),c.qZA()(),c.TgZ(22,"div",8)(23,"input",12),c.NdJ("ngModelChange",function(u){return r.selectedUser=u})("change",function(){return r.onUserSelect()}),c.qZA(),c.TgZ(24,"label",10),c._uU(25,"Paciente"),c.qZA()()()()()),2&t&&(c.xp6(4),c.Q6J("formGroup",r.loginForm),c.xp6(3),c.Q6J("ngIf",r.loginForm.controls.email.invalid&&(r.loginForm.controls.email.touched||r.submitted)),c.xp6(3),c.Q6J("ngIf",r.loginForm.controls.password.invalid&&(r.loginForm.controls.password.touched||r.submitted)),c.xp6(1),c.Q6J("disabled",r.loginForm.invalid),c.xp6(4),c.Q6J("ngModel",r.selectedUser),c.xp6(4),c.Q6J("ngModel",r.selectedUser),c.xp6(4),c.Q6J("ngModel",r.selectedUser))},dependencies:[Ci,b0,kh,mx,$p,_0,MC,Hp,ty],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100vh - 85px)}.login-form[_ngcontent-%COMP%]{width:70%;height:50%;padding:20px;border:1px solid #ccc;border-radius:4px;background-color:#b3b3b3}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ccc}"]}),n})();var yU=L(5032);const MP="firebasestorage.googleapis.com",RP="storageBucket";class Mr extends en.ZR{constructor(e,t,r=0){super(Cx(e),`Firebase Storage: ${t} (${Cx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var nr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(nr||(nr={})),nr))();function Cx(n){return"storage/"+n}function Dx(){return new Mr(nr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function NP(){return new Mr(nr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PP(){return new Mr(nr.CANCELED,"User canceled the upload/download.")}function OP(){return new Mr(nr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ny(n){return new Mr(nr.INVALID_ARGUMENT,n)}function kP(){return new Mr(nr.APP_DELETED,"The Firebase app was deleted.")}function FP(n){return new Mr(nr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function S0(n,e){return new Mr(nr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function A0(n){throw new Mr(nr.INTERNAL_ERROR,"Internal error: "+n)}class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch{return new rs(e,"")}if(""===r.path)return r;throw function xU(n){return new Mr(nr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+i+"(/(.*))?$","i");function D(pt){pt.path_=decodeURIComponent(pt.path)}const N=t.replace(/[.]/g,"\\."),rt=[{regex:g,indices:{bucket:1,path:3},postModify:function u(pt){"/"===pt.path.charAt(pt.path.length-1)&&(pt.path_=pt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===MP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let pt=0;pt<rt.length;pt++){const Vt=rt[pt],an=Vt.regex.exec(e);if(an){let Ao=an[Vt.indices.path];Ao||(Ao=""),r=new rs(an[Vt.indices.bucket],Ao),Vt.postModify(r);break}}if(null==r)throw function AU(n){return new Mr(nr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class OU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PC(n){return"string"==typeof n||n instanceof String}function LP(n){return bx()&&n instanceof Blob}function bx(){return typeof Blob<"u"&&!(0,en.UG)()}function Tx(n,e,t,r){if(r<e)throw ny(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ny(`Invalid value for '${n}'. Expected ${t} or less.`)}function Hl(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function UP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Vh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Vh||(Vh={})),Vh))();function VP(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class BU{constructor(e,t,r,i,u,l,g,_,D,T,N,j=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=g,this.errorCallback_=_,this.timeout_=D,this.progressCallback_=T,this.connectionFactory_=N,this.retry=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,oe)=>{this.resolve_=Q,this.reject_=oe,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,l=this.reject_,g=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());!function LU(n){return void 0!==n}(_)?u():u(_)}catch(_){l(_)}else if(null!==g){const _=Dx();_.serverResponse=g.getErrorText(),l(this.errorCallback_?this.errorCallback_(g,_):_)}else l(i.canceled?this.appDelete_?kP():PP():NP())};this.canceled_?t(0,new OC(!1,null,!0)):this.backoffId_=function kU(n,e,t){let r=1,i=null,u=null,l=!1,g=0;function _(){return 2===g}let D=!1;function T(...Ee){D||(D=!0,e.apply(null,Ee))}function N(Ee){i=setTimeout(()=>{i=null,n(Q,_())},Ee)}function j(){u&&clearTimeout(u)}function Q(Ee,...gt){if(D)return void j();if(Ee)return j(),void T.call(null,Ee,...gt);if(_()||l)return j(),void T.call(null,Ee,...gt);let rt;r<64&&(r*=2),1===g?(g=2,rt=0):rt=1e3*(r+Math.random()),N(rt)}let oe=!1;function Ae(Ee){oe||(oe=!0,j(),!D&&(null!==i?(Ee||(g=2),clearTimeout(i),N(0)):Ee||(g=1)))}return N(0),u=setTimeout(()=>{l=!0,Ae(!0)},t),Ae}((r,i)=>{if(i)return void r(!1,new OC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const g=u.getErrorCode()===Vh.NO_ERROR,_=u.getStatus();if(!g||VP(_,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===Vh.ABORT;return void r(!1,new OC(!1,null,T))}const D=-1!==this.successCodes_.indexOf(_);r(!0,new OC(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function FU(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class OC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function WU(...n){const e=function qU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(bx())return new Blob(n);throw new Mr(nr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const So={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sx{constructor(e,t){this.data=e,this.contentType=t||null}}function Ax(n,e){switch(n){case So.RAW:return new Sx(BP(e));case So.BASE64:case So.BASE64URL:return new Sx($P(n,e));case So.DATA_URL:return new Sx(function QU(n){const e=new jP(n);return e.base64?$P(So.BASE64,e.rest):function YU(n){let e;try{e=decodeURIComponent(n)}catch{throw S0(So.DATA_URL,"Malformed data URL.")}return BP(e)}(e.rest)}(e),function JU(n){return new jP(n).contentType}(e))}throw Dx()}function BP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function $P(n,e){switch(n){case So.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw S0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case So.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw S0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function KU(n){if(typeof atob>"u")throw function PU(n){return new Mr(nr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:S0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class jP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw S0(So.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function XU(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class lc{constructor(e,t){let r=0,i="";LP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(LP(this.data_)){const i=function ZU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new lc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new lc(r,!0)}}static getBlob(...e){if(bx()){const t=e.map(r=>r instanceof lc?r.data_:r);return new lc(WU.apply(null,t))}{const t=e.map(l=>PC(l)?Ax(So.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let g=0;g<l.length;g++)i[u++]=l[g]}),new lc(i,!0)}}uploadData(){return this.data_}}function xx(n){let e;try{e=JSON.parse(n)}catch{return null}return function VU(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function HP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function nV(n,e){return e}class ws{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||nV}}let kC=null;function x0(){if(kC)return kC;const n=[];n.push(new ws("bucket")),n.push(new ws("generation")),n.push(new ws("metageneration")),n.push(new ws("name","fullPath",!0));const t=new ws("name");t.xform=function e(u,l){return function rV(n){return!PC(n)||n.length<2?n:HP(n)}(l)},n.push(t);const i=new ws("size");return i.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(i),n.push(new ws("timeCreated")),n.push(new ws("updated")),n.push(new ws("md5Hash",null,!0)),n.push(new ws("cacheControl",null,!0)),n.push(new ws("contentDisposition",null,!0)),n.push(new ws("contentEncoding",null,!0)),n.push(new ws("contentLanguage",null,!0)),n.push(new ws("contentType",null,!0)),n.push(new ws("metadata","customMetadata",!0)),kC=n,kC}function zP(n,e,t){const r=xx(e);return null===r?null:function sV(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function iV(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new rs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Mx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const GP="prefixes",qP="items";class dc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hc(n){if(!n)throw Dx()}function FC(n,e){return function t(r,i){const u=zP(n,i,e);return hc(null!==u),u}}function ry(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function TU(){return new Mr(nr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function bU(){return new Mr(nr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function DU(n){return new Mr(nr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function SU(n){return new Mr(nr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function M0(n){const e=ry(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function CU(n){return new Mr(nr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function WP(n,e,t){const i=Hl(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,g=new dc(i,"GET",FC(n,t),l);return g.errorHandler=M0(e),g}function dV(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const g=Hl(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,T=new dc(g,"GET",function cV(n,e){return function t(r,i){const u=function uV(n,e,t){const r=xx(t);return null===r?null:function aV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[GP])for(const i of t[GP]){const u=i.replace(/\/$/,""),l=n._makeStorageReference(new rs(e,u));r.prefixes.push(l)}if(t[qP])for(const i of t[qP]){const u=n._makeStorageReference(new rs(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return hc(null!==u),u}}(n,e.bucket),D);return T.urlParams=u,T.errorHandler=ry(e),T}function KP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function gV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class LC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Rx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{hc(!1)}return hc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const vV={STATE_CHANGED:"state_changed"},Es={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Nx(n){switch(n){case"running":case"pausing":case"canceling":return Es.RUNNING;case"paused":return Es.PAUSED;case"success":return Es.SUCCESS;case"canceled":return Es.CANCELED;default:return Es.ERROR}}class wV{constructor(e,t,r){if(function UU(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function iy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let JP=null;class EV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw A0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw A0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw A0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw A0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw A0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class IV extends EV{initXhr(){this.xhr_.responseType="text"}}function au(){return JP?JP():new IV}class XP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=x0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(nr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(VP(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=NP()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(nr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function mV(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l=KP(e,r,i),g={name:l.fullPath},_=Hl(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},N=Mx(l,t),oe=new dc(_,"POST",function Q(Ae){let Ee;Rx(Ae);try{Ee=Ae.getResponseHeader("X-Goog-Upload-URL")}catch{hc(!1)}return hc(PC(Ee)),Ee},n.maxUploadRetryTime);return oe.urlParams=g,oe.headers=T,oe.body=N,oe.errorHandler=ry(e),oe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,au,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function yV(n,e,t,r){const _=new dc(t,"POST",function u(D){const T=Rx(D,["active","final"]);let N=null;try{N=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch{hc(!1)}N||hc(!1);const j=Number(N);return hc(!isNaN(j)),new LC(j,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=ry(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,au,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new LC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let l;try{l=function _V(n,e,t,r,i,u,l,g){const _=new LC(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function RU(){return new Mr(nr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const D=_.total-_.current;let T=D;i>0&&(T=Math.min(T,i));const N=_.current;let Q="";Q=0===T?"finalize":D===T?"upload, finalize":"upload";const oe={"X-Goog-Upload-Command":Q,"X-Goog-Upload-Offset":`${_.current}`},Ae=r.slice(N,N+T);if(null===Ae)throw OP();const rt=new dc(t,"POST",function Ee(pt,Vt){const an=Rx(pt,["active","final"]),fi=_.current+T,Ao=r.size();let sy;return sy="final"===an?FC(e,u)(pt,Vt):null,new LC(fi,Ao,"final"===an,sy)},e.maxUploadRetryTime);return rt.headers=oe,rt.body=Ae.uploadData(),rt.progressCallback=g||null,rt.errorHandler=ry(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const g=this._ref.storage._makeRequest(l,au,i,u,!1);this._request=g,g.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=WP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,au,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function YP(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function g(){let rt="";for(let pt=0;pt<2;pt++)rt+=Math.random().toString().slice(2);return rt}();l["Content-Type"]="multipart/related; boundary="+_;const D=KP(e,r,i),T=Mx(D,t),Q=lc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===Q)throw OP();const oe={name:D.fullPath},Ae=Hl(u,n.host,n._protocol),gt=n.maxUploadRetryTime,yt=new dc(Ae,"POST",FC(n,t),gt);return yt.urlParams=oe,yt.headers=l,yt.body=Q.uploadData(),yt.errorHandler=ry(e),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,au,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=PP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Nx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new wV(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Nx(this._state)){case Es.SUCCESS:iy(this._resolve.bind(null,this.snapshot))();break;case Es.CANCELED:case Es.ERROR:iy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Nx(this._state)){case Es.RUNNING:case Es.PAUSED:e.next&&iy(e.next.bind(e,this.snapshot))();break;case Es.SUCCESS:e.complete&&iy(e.complete.bind(e))();break;default:e.error&&iy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gp{constructor(e,t){this._service=e,this._location=t instanceof rs?t:rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gp(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HP(this._location.path)}get storage(){return this._service}get parent(){const e=function eV(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new rs(this._location.bucket,e);return new Gp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw FP(e)}}function tO(n,e,t){return Px.apply(this,arguments)}function Px(){return Px=(0,le.Z)(function*(n,e,t){const i=yield nO(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield tO(n,e,i.nextPageToken))}),Px.apply(this,arguments)}function nO(n,e){null!=e&&"number"==typeof e.maxResults&&Tx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=dV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,au)}function OV(n){n._throwIfRoot("getDownloadURL");const e=function hV(n,e,t){const i=Hl(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,g=new dc(i,"GET",function lV(n,e){return function t(r,i){const u=zP(n,i,e);return hc(null!==u),function oV(n,e,t,r){const i=xx(e);if(null===i||!PC(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(D=>{const N=n.fullPath;return Hl("/b/"+l(n.bucket)+"/o/"+l(N),t,r)+UP({alt:"media",token:D})})[0]}(u,i,n.host,n._protocol)}}(n,t),l);return g.errorHandler=M0(e),g}(n.storage,n._location,x0());return n.storage.makeRequestWithTokens(e,au).then(t=>{if(null===t)throw function NU(){return new Mr(nr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function rO(n,e){const t=function tV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new rs(n._location.bucket,t);return new Gp(n.storage,r)}function iO(n,e){if(n instanceof Ox){const t=n;if(null==t._bucket)throw function MU(){return new Mr(nr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RP+"' property when initializing the app?")}();const r=new Gp(t,t._bucket);return null!=e?iO(r,e):r}return void 0!==e?rO(n,e):n}function UV(n,e){if(e&&function FV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Ox)return function LV(n,e){return new Gp(n,e)}(n,e);throw ny("To use ref(service, url), the first argument must be a Storage instance.")}return iO(n,e)}function sO(n,e){const t=e?.[RP];return null==t?null:rs.makeFromBucketSpec(t,n)}class Ox{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=MP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?rs.makeFromBucketSpec(i,this._host):sO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?rs.makeFromBucketSpec(this._url,e):sO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,le.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,le.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gp(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new OU(kP());{const l=function GU(n,e,t,r,i,u,l=!0){const g=UP(n.urlParams),_=n.url+g,D=Object.assign({},n.headers);return function HU(n,e){e&&(n["X-Firebase-GMPID"]=e)}(D,e),function $U(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(D,t),function jU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(D,u),function zU(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(D,r),new BU(_,n.method,D,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,le.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const oO="@firebase/storage";function cO(n,e){return UV(n=(0,en.m9)(n),e)}function ZV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ox(t,r,i,e,ps.SDK_VERSION)}!function KV(){(0,ps._registerComponent)(new zu.wA("storage",ZV,"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(oO,"0.11.2",""),(0,ps.registerVersion)(oO,"0.11.2","esm2017")}();class UC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class dO{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new UC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new UC(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?l=>t(new UC(l,this,this._ref)):{next:t.next?l=>t.next(new UC(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class hO{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new zl(e,this._service))}get items(){return this._delegate.items.map(e=>new zl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function WV(n,e){return rO(n,e)}(this._delegate,e);return new zl(t,this.storage)}get root(){return new zl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new zl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new dO(function BV(n,e,t){return function xV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new XP(n,new lc(e),t)}(n=(0,en.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=So.RAW,r){this._throwIfRoot("putString");const i=Ax(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new dO(new XP(this._delegate,new lc(i.data,!0),u),this)}listAll(){return function zV(n){return function RV(n){const e={prefixes:[],items:[]};return tO(n,e).then(()=>e)}(n=(0,en.m9)(n))}(this._delegate).then(e=>new hO(e,this.storage))}list(e){return function HV(n,e){return nO(n=(0,en.m9)(n),e)}(this._delegate,e||void 0).then(t=>new hO(t,this.storage))}getMetadata(){return function $V(n){return function NV(n){n._throwIfRoot("getMetadata");const e=WP(n.storage,n._location,x0());return n.storage.makeRequestWithTokens(e,au)}(n=(0,en.m9)(n))}(this._delegate)}updateMetadata(e){return function jV(n,e){return function PV(n,e){n._throwIfRoot("updateMetadata");const t=function fV(n,e,t,r){const u=Hl(e.fullServerUrl(),n.host,n._protocol),g=Mx(t,r),D=n.maxOperationRetryTime,T=new dc(u,"PATCH",FC(n,r),D);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=g,T.errorHandler=M0(e),T}(n.storage,n._location,e,x0());return n.storage.makeRequestWithTokens(t,au)}(n=(0,en.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function GV(n){return OV(n=(0,en.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function qV(n){return function kV(n){n._throwIfRoot("deleteObject");const e=function pV(n,e){const r=Hl(e.fullServerUrl(),n.host,n._protocol),g=new dc(r,"DELETE",function l(_,D){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=M0(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,au)}(n=(0,en.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw FP(e)}}class fO{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(pO(e))throw ny("ref() expected a child path but got a URL, use refFromURL instead.");return new zl(cO(this._delegate,e),this)}refFromURL(e){if(!pO(e))throw ny("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rs.makeFromUrl(e,this._delegate.host)}catch{throw ny("refFromUrl() expected a valid full URL but got an invalid one.")}return new zl(cO(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function lO(n,e,t,r={}){!function VV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,en.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function pO(n){return/^[A-Za-z]+:\/\//.test(n)}function XV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new fO(t,r)}function gO(n){const e=function tB(n){return new Wr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function vU(n,e=fN.z){return(0,Ar.e)((t,r)=>{let i=null,u=null,l=null;const g=()=>{if(i){i.unsubscribe(),i=null;const D=u;u=null,r.next(D)}};function _(){const D=l+n,T=e.now();if(T<D)return i=this.schedule(void 0,D-T),void r.add(i);g()}t.subscribe((0,mr.x)(r,D=>{u=D,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{g(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,bt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function VC(n){return{getDownloadURL:()=>ot(void 0).pipe(cn.fc,xn(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>ot(void 0).pipe(cn.fc,xn(()=>n.getMetadata()),cn.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>VC(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>gO(n.put(e,t)),putString:(e,t,r)=>gO(n.putString(e,t,r)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}!function eB(n){const e={TaskState:Es,TaskEvent:vV,StringFormat:So,Storage:fO,Reference:zl};n.INTERNAL.registerComponent(new zu.wA("storage-compat",XV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(pN.Z);const nB=new c.OlP("angularfire2.storageBucket"),rB=new c.OlP("angularfire2.storage.maxUploadRetryTime"),iB=new c.OlP("angularfire2.storage.maxOperationRetryTime"),sB=new c.OlP("angularfire2.storage.use-emulator");let oB=(()=>{class n{constructor(t,r,i,u,l,g,_,D,T,N){const j=(0,Hi.on)(t,l,r);this.storage=(0,Hi.cc)(`${j.name}.storage.${i}`,"AngularFireStorage",j.name,()=>{const Q=l.runOutsideAngular(()=>j.storage(i||void 0)),oe=T;return oe&&Q.useEmulator(...oe),_&&Q.setMaxUploadRetryTime(_),D&&Q.setMaxOperationRetryTime(D),Q},[_,D])}ref(t){return VC(this.storage.ref(t))}refFromURL(t){return VC(this.storage.refFromURL(t))}upload(t,r,i){return VC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Hi.Dh),c.LFG(Hi.xv,8),c.LFG(nB,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(cn.HU),c.LFG(rB,8),c.LFG(iB,8),c.LFG(sB,8),c.LFG(fl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kx=(()=>{class n{constructor(t,r,i){this.authService=t,this.firestore=r,this.afStorage=i}uploadImage(t,r){const i=this.afStorage.ref(`/userImages/${r}`);return Ba(this.afStorage.upload(`/userImages/${r}`,t).snapshotChanges().pipe(function _U(){return(0,Ar.e)((n,e)=>{n.subscribe((0,mr.x)(e,yU.Z))})}()),Hc(()=>i.getDownloadURL()))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vp),c.LFG(f0),c.LFG(oB))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function uB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,aB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.nombre.hasError("required"))}}function cB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function lB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"Email con formato inv\xe1lido"),c.qZA())}function dB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,cB,2,0,"div",1),c.YNc(2,lB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.email.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.email.hasError("email"))}}function hB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function fB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,hB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.edad.hasError("required"))}}function pB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function gB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,pB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.obraSocial.hasError("required"))}}function mB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function yB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,mB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.apellido.hasError("required"))}}function _B(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function vB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"La contrase\xf1a debe tener al menos 6 caracteres"),c.qZA())}function wB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,_B,2,0,"div",1),c.YNc(2,vB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.password.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.password.hasError("minlength"))}}function EB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function IB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"El DNI debe ser un numero de 7 u 8 d\xedgitos"),c.qZA())}function CB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,EB,2,0,"div",1),c.YNc(2,IB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.dni.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.dni.hasError("pattern"))}}function DB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function bB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,DB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.imagen1.hasError("required"))}}function TB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function SB(n,e){if(1&n&&(c.TgZ(0,"div",22),c.YNc(1,TB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.imagen2.hasError("required"))}}function AB(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",2)(2,"h2"),c._uU(3,"Registro paciente"),c.qZA(),c.TgZ(4,"form",3),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onSubmit())}),c.TgZ(5,"div",4)(6,"div",5)(7,"div",6),c._UZ(8,"input",7),c.YNc(9,uB,2,1,"div",8),c.qZA(),c.TgZ(10,"div",6),c._UZ(11,"input",9),c.YNc(12,dB,3,2,"div",8),c.qZA(),c.TgZ(13,"div",6),c._UZ(14,"input",10),c.YNc(15,fB,2,1,"div",8),c.qZA(),c.TgZ(16,"div",6),c._UZ(17,"input",11),c.YNc(18,gB,2,1,"div",8),c.qZA()(),c.TgZ(19,"div",5)(20,"div",6),c._UZ(21,"input",12),c.YNc(22,yB,2,1,"div",8),c.qZA(),c.TgZ(23,"div",6),c._UZ(24,"input",13),c.YNc(25,wB,3,2,"div",8),c.qZA(),c.TgZ(26,"div",6),c._UZ(27,"input",14),c.YNc(28,CB,3,2,"div",8),c.qZA()(),c.TgZ(29,"div",4)(30,"div",15)(31,"label",16),c._uU(32,"Imagen 1:"),c.qZA(),c.TgZ(33,"input",17),c.NdJ("change",function(i){c.CHM(t);const u=c.oxw();return c.KtG(u.handleFileInputImagen1(i))}),c.qZA(),c.YNc(34,bB,2,1,"div",8),c.qZA(),c.TgZ(35,"div",15)(36,"label",18),c._uU(37,"Imagen 2:"),c.qZA(),c.TgZ(38,"input",19),c.NdJ("change",function(i){c.CHM(t);const u=c.oxw();return c.KtG(u.handleFileInputImagen2(i))}),c.qZA(),c.YNc(39,SB,2,1,"div",8),c.qZA()(),c.TgZ(40,"button",20),c._uU(41,"Registrarse"),c.qZA(),c.TgZ(42,"div")(43,"p"),c._uU(44,"\xbfDeseas registrarte como especialista? "),c.TgZ(45,"a",21),c._uU(46,"\xa1Has click aqu\xed!"),c.qZA()()()()()(),c.BQk()}if(2&n){const t=c.oxw();c.xp6(4),c.Q6J("formGroup",t.registrationForm),c.xp6(5),c.Q6J("ngIf",t.registrationForm.controls.nombre.invalid&&(t.registrationForm.controls.nombre.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.email.invalid&&(t.registrationForm.controls.email.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.edad.invalid&&(t.registrationForm.controls.edad.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.obraSocial.invalid&&(t.registrationForm.controls.obraSocial.touched||t.submitted)),c.xp6(4),c.Q6J("ngIf",t.registrationForm.controls.apellido.invalid&&(t.registrationForm.controls.apellido.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.password.invalid&&(t.registrationForm.controls.password.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.dni.invalid&&(t.registrationForm.controls.dni.touched||t.submitted)),c.xp6(6),c.Q6J("ngIf",t.registrationForm.controls.imagen1.invalid&&(t.registrationForm.controls.imagen1.touched||t.submitted)),c.xp6(5),c.Q6J("ngIf",t.registrationForm.controls.imagen2.invalid&&(t.registrationForm.controls.imagen2.touched||t.submitted))}}function xB(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",23),c._UZ(2,"div",24),c.qZA(),c.BQk())}let MB=(()=>{class n{constructor(t,r,i,u,l){this.formBuilder=t,this.authService=r,this.userService=i,this.imageService=u,this.router=l,this.submitted=!1,this.isLoading=!1}ngOnInit(){this.registrationForm=this.formBuilder.group({nombre:["",_n.required],apellido:["",_n.required],edad:["",_n.required],dni:["",[_n.required,_n.pattern("^[0-9]{7,8}$")]],obraSocial:["",_n.required],email:["",[_n.required,_n.email]],password:["",[_n.required,_n.minLength(6)]],imagen1:["",_n.required],imagen2:["",_n.required]})}onSubmit(){var t=this;return(0,le.Z)(function*(){if(t.isLoading=!0,t.submitted=!0,t.registrationForm.invalid)return void console.log("Error inputs");var r=t.registrationForm.value;const i=yield t.authService.register(r.email,r.password),u=t.imageService.uploadImage(t.registrationForm.get("imagen1").value,i+"_imagen1").toPromise(),l=t.imageService.uploadImage(t.registrationForm.get("imagen2").value,i+"_imagen2").toPromise(),g=yield(0,nn.D)(u).toPromise(),_=yield(0,nn.D)(l).toPromise();r.id=i,r.type="paciente",r.verified=!1,r.imagen1=g,r.imagen2=_,yield t.userService.adduser(r),t.isLoading=!1,t.router.navigate(["/"])})()}handleFileInputImagen1(t){const r=t.target.files[0];this.registrationForm.get("imagen1").setValue(r)}handleFileInputImagen2(t){const r=t.target.files[0];this.registrationForm.get("imagen2").setValue(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(NC),c.Y36(Vp),c.Y36(y0),c.Y36(kx),c.Y36(si))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-registro-paciente"]],decls:3,vars:2,consts:[[1,"registration-container"],[4,"ngIf"],[1,"registration-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control"],["type","number","id","edad","formControlName","edad","placeholder","Edad",1,"form-control"],["type","text","id","obraSocial","formControlName","obraSocial","placeholder","Obra Social",1,"form-control"],["type","text","id","apellido","formControlName","apellido","placeholder","Apellido",1,"form-control"],["type","password","id","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control"],["type","number","id","dni","formControlName","dni","placeholder","DNI",1,"form-control"],[1,"form-group","col-md-6"],["for","imagen1"],["type","file","accept","image/*","id","imagen1",1,"form-control",3,"change"],["for","imagen2"],["type","file","accept","image/*","id","imagen2",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary"],["routerLink","/registro-especialista"],[1,"text-danger"],[1,"spinner-container"],[1,"spinner"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.YNc(1,AB,47,10,"ng-container",1),c.YNc(2,xB,3,0,"ng-container",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngIf",!r.isLoading),c.xp6(1),c.Q6J("ngIf",r.isLoading))},dependencies:[Ci,Hu,b0,kh,T0,$p,_0,Hp,ty],styles:[".registration-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100vh - 85px);background-image:url(/assets/images/background.png);background-size:cover;background-position:center}.registration-form[_ngcontent-%COMP%]{width:70%;padding:20px;border:1px solid #ccc;border-radius:4px;background-color:#b3b3b3}.registration-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ccc}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:3px solid #474747;border-top-color:#888;animation:_ngcontent-%COMP%_spin 1s infinite linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),n})(),RB=(()=>{class n{constructor(t){this.firestore=t}getEspecialidades(){return this.itemsCollection=this.firestore.collection("especialidades"),this.todasLasEspecialidades=this.itemsCollection.valueChanges()}newEspecialidad(t){var r=this;return(0,le.Z)(function*(){yield r.firestore.collection("especialidades").doc(t).set({name:t})})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(AN))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NB(n,e){if(1&n&&(c.TgZ(0,"option",7),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.Oqu(t)}}let PB=(()=>{class n{constructor(t){this.especialidadService=t,this.especialidades=[],this.filteredEspecialidades=[],this.searchInput=new jl,this.especialidadSeleccionada=new c.vpe,this.selectedEspecialidad=new jl,this.searchInput=new jl,this.selectedEspecialidad=new jl}ngOnInit(){this.especialidadService.getEspecialidades().subscribe(t=>{this.especialidades=t.map(r=>r.name.charAt(0).toUpperCase()+r.name.slice(1)),this.filteredEspecialidades=this.especialidades})}filterEspecialidades(){const t=this.searchInput.value.toLowerCase();this.filteredEspecialidades=this.especialidades.filter(r=>r.toLowerCase().includes(t))}createEspecialidad(){const t=this.searchInput.value.trim();t&&!this.especialidades.includes(t)&&(this.especialidadService.newEspecialidad(t),this.especialidades.push(t),this.searchInput.setValue(""))}onEspecialidadSelected(){this.especialidadSeleccionada.emit(this.selectedEspecialidad.value)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(RB))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-especialidades-selector"]],outputs:{especialidadSeleccionada:"especialidadSeleccionada"},decls:10,vars:3,consts:[[1,"select-especialidad"],["for","especialidad"],[1,"create-especialidad"],["type","text","placeholder","Buscar o crear nueva especialidad.",1,"form-control",3,"formControl","input"],["type","button",1,"btn","btn-primary",3,"click"],["id","especialidad",1,"form-control",3,"formControl","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"label",1),c._uU(2,"Especialidad:"),c.qZA(),c.TgZ(3,"div")(4,"div",2)(5,"input",3),c.NdJ("input",function(){return r.filterEspecialidades()}),c.qZA(),c.TgZ(6,"button",4),c.NdJ("click",function(){return r.createEspecialidad()}),c._uU(7,"Crear"),c.qZA()(),c.TgZ(8,"select",5),c.NdJ("change",function(){return r.onEspecialidadSelected()}),c.YNc(9,NB,2,2,"option",6),c.qZA()()()),2&t&&(c.xp6(5),c.Q6J("formControl",r.searchInput),c.xp6(3),c.Q6J("formControl",r.selectedEspecialidad),c.xp6(1),c.Q6J("ngForOf",r.filteredEspecialidades))},dependencies:[Js,gP,yP,kh,RC,$p,_x],styles:[".select-especialidad[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:5px 0}.create-especialidad[_ngcontent-%COMP%]{display:flex;flex-direction:row}.create-especialidad[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}"]}),n})();function OB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function kB(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,OB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.nombre.hasError("required"))}}function FB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function LB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"Email con formato inv\xe1lido"),c.qZA())}function UB(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,FB,2,0,"div",1),c.YNc(2,LB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.email.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.email.hasError("email"))}}function VB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function BB(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,VB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.edad.hasError("required"))}}function $B(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function jB(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,$B,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.apellido.hasError("required"))}}function HB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function zB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"La contrase\xf1a debe tener al menos 6 caracteres"),c.qZA())}function GB(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,HB,2,0,"div",1),c.YNc(2,zB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.password.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.password.hasError("minlength"))}}function qB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function WB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"El DNI debe ser un numero de 7 u 8 d\xedgitos"),c.qZA())}function ZB(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,qB,2,0,"div",1),c.YNc(2,WB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.dni.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.dni.hasError("pattern"))}}function KB(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function YB(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,KB,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.imagen.hasError("required"))}}function QB(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",2)(2,"h2"),c._uU(3,"Registro especialista"),c.qZA(),c.TgZ(4,"form",3),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onSubmit())}),c.TgZ(5,"div",4)(6,"div",5)(7,"div",6),c._UZ(8,"input",7),c.YNc(9,kB,2,1,"div",8),c.qZA(),c.TgZ(10,"div",6),c._UZ(11,"input",9),c.YNc(12,UB,3,2,"div",8),c.qZA(),c.TgZ(13,"div",6),c._UZ(14,"input",10),c.YNc(15,BB,2,1,"div",8),c.qZA()(),c.TgZ(16,"div",5)(17,"div",6),c._UZ(18,"input",11),c.YNc(19,jB,2,1,"div",8),c.qZA(),c.TgZ(20,"div",6),c._UZ(21,"input",12),c.YNc(22,GB,3,2,"div",8),c.qZA(),c.TgZ(23,"div",6),c._UZ(24,"input",13),c.YNc(25,ZB,3,2,"div",8),c.qZA()(),c.TgZ(26,"div",14)(27,"div",15)(28,"label",16),c._uU(29,"Imagen:"),c.qZA(),c.TgZ(30,"input",17),c.NdJ("change",function(i){c.CHM(t);const u=c.oxw();return c.KtG(u.handleFileInput(i))}),c.qZA(),c.YNc(31,YB,2,1,"div",8),c.qZA(),c.TgZ(32,"div",15)(33,"app-especialidades-selector",18),c.NdJ("especialidadSeleccionada",function(i){c.CHM(t);const u=c.oxw();return c.KtG(u.onEspecialidadSelected(i))}),c.qZA()()(),c.TgZ(34,"button",19),c._uU(35,"Registrarse"),c.qZA(),c.TgZ(36,"div")(37,"p"),c._uU(38,"\xbfDeseas registrarte como paciente? "),c.TgZ(39,"a",20),c._uU(40,"\xa1Has click aqu\xed!"),c.qZA()()()()()(),c.BQk()}if(2&n){const t=c.oxw();c.xp6(4),c.Q6J("formGroup",t.registrationForm),c.xp6(5),c.Q6J("ngIf",t.registrationForm.controls.nombre.invalid&&(t.registrationForm.controls.nombre.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.email.invalid&&(t.registrationForm.controls.email.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.edad.invalid&&(t.registrationForm.controls.edad.touched||t.submitted)),c.xp6(4),c.Q6J("ngIf",t.registrationForm.controls.apellido.invalid&&(t.registrationForm.controls.apellido.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.password.invalid&&(t.registrationForm.controls.password.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.dni.invalid&&(t.registrationForm.controls.dni.touched||t.submitted)),c.xp6(6),c.Q6J("ngIf",t.registrationForm.controls.imagen.invalid&&(t.registrationForm.controls.imagen.touched||t.submitted))}}function JB(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",22),c._UZ(2,"div",23),c.qZA(),c.BQk())}let XB=(()=>{class n{constructor(t,r,i,u,l){this.formBuilder=t,this.authService=r,this.userService=i,this.imageService=u,this.router=l,this.submitted=!1,this.isLoading=!1}ngOnInit(){this.registrationForm=this.formBuilder.group({nombre:["",_n.required],apellido:["",_n.required],edad:["",_n.required],dni:["",[_n.required,_n.pattern("^[0-9]{7,8}$")]],especialidad:["",_n.required],email:["",[_n.required,_n.email]],password:["",[_n.required,_n.minLength(6)]],imagen:[""]})}onSubmit(){var t=this;return(0,le.Z)(function*(){if(t.isLoading=!0,t.submitted=!0,t.registrationForm.invalid)return void console.log(t.registrationForm.errors);var r=t.registrationForm.value;const i=yield t.authService.register(r.email,r.password),u=t.imageService.uploadImage(t.registrationForm.get("imagen").value,i).toPromise(),l=yield(0,nn.D)(u).toPromise();r.id=i,r.type="especialista",r.verified=!1,r.enabled=!1,r.imagen=l,yield t.userService.adduser(r),t.isLoading=!1,t.router.navigate(["/"])})()}onEspecialidadSelected(t){this.registrationForm.patchValue({especialidad:t})}handleFileInput(t){const r=t.target.files[0];this.registrationForm.get("imagen").setValue(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(NC),c.Y36(Vp),c.Y36(y0),c.Y36(kx),c.Y36(si))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-registro-especialista"]],decls:3,vars:2,consts:[[1,"registration-container"],[4,"ngIf"],[1,"registration-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control"],["type","number","id","edad","formControlName","edad","placeholder","Edad",1,"form-control"],["type","text","id","apellido","formControlName","apellido","placeholder","Apellido",1,"form-control"],["type","password","id","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control"],["type","number","id","dni","formControlName","dni","placeholder","DNI",1,"form-control"],[1,"col-md-12","especialidad-row"],[1,"form-group","col-md-6"],["for","imagen"],["type","file","accept","image/*","id","imagen",1,"form-control",3,"change"],[3,"especialidadSeleccionada"],["type","submit",1,"btn","btn-primary"],["routerLink","/registro-paciente"],[1,"text-danger"],[1,"spinner-container"],[1,"spinner"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.YNc(1,QB,41,8,"ng-container",1),c.YNc(2,JB,3,0,"ng-container",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngIf",!r.isLoading),c.xp6(1),c.Q6J("ngIf",r.isLoading))},dependencies:[Ci,Hu,b0,kh,T0,$p,_0,Hp,ty,PB],styles:[".registration-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100vh - 85px);background-image:url(/assets/images/background.png);background-size:cover;background-position:center}.registration-form[_ngcontent-%COMP%]{width:70%;padding:20px;border:1px solid #ccc;border-radius:4px;background-color:#b3b3b3}.registration-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ccc}.especialidad-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.especialidad-row[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%]{width:49%}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:3px solid #474747;border-top-color:#888;animation:_ngcontent-%COMP%_spin 1s infinite linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),n})(),e$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dashboard"]],decls:1,vars:0,consts:[[1,"dashboard-container"]],template:function(t,r){1&t&&c._UZ(0,"div",0)},styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100vh - 85px);background-image:url(/assets/images/background.png);background-size:cover;background-position:center}"]}),n})();function t$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"input",11),c.NdJ("ngModelChange",function(i){c.CHM(t);const u=c.oxw().$implicit;return c.KtG(u.enabled=i)})("ngModelChange",function(i){c.CHM(t);const u=c.oxw().$implicit,l=c.oxw();return c.KtG(l.onEnabledChange(i,u.id))}),c.qZA()}if(2&n){const t=c.oxw().$implicit;c.Q6J("ngModel",t.enabled)}}const n$=function(){return{"background-color":"#b3b3b3"}},r$=function(){return{}};function i$(n,e){if(1&n&&(c.TgZ(0,"tr")(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.TgZ(13,"td",9),c.YNc(14,t$,1,1,"input",10),c.qZA()()),2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.type),c.xp6(2),c.Oqu(t.nombre),c.xp6(2),c.Oqu(t.apellido),c.xp6(2),c.Oqu(t.edad),c.xp6(2),c.Oqu(t.dni),c.xp6(2),c.Oqu(t.email),c.xp6(1),c.Q6J("ngStyle","especialista"!==t.type?c.DdM(8,n$):c.DdM(9,r$)),c.xp6(1),c.Q6J("ngIf","especialista"==t.type)}}let s$=(()=>{class n{constructor(t,r){this.authService=t,this.userService=r,this.users=[]}ngOnInit(){var t=this;return(0,le.Z)(function*(){t.users=yield t.userService.getUsers()})()}onEnabledChange(t,r){var i=this;return(0,le.Z)(function*(){yield i.userService.setEnable(t,r)})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vp),c.Y36(y0))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-user-list"]],decls:31,vars:1,consts:[[1,"container"],[1,"table-container"],[1,"row","buttons-container"],[1,"col-md-4"],["routerLink","/registro-paciente",1,"btn","btn-primary"],["routerLink","/registro-especialista",1,"btn","btn-warning"],["routerLink","/admin/registro-admin",1,"btn","btn-success"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["type","checkbox",3,"ngModel","ngModelChange",4,"ngIf"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),c._uU(5,"Crear paciente"),c.qZA()(),c.TgZ(6,"div",3)(7,"button",5),c._uU(8,"Crear especialista"),c.qZA()(),c.TgZ(9,"div",3)(10,"button",6),c._uU(11,"Crear administrador"),c.qZA()()(),c.TgZ(12,"table",7)(13,"thead")(14,"tr")(15,"th"),c._uU(16,"Tipo"),c.qZA(),c.TgZ(17,"th"),c._uU(18,"Nombre"),c.qZA(),c.TgZ(19,"th"),c._uU(20,"Apellido"),c.qZA(),c.TgZ(21,"th"),c._uU(22,"Edad"),c.qZA(),c.TgZ(23,"th"),c._uU(24,"DNI"),c.qZA(),c.TgZ(25,"th"),c._uU(26,"Mail"),c.qZA(),c.TgZ(27,"th"),c._uU(28,"Habilitado"),c.qZA()()(),c.TgZ(29,"tbody"),c.YNc(30,i$,15,10,"tr",8),c.qZA()()()()),2&t&&(c.xp6(30),c.Q6J("ngForOf",r.users))},dependencies:[Js,Ci,bs,Hu,nx,$p,MC],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100vh - 85px)}@media screen and (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:none}}.table-container[_ngcontent-%COMP%]{width:70%;padding:20px;border:1px solid #ccc;border-radius:4px;background-color:#b3b3b3}.table-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{margin:0 0 10px}.table-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]{border:1px solid #212529}"]}),n})();function o$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function a$(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,o$,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.nombre.hasError("required"))}}function u$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function c$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"Email con formato inv\xe1lido"),c.qZA())}function l$(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,u$,2,0,"div",1),c.YNc(2,c$,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.email.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.email.hasError("email"))}}function d$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function h$(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,d$,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.edad.hasError("required"))}}function f$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function p$(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,f$,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.apellido.hasError("required"))}}function g$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function m$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"La contrase\xf1a debe tener al menos 6 caracteres"),c.qZA())}function y$(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,g$,2,0,"div",1),c.YNc(2,m$,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.password.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.password.hasError("minlength"))}}function _$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function v$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"El DNI debe ser un numero de 7 u 8 d\xedgitos"),c.qZA())}function w$(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,_$,2,0,"div",1),c.YNc(2,v$,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.dni.hasError("required")),c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.dni.hasError("pattern"))}}function E$(n,e){1&n&&(c.TgZ(0,"div"),c._uU(1,"*"),c.qZA())}function I$(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,E$,2,0,"div",1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.registrationForm.controls.imagen.hasError("required"))}}function C$(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",2)(2,"h2"),c._uU(3,"Registro administrador"),c.qZA(),c.TgZ(4,"form",3),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onSubmit())}),c.TgZ(5,"div",4)(6,"div",5)(7,"div",6),c._UZ(8,"input",7),c.YNc(9,a$,2,1,"div",8),c.qZA(),c.TgZ(10,"div",6),c._UZ(11,"input",9),c.YNc(12,l$,3,2,"div",8),c.qZA(),c.TgZ(13,"div",6),c._UZ(14,"input",10),c.YNc(15,h$,2,1,"div",8),c.qZA()(),c.TgZ(16,"div",5)(17,"div",6),c._UZ(18,"input",11),c.YNc(19,p$,2,1,"div",8),c.qZA(),c.TgZ(20,"div",6),c._UZ(21,"input",12),c.YNc(22,y$,3,2,"div",8),c.qZA(),c.TgZ(23,"div",6),c._UZ(24,"input",13),c.YNc(25,w$,3,2,"div",8),c.qZA()(),c.TgZ(26,"div",4)(27,"div",14)(28,"label",15),c._uU(29,"Imagen:"),c.qZA(),c.TgZ(30,"input",16),c.NdJ("change",function(i){c.CHM(t);const u=c.oxw();return c.KtG(u.handleFileInput(i))}),c.qZA(),c.YNc(31,I$,2,1,"div",8),c.qZA()(),c.TgZ(32,"button",17),c._uU(33,"Register"),c.qZA()()()(),c.BQk()}if(2&n){const t=c.oxw();c.xp6(4),c.Q6J("formGroup",t.registrationForm),c.xp6(5),c.Q6J("ngIf",t.registrationForm.controls.nombre.invalid&&(t.registrationForm.controls.nombre.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.email.invalid&&(t.registrationForm.controls.email.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.edad.invalid&&(t.registrationForm.controls.edad.touched||t.submitted)),c.xp6(4),c.Q6J("ngIf",t.registrationForm.controls.apellido.invalid&&(t.registrationForm.controls.apellido.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.password.invalid&&(t.registrationForm.controls.password.touched||t.submitted)),c.xp6(3),c.Q6J("ngIf",t.registrationForm.controls.dni.invalid&&(t.registrationForm.controls.dni.touched||t.submitted)),c.xp6(6),c.Q6J("ngIf",t.registrationForm.controls.imagen.invalid&&(t.registrationForm.controls.imagen.touched||t.submitted))}}function D$(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",19),c._UZ(2,"div",20),c.qZA(),c.BQk())}const b$=[{path:"home",component:f2},{path:"login",component:mU},{path:"registro-paciente",component:MB},{path:"registro-especialista",component:XB},{path:"admin",component:e$},{path:"admin/user-list",component:s$},{path:"admin/registro-admin",component:(()=>{class n{constructor(t,r,i,u,l){this.formBuilder=t,this.authService=r,this.userService=i,this.imageService=u,this.router=l,this.submitted=!1,this.isLoading=!1}ngOnInit(){this.registrationForm=this.formBuilder.group({nombre:["",_n.required],apellido:["",_n.required],edad:["",_n.required],dni:["",[_n.required,_n.pattern("^[0-9]{7,8}$")]],email:["",[_n.required,_n.email]],password:["",[_n.required,_n.minLength(6)]],imagen:["",_n.required]})}onSubmit(){var t=this;return(0,le.Z)(function*(){if(t.isLoading=!0,t.submitted=!0,t.registrationForm.invalid)return void console.log("Error inputs");var r=t.registrationForm.value;const i=yield t.authService.register(r.email,r.password),u=t.imageService.uploadImage(t.registrationForm.get("imagen").value,i).toPromise(),l=yield(0,nn.D)(u).toPromise();r.id=i,r.type="admin",r.imagen=l,yield t.userService.adduser(r),t.isLoading=!1,t.router.navigate(["/admin"])})()}handleFileInput(t){const r=t.target.files[0];this.registrationForm.get("imagen").setValue(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(NC),c.Y36(Vp),c.Y36(y0),c.Y36(kx),c.Y36(si))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-registro-admin"]],decls:3,vars:2,consts:[[1,"registration-container"],[4,"ngIf"],[1,"registration-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control"],["type","number","id","edad","formControlName","edad","placeholder","Edad",1,"form-control"],["type","text","id","apellido","formControlName","apellido","placeholder","Apellido",1,"form-control"],["type","password","id","password","formControlName","password","placeholder","Contrase\xf1a",1,"form-control"],["type","number","id","dni","formControlName","dni","placeholder","DNI",1,"form-control"],[1,"form-group","col-md-6"],["for","imagen"],["type","file","accept","image/*","id","imagen",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"],[1,"spinner-container"],[1,"spinner"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.YNc(1,C$,34,8,"ng-container",1),c.YNc(2,D$,3,0,"ng-container",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngIf",!r.isLoading),c.xp6(1),c.Q6J("ngIf",r.isLoading))},dependencies:[Ci,b0,kh,T0,$p,_0,Hp,ty],styles:[".registration-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100vh - 85px);background-image:url(/assets/images/background.png);background-size:cover;background-position:center}.registration-form[_ngcontent-%COMP%]{width:70%;padding:20px;border:1px solid #ccc;border-radius:4px;background-color:#b3b3b3}.registration-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ccc}"]}),n})()},{path:"",redirectTo:"home",pathMatch:"full"}];let T$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[LD.forRoot(b$),LD]}),n})();const mO={apiKey:"AIzaSyAiqrTq7v7mqUwxYtYOuSXnl2jeTmfISVY",authDomain:"clinica-9f1c7.firebaseapp.com",projectId:"clinica-9f1c7",storageBucket:"clinica-9f1c7.appspot.com",messagingSenderId:"547183330325",appId:"1:547183330325:web:24ef8521b0050329627a1c"};let S$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[h2]}),n.\u0275inj=c.cJS({imports:[Go,T$,cU,lU,Hi.hO.initializeApp(mO),Jx(()=>GD(mO)),FL(()=>BL())]}),n})();Jh().bootstrapModule(S$).catch(n=>console.error(n))},9751:(Et,Te,L)=>{L.d(Te,{y:()=>ge});var c=L(930),$=L(727),k=L(8822),ee=L(9635),ie=L(2416),se=L(576),_e=L(2806);let ge=(()=>{class J{constructor(be){be&&(this._subscribe=be)}lift(be){const qe=new J;return qe.source=this,qe.operator=be,qe}subscribe(be,qe,st){const pe=function z(J){return J&&J instanceof c.Lv||function G(J){return J&&(0,se.m)(J.next)&&(0,se.m)(J.error)&&(0,se.m)(J.complete)}(J)&&(0,$.Nn)(J)}(be)?be:new c.Hp(be,qe,st);return(0,_e.x)(()=>{const{operator:xe,source:Oe}=this;pe.add(xe?xe.call(pe,Oe):Oe?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(be){try{return this._subscribe(be)}catch(qe){be.error(qe)}}forEach(be,qe){return new(qe=ye(qe))((st,pe)=>{const xe=new c.Hp({next:Oe=>{try{be(Oe)}catch($e){pe($e),xe.unsubscribe()}},error:pe,complete:st});this.subscribe(xe)})}_subscribe(be){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(be)}[k.L](){return this}pipe(...be){return(0,ee.U)(be)(this)}toPromise(be){return new(be=ye(be))((qe,st)=>{let pe;this.subscribe(xe=>pe=xe,xe=>st(xe),()=>qe(pe))})}}return J.create=je=>new J(je),J})();function ye(J){var je;return null!==(je=J??ie.v.Promise)&&void 0!==je?je:Promise}},7579:(Et,Te,L)=>{L.d(Te,{x:()=>_e});var c=L(9751),$=L(727);const ee=(0,L(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(8737),se=L(2806);let _e=(()=>{class ye extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new ge(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new ee}next(z){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:je,observers:be}=this;return J||je?$.Lc:(this.currentObservers=null,be.push(z),new $.w0(()=>{this.currentObservers=null,(0,ie.P)(be,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:je,isStopped:be}=this;J?z.error(je):be&&z.complete()}asObservable(){const z=new c.y;return z.source=this,z}}return ye.create=(G,z)=>new ge(G,z),ye})();class ge extends _e{constructor(G,z){super(),this.destination=G,this.source=z}next(G){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,G)}error(G){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,G)}complete(){var G,z;null===(z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===z||z.call(G)}_subscribe(G){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(G))&&void 0!==J?J:$.Lc}}},930:(Et,Te,L)=>{L.d(Te,{Hp:()=>st,Lv:()=>J});var c=L(576),$=L(727),k=L(2416),ee=L(7849),ie=L(5032);const se=ye("C",void 0,void 0);function ye(De,Ie,Re){return{kind:De,value:Ie,error:Re}}var G=L(3410),z=L(2806);class J extends $.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,$.Nn)(Ie)&&Ie.add(this)):this.destination=$e}static create(Ie,Re,He){return new st(Ie,Re,He)}next(Ie){this.isStopped?Oe(function ge(De){return ye("N",De,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Oe(function _e(De){return ye("E",void 0,De)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Oe(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function be(De,Ie){return je.call(De,Ie)}class qe{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Re}=this;if(Re.next)try{Re.next(Ie)}catch(He){pe(He)}}error(Ie){const{partialObserver:Re}=this;if(Re.error)try{Re.error(Ie)}catch(He){pe(He)}else pe(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Re){pe(Re)}}}class st extends J{constructor(Ie,Re,He){let ke;if(super(),(0,c.m)(Ie)||!Ie)ke={next:Ie??void 0,error:Re??void 0,complete:He??void 0};else{let re;this&&k.v.useDeprecatedNextContext?(re=Object.create(Ie),re.unsubscribe=()=>this.unsubscribe(),ke={next:Ie.next&&be(Ie.next,re),error:Ie.error&&be(Ie.error,re),complete:Ie.complete&&be(Ie.complete,re)}):ke=Ie}this.destination=new qe(ke)}}function pe(De){k.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(De):(0,ee.h)(De)}function Oe(De,Ie){const{onStoppedNotification:Re}=k.v;Re&&G.z.setTimeout(()=>Re(De,Ie))}const $e={closed:!0,next:ie.Z,error:function xe(De){throw De},complete:ie.Z}},727:(Et,Te,L)=>{L.d(Te,{Lc:()=>se,w0:()=>ie,Nn:()=>_e});var c=L(576);const k=(0,L(3888).d)(ye=>function(z){ye(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,je)=>`${je+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ee=L(8737);class ie{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const be of z)be.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,c.m)(J))try{J()}catch(be){G=be instanceof k?be.errors:[be]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const be of je)try{ge(be)}catch(qe){G=G??[],qe instanceof k?G=[...G,...qe.errors]:G.push(qe)}}if(G)throw new k(G)}}add(G){var z;if(G&&G!==this)if(this.closed)ge(G);else{if(G instanceof ie){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(G)}}_hasParent(G){const{_parentage:z}=this;return z===G||Array.isArray(z)&&z.includes(G)}_addParent(G){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(G),z):z?[z,G]:G}_removeParent(G){const{_parentage:z}=this;z===G?this._parentage=null:Array.isArray(z)&&(0,ee.P)(z,G)}remove(G){const{_finalizers:z}=this;z&&(0,ee.P)(z,G),G instanceof ie&&G._removeParent(this)}}ie.EMPTY=(()=>{const ye=new ie;return ye.closed=!0,ye})();const se=ie.EMPTY;function _e(ye){return ye instanceof ie||ye&&"closed"in ye&&(0,c.m)(ye.remove)&&(0,c.m)(ye.add)&&(0,c.m)(ye.unsubscribe)}function ge(ye){(0,c.m)(ye)?ye():ye.unsubscribe()}},2416:(Et,Te,L)=>{L.d(Te,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Te,L)=>{L.d(Te,{E:()=>$});const $=new(L(9751).y)(ie=>ie.complete())},8996:(Et,Te,L)=>{L.d(Te,{D:()=>Ie});var c=L(8421),$=L(5363),k=L(9468),se=L(9751),ge=L(2202),ye=L(576),G=L(9672);function J(Re,He){if(!Re)throw new Error("Iterable cannot be null");return new se.y(ke=>{(0,G.f)(ke,He,()=>{const re=Re[Symbol.asyncIterator]();(0,G.f)(ke,He,()=>{re.next().then(tt=>{tt.done?ke.complete():ke.next(tt.value)})},0,!0)})})}var je=L(3670),be=L(8239),qe=L(1144),st=L(6495),pe=L(2206),xe=L(4532),Oe=L(3260);function Ie(Re,He){return He?function De(Re,He){if(null!=Re){if((0,je.c)(Re))return function ee(Re,He){return(0,c.Xf)(Re).pipe((0,k.R)(He),(0,$.Q)(He))}(Re,He);if((0,qe.z)(Re))return function _e(Re,He){return new se.y(ke=>{let re=0;return He.schedule(function(){re===Re.length?ke.complete():(ke.next(Re[re++]),ke.closed||this.schedule())})})}(Re,He);if((0,be.t)(Re))return function ie(Re,He){return(0,c.Xf)(Re).pipe((0,k.R)(He),(0,$.Q)(He))}(Re,He);if((0,pe.D)(Re))return J(Re,He);if((0,st.T)(Re))return function z(Re,He){return new se.y(ke=>{let re;return(0,G.f)(ke,He,()=>{re=Re[ge.h](),(0,G.f)(ke,He,()=>{let tt,St;try{({value:tt,done:St}=re.next())}catch(it){return void ke.error(it)}St?ke.complete():ke.next(tt)},0,!0)}),()=>(0,ye.m)(re?.return)&&re.return()})}(Re,He);if((0,Oe.L)(Re))return function $e(Re,He){return J((0,Oe.Q)(Re),He)}(Re,He)}throw(0,xe.z)(Re)}(Re,He):(0,c.Xf)(Re)}},8421:(Et,Te,L)=>{L.d(Te,{Xf:()=>je});var c=L(7582),$=L(1144),k=L(8239),ee=L(9751),ie=L(3670),se=L(2206),_e=L(4532),ge=L(6495),ye=L(3260),G=L(576),z=L(7849),J=L(8822);function je(De){if(De instanceof ee.y)return De;if(null!=De){if((0,ie.c)(De))return function be(De){return new ee.y(Ie=>{const Re=De[J.L]();if((0,G.m)(Re.subscribe))return Re.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,$.z)(De))return function qe(De){return new ee.y(Ie=>{for(let Re=0;Re<De.length&&!Ie.closed;Re++)Ie.next(De[Re]);Ie.complete()})}(De);if((0,k.t)(De))return function st(De){return new ee.y(Ie=>{De.then(Re=>{Ie.closed||(Ie.next(Re),Ie.complete())},Re=>Ie.error(Re)).then(null,z.h)})}(De);if((0,se.D)(De))return xe(De);if((0,ge.T)(De))return function pe(De){return new ee.y(Ie=>{for(const Re of De)if(Ie.next(Re),Ie.closed)return;Ie.complete()})}(De);if((0,ye.L)(De))return function Oe(De){return xe((0,ye.Q)(De))}(De)}throw(0,_e.z)(De)}function xe(De){return new ee.y(Ie=>{(function $e(De,Ie){var Re,He,ke,re;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Re=(0,c.KL)(De);!(He=yield Re.next()).done;)if(Ie.next(He.value),Ie.closed)return}catch(tt){ke={error:tt}}finally{try{He&&!He.done&&(re=Re.return)&&(yield re.call(Re))}finally{if(ke)throw ke.error}}Ie.complete()})})(De,Ie).catch(Re=>Ie.error(Re))})}},6451:(Et,Te,L)=>{L.d(Te,{T:()=>se});var c=L(8189),$=L(8421),k=L(515),ee=L(7669),ie=L(8996);function se(..._e){const ge=(0,ee.yG)(_e),ye=(0,ee._6)(_e,1/0),G=_e;return G.length?1===G.length?(0,$.Xf)(G[0]):(0,c.J)(ye)((0,ie.D)(G,ge)):k.E}},5403:(Et,Te,L)=>{L.d(Te,{x:()=>$});var c=L(930);function $(ee,ie,se,_e,ge){return new k(ee,ie,se,_e,ge)}class k extends c.Lv{constructor(ie,se,_e,ge,ye,G){super(ie),this.onFinalize=ye,this.shouldUnsubscribe=G,this._next=se?function(z){try{se(z)}catch(J){ie.error(J)}}:super._next,this._error=ge?function(z){try{ge(z)}catch(J){ie.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(z){ie.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Et,Te,L)=>{L.d(Te,{U:()=>k});var c=L(4482),$=L(5403);function k(ee,ie){return(0,c.e)((se,_e)=>{let ge=0;se.subscribe((0,$.x)(_e,ye=>{_e.next(ee.call(ie,ye,ge++))}))})}},8189:(Et,Te,L)=>{L.d(Te,{J:()=>k});var c=L(5577),$=L(4671);function k(ee=1/0){return(0,c.z)($.y,ee)}},5577:(Et,Te,L)=>{L.d(Te,{z:()=>ge});var c=L(4004),$=L(8421),k=L(4482),ee=L(9672),ie=L(5403),_e=L(576);function ge(ye,G,z=1/0){return(0,_e.m)(G)?ge((J,je)=>(0,c.U)((be,qe)=>G(J,be,je,qe))((0,$.Xf)(ye(J,je))),z):("number"==typeof G&&(z=G),(0,k.e)((J,je)=>function se(ye,G,z,J,je,be,qe,st){const pe=[];let xe=0,Oe=0,$e=!1;const De=()=>{$e&&!pe.length&&!xe&&G.complete()},Ie=He=>xe<J?Re(He):pe.push(He),Re=He=>{be&&G.next(He),xe++;let ke=!1;(0,$.Xf)(z(He,Oe++)).subscribe((0,ie.x)(G,re=>{je?.(re),be?Ie(re):G.next(re)},()=>{ke=!0},void 0,()=>{if(ke)try{for(xe--;pe.length&&xe<J;){const re=pe.shift();qe?(0,ee.f)(G,qe,()=>Re(re)):Re(re)}De()}catch(re){G.error(re)}}))};return ye.subscribe((0,ie.x)(G,Ie,()=>{$e=!0,De()})),()=>{st?.()}}(J,je,ye,z)))}},5363:(Et,Te,L)=>{L.d(Te,{Q:()=>ee});var c=L(9672),$=L(4482),k=L(5403);function ee(ie,se=0){return(0,$.e)((_e,ge)=>{_e.subscribe((0,k.x)(ge,ye=>(0,c.f)(ge,ie,()=>ge.next(ye),se),()=>(0,c.f)(ge,ie,()=>ge.complete(),se),ye=>(0,c.f)(ge,ie,()=>ge.error(ye),se)))})}},3099:(Et,Te,L)=>{L.d(Te,{B:()=>ie});var c=L(8421),$=L(7579),k=L(930),ee=L(4482);function ie(_e={}){const{connector:ge=(()=>new $.x),resetOnError:ye=!0,resetOnComplete:G=!0,resetOnRefCountZero:z=!0}=_e;return J=>{let je,be,qe,st=0,pe=!1,xe=!1;const Oe=()=>{be?.unsubscribe(),be=void 0},$e=()=>{Oe(),je=qe=void 0,pe=xe=!1},De=()=>{const Ie=je;$e(),Ie?.unsubscribe()};return(0,ee.e)((Ie,Re)=>{st++,!xe&&!pe&&Oe();const He=qe=qe??ge();Re.add(()=>{st--,0===st&&!xe&&!pe&&(be=se(De,z))}),He.subscribe(Re),!je&&st>0&&(je=new k.Hp({next:ke=>He.next(ke),error:ke=>{xe=!0,Oe(),be=se($e,ye,ke),He.error(ke)},complete:()=>{pe=!0,Oe(),be=se($e,G),He.complete()}}),(0,c.Xf)(Ie).subscribe(je))})(J)}}function se(_e,ge,...ye){if(!0===ge)return void _e();if(!1===ge)return;const G=new k.Hp({next:()=>{G.unsubscribe(),_e()}});return(0,c.Xf)(ge(...ye)).subscribe(G)}},9468:(Et,Te,L)=>{L.d(Te,{R:()=>$});var c=L(4482);function $(k,ee=0){return(0,c.e)((ie,se)=>{se.add(k.schedule(()=>ie.subscribe(se),ee))})}},8505:(Et,Te,L)=>{L.d(Te,{b:()=>ie});var c=L(576),$=L(4482),k=L(5403),ee=L(4671);function ie(se,_e,ge){const ye=(0,c.m)(se)||_e||ge?{next:se,error:_e,complete:ge}:se;return ye?(0,$.e)((G,z)=>{var J;null===(J=ye.subscribe)||void 0===J||J.call(ye);let je=!0;G.subscribe((0,k.x)(z,be=>{var qe;null===(qe=ye.next)||void 0===qe||qe.call(ye,be),z.next(be)},()=>{var be;je=!1,null===(be=ye.complete)||void 0===be||be.call(ye),z.complete()},be=>{var qe;je=!1,null===(qe=ye.error)||void 0===qe||qe.call(ye,be),z.error(be)},()=>{var be,qe;je&&(null===(be=ye.unsubscribe)||void 0===be||be.call(ye)),null===(qe=ye.finalize)||void 0===qe||qe.call(ye)}))}):ee.y}},4408:(Et,Te,L)=>{L.d(Te,{o:()=>ie});var c=L(727);class $ extends c.w0{constructor(_e,ge){super()}schedule(_e,ge=0){return this}}const k={setInterval(se,_e,...ge){const{delegate:ye}=k;return ye?.setInterval?ye.setInterval(se,_e,...ge):setInterval(se,_e,...ge)},clearInterval(se){const{delegate:_e}=k;return(_e?.clearInterval||clearInterval)(se)},delegate:void 0};var ee=L(8737);class ie extends ${constructor(_e,ge){super(_e,ge),this.scheduler=_e,this.work=ge,this.pending=!1}schedule(_e,ge=0){var ye;if(this.closed)return this;this.state=_e;const G=this.id,z=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(z,G,ge)),this.pending=!0,this.delay=ge,this.id=null!==(ye=this.id)&&void 0!==ye?ye:this.requestAsyncId(z,this.id,ge),this}requestAsyncId(_e,ge,ye=0){return k.setInterval(_e.flush.bind(_e,this),ye)}recycleAsyncId(_e,ge,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return ge;null!=ge&&k.clearInterval(ge)}execute(_e,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(_e,ge);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,ge){let G,ye=!1;try{this.work(_e)}catch(z){ye=!0,G=z||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:_e,scheduler:ge}=this,{actions:ye}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(ye,this),null!=_e&&(this.id=this.recycleAsyncId(ge,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Te,L)=>{L.d(Te,{v:()=>k});var c=L(6063);class ${constructor(ie,se=$.now){this.schedulerActionCtor=ie,this.now=se}schedule(ie,se=0,_e){return new this.schedulerActionCtor(this,ie).schedule(_e,se)}}$.now=c.l.now;class k extends ${constructor(ie,se=$.now){super(ie,se),this.actions=[],this._active=!1}flush(ie){const{actions:se}=this;if(this._active)return void se.push(ie);let _e;this._active=!0;do{if(_e=ie.execute(ie.state,ie.delay))break}while(ie=se.shift());if(this._active=!1,_e){for(;ie=se.shift();)ie.unsubscribe();throw _e}}}},4986:(Et,Te,L)=>{L.d(Te,{z:()=>k});var c=L(4408);const k=new(L(7565).v)(c.o)},6063:(Et,Te,L)=>{L.d(Te,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Et,Te,L)=>{L.d(Te,{z:()=>c});const c={setTimeout($,k,...ee){const{delegate:ie}=c;return ie?.setTimeout?ie.setTimeout($,k,...ee):setTimeout($,k,...ee)},clearTimeout($){const{delegate:k}=c;return(k?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(Et,Te,L)=>{L.d(Te,{h:()=>$});const $=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Te,L)=>{L.d(Te,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,Te,L)=>{L.d(Te,{_6:()=>se,jO:()=>ee,yG:()=>ie});var c=L(576);function k(_e){return _e[_e.length-1]}function ee(_e){return(0,c.m)(k(_e))?_e.pop():void 0}function ie(_e){return function $(_e){return _e&&(0,c.m)(_e.schedule)}(k(_e))?_e.pop():void 0}function se(_e,ge){return"number"==typeof k(_e)?_e.pop():ge}},8737:(Et,Te,L)=>{function c($,k){if($){const ee=$.indexOf(k);0<=ee&&$.splice(ee,1)}}L.d(Te,{P:()=>c})},3888:(Et,Te,L)=>{function c($){const ee=$(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}L.d(Te,{d:()=>c})},2806:(Et,Te,L)=>{L.d(Te,{O:()=>ee,x:()=>k});var c=L(2416);let $=null;function k(ie){if(c.v.useDeprecatedSynchronousErrorHandling){const se=!$;if(se&&($={errorThrown:!1,error:null}),ie(),se){const{errorThrown:_e,error:ge}=$;if($=null,_e)throw ge}}else ie()}function ee(ie){c.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ie)}},9672:(Et,Te,L)=>{function c($,k,ee,ie=0,se=!1){const _e=k.schedule(function(){ee(),se?$.add(this.schedule(null,ie)):this.unsubscribe()},ie);if($.add(_e),!se)return _e}L.d(Te,{f:()=>c})},4671:(Et,Te,L)=>{function c($){return $}L.d(Te,{y:()=>c})},1144:(Et,Te,L)=>{L.d(Te,{z:()=>c});const c=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(Et,Te,L)=>{L.d(Te,{D:()=>$});var c=L(576);function $(k){return Symbol.asyncIterator&&(0,c.m)(k?.[Symbol.asyncIterator])}},576:(Et,Te,L)=>{function c($){return"function"==typeof $}L.d(Te,{m:()=>c})},3670:(Et,Te,L)=>{L.d(Te,{c:()=>k});var c=L(8822),$=L(576);function k(ee){return(0,$.m)(ee[c.L])}},6495:(Et,Te,L)=>{L.d(Te,{T:()=>k});var c=L(2202),$=L(576);function k(ee){return(0,$.m)(ee?.[c.h])}},8239:(Et,Te,L)=>{L.d(Te,{t:()=>$});var c=L(576);function $(k){return(0,c.m)(k?.then)}},3260:(Et,Te,L)=>{L.d(Te,{L:()=>ee,Q:()=>k});var c=L(7582),$=L(576);function k(ie){return(0,c.FC)(this,arguments,function*(){const _e=ie.getReader();try{for(;;){const{value:ge,done:ye}=yield(0,c.qq)(_e.read());if(ye)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ge)}}finally{_e.releaseLock()}})}function ee(ie){return(0,$.m)(ie?.getReader)}},4482:(Et,Te,L)=>{L.d(Te,{A:()=>$,e:()=>k});var c=L(576);function $(ee){return(0,c.m)(ee?.lift)}function k(ee){return ie=>{if($(ie))return ie.lift(function(se){try{return ee(se,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,Te,L)=>{function c(){}L.d(Te,{Z:()=>c})},9635:(Et,Te,L)=>{L.d(Te,{U:()=>k,z:()=>$});var c=L(4671);function $(...ee){return k(ee)}function k(ee){return 0===ee.length?c.y:1===ee.length?ee[0]:function(se){return ee.reduce((_e,ge)=>ge(_e),se)}}},7849:(Et,Te,L)=>{L.d(Te,{h:()=>k});var c=L(2416),$=L(3410);function k(ee){$.z.setTimeout(()=>{const{onUnhandledError:ie}=c.v;if(!ie)throw ee;ie(ee)})}},4532:(Et,Te,L)=>{function c($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>c})},4650:(Et,Te,L)=>{L.d(Te,{$8M:()=>Oa,$WT:()=>kr,$Z:()=>Ew,AFp:()=>Xi,AaK:()=>ge,BQk:()=>f_,CHM:()=>_c,CRH:()=>hm,CZH:()=>fp,CqO:()=>yb,D6c:()=>GT,DdM:()=>ip,EJc:()=>nc,EpF:()=>Kw,F4k:()=>mb,FYo:()=>Oy,FiY:()=>go,GfV:()=>tw,Gpc:()=>z,JOm:()=>At,KtG:()=>ba,LFG:()=>Bt,Lbi:()=>yv,Lck:()=>aT,MMx:()=>sm,NdJ:()=>Qw,OlP:()=>un,Oqu:()=>uE,P3R:()=>q0,PXZ:()=>DI,Q6J:()=>fl,QGY:()=>Yw,Qsj:()=>dD,R0b:()=>ms,RDi:()=>HC,Rgc:()=>ph,SBq:()=>Gd,Sil:()=>TT,Suo:()=>ov,TTD:()=>Xl,TgZ:()=>h_,X6Q:()=>yp,XFs:()=>ft,Xpm:()=>$t,Xts:()=>Dy,Y36:()=>Yd,YKP:()=>UE,YNc:()=>Gw,Yjl:()=>Xt,Yz7:()=>_t,Z0I:()=>Rr,ZZ4:()=>Am,_Bn:()=>LE,_UZ:()=>Zw,_Vd:()=>zd,_c5:()=>NI,_uU:()=>Lb,aQg:()=>kv,c2e:()=>bo,cJS:()=>hn,cg1:()=>yl,dDg:()=>NT,dqk:()=>ln,eFA:()=>di,eJc:()=>uv,ekj:()=>oE,eoX:()=>EI,f3M:()=>Mn,g9A:()=>ru,h0i:()=>bl,hGG:()=>zT,iGM:()=>dm,ifc:()=>F,ip1:()=>mv,jDz:()=>j_,kL8:()=>oh,lG2:()=>Rt,lqb:()=>nl,lri:()=>vI,n5z:()=>Mc,oAB:()=>te,oxw:()=>m_,q4F:()=>nw,qLn:()=>Df,qOj:()=>Ff,qZA:()=>Ng,rWj:()=>wI,sBO:()=>ic,s_b:()=>Al,soG:()=>tc,tb:()=>bv,tp0:()=>bt,uIk:()=>Xd,vHH:()=>pe,vpe:()=>da,wAp:()=>Mt,xp6:()=>fw,ynx:()=>Pg,z2F:()=>Yn,zSh:()=>ju,zs3:()=>Wd});var c=L(7579),$=L(727),k=L(9751),ee=L(6451),ie=L(3099);function se(s){for(let o in s)if(s[o]===se)return o;throw Error("Could not find renamed property on target object.")}function _e(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ye(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=se({__forward_ref__:se});function z(s){return s.__forward_ref__=z,s.toString=function(){return ge(this())},s}function J(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===z}function be(s){return s&&!!s.\u0275providers}const st="https://g.co/ng/security#xss";class pe extends Error{constructor(o,a){super(xe(o,a)),this.code=o}}function xe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Oe(s){return"string"==typeof s?s:null==s?"":String(s)}function He(s,o){throw new pe(-201,!1)}function Le(s,o){null==s&&function Pe(s,o,a,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${a} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function _t(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function hn(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return Vn(s,Jr)||Vn(s,Ys)}function Rr(s){return null!==In(s)}function Vn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Qn(s){return s&&(s.hasOwnProperty(Fi)||s.hasOwnProperty(Bn))?s[Fi]:null}const Jr=se({\u0275prov:se}),Fi=se({\u0275inj:se}),Ys=se({ngInjectableDef:se}),Bn=se({ngInjectorDef:se});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let On;function $n(s){const o=On;return On=s,o}function Pr(s,o,a){const d=In(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&ft.Optional?null:void 0!==o?o:void He(ge(s))}const ln=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jn={},Cr="__NG_DI_FLAG__",kn="ngTempTokenPath",Xr="ngTokenPath",Fn=/\n/gm,lr="\u0275",Jt="__source";let Ii;function tn(s){const o=Ii;return Ii=s,o}function ei(s,o=ft.Default){if(void 0===Ii)throw new pe(-203,!1);return null===Ii?Pr(s,void 0,o):Ii.get(s,o&ft.Optional?null:void 0,o)}function Bt(s,o=ft.Default){return(function Wi(){return On}()||ei)(J(s),o)}function Mn(s,o=ft.Default){return Bt(s,Dr(o))}function Dr(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function zn(s){const o=[];for(let a=0;a<s.length;a++){const d=J(s[a]);if(Array.isArray(d)){if(0===d.length)throw new pe(900,!1);let h,p=ft.Default;for(let y=0;y<d.length;y++){const I=d[y],b=Or(I);"number"==typeof b?-1===b?h=I.token:p|=b:h=I}o.push(Bt(h,p))}else o.push(Bt(d))}return o}function Hr(s,o){return s[Cr]=o,s.prototype[Cr]=o,s}function Or(s){return s[Cr]}function B(s){return{toString:s}.toString()}var O=(()=>((O=O||{})[O.OnPush=0]="OnPush",O[O.Default=1]="Default",O))(),F=(()=>{return(s=F||(F={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",F;var s})();const R={},W=[],ve=se({\u0275cmp:se}),nt=se({\u0275dir:se}),xt=se({\u0275pipe:se}),Tt=se({\u0275mod:se}),Yt=se({\u0275fac:se}),Pt=se({__NG_ELEMENT_ID__:se});let Cn=0;function $t(s){return B(()=>{const o=uu(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===O.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||F.Emulated,id:"c"+Cn++,styles:s.styles||W,_:null,schemas:s.schemas||null,tView:null};Bh(a);const d=s.dependencies;return a.directiveDefs=Qs(d,!1),a.pipeDefs=Qs(d,!0),a})}function is(s){return vt(s)||fn(s)}function he(s){return null!==s}function te(s){return B(()=>({type:s.type,bootstrap:s.bootstrap||W,declarations:s.declarations||W,imports:s.imports||W,exports:s.exports||W,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function mt(s,o){if(null==s)return R;const a={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=d,o&&(o[h]=p)}return a}function Rt(s){return B(()=>{const o=uu(s);return Bh(o),o})}function Xt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function vt(s){return s[ve]||null}function fn(s){return s[nt]||null}function sn(s){return s[xt]||null}function kr(s){const o=vt(s)||fn(s)||sn(s);return null!==o&&o.standalone}function hr(s,o){const a=s[Tt]||null;if(!a&&!0===o)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return a}function uu(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||W,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mt(s.inputs,o),outputs:mt(s.outputs)}}function Bh(s){s.features?.forEach(o=>o(s))}function Qs(s,o){if(!s)return null;const a=o?sn:is;return()=>("function"==typeof s?s():s).map(d=>a(d)).filter(he)}const fr=0,Qe=1,Qt=2,Sn=3,pn=4,Cs=5,pr=6,Js=7,Ln=8,ya=9,Ci=10,zt=11,cu=12,Di=13,_a=14,Ds=15,rr=16,Xs=17,eo=18,pi=19,bs=20,Fr=21,wn=22,fc=1,va=2,xo=7,Ts=8,to=9,br=10;function Gr(s){return Array.isArray(s)&&"object"==typeof s[fc]}function Li(s){return Array.isArray(s)&&!0===s[fc]}function no(s){return 0!=(4&s.flags)}function lu(s){return s.componentOffset>-1}function wa(s){return 1==(1&s.flags)}function ti(s){return!!s.template}function Ss(s){return 0!=(256&s[Qt])}function ss(s,o){return s.hasOwnProperty(Yt)?s[Yt]:null}class Jl{constructor(o,a,d){this.previousValue=o,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function Xl(){return du}function du(s){return s.type.prototype.ngOnChanges&&(s.setInput=xs),Gh}function Gh(){const s=hu(this),o=s?.current;if(o){const a=s.previous;if(a===R)s.previous=o;else for(let d in o)a[d]=o[d];s.current=null,this.ngOnChanges(o)}}function xs(s,o,a,d){const h=this.declaredInputs[a],p=hu(s)||function qh(s,o){return s[pc]=o}(s,{previous:R,current:null}),y=p.current||(p.current={}),I=p.previous,b=I[h];y[h]=new Jl(b&&b.currentValue,o,I===R),s[d]=o}Xl.ngInherit=!0;const pc="__ngSimpleChanges__";function hu(s){return s[pc]||null}const Rn=function(s,o,a){};function ir(s){for(;Array.isArray(s);)s=s[fr];return s}function oo(s,o){return ir(o[s])}function Tr(s,o){return ir(o[s.index])}function pu(s,o){return s.data[o]}function gr(s,o){const a=o[s];return Gr(a)?a:a[fr]}function Ms(s){return 64==(64&s[Qt])}function os(s,o){return null==o?null:s[o]}function Da(s){s[eo]=0}function Oo(s,o){s[Cs]+=o;let a=s,d=s[Sn];for(;null!==d&&(1===o&&1===a[Cs]||-1===o&&0===a[Cs]);)d[Cs]+=o,a=d,d=d[Sn]}const Ft={lFrame:Sa(null),bindingsEnabled:!0};function td(){return Ft.bindingsEnabled}function fe(){return Ft.lFrame.lView}function Ut(){return Ft.lFrame.tView}function _c(s){return Ft.lFrame.contextLView=s,s[Ln]}function ba(s){return Ft.lFrame.contextLView=null,s}function Gn(){let s=rd();for(;null!==s&&64===s.type;)s=s.parent;return s}function rd(){return Ft.lFrame.currentTNode}function Ti(s,o){const a=Ft.lFrame;a.currentTNode=s,a.isParent=o}function mu(){return Ft.lFrame.isParent}function id(){Ft.lFrame.isParent=!1}function as(){return Ft.lFrame.bindingIndex++}function ad(s,o){const a=Ft.lFrame;a.bindingIndex=a.bindingRootIndex=s,qn(o)}function qn(s){Ft.lFrame.currentDirectiveIndex=s}function Ta(){return Ft.lFrame.currentQueryIndex}function ud(s){Ft.lFrame.currentQueryIndex=s}function _u(s){const o=s[Qe];return 2===o.type?o.declTNode:1===o.type?s[pr]:null}function cd(s,o,a){if(a&ft.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||a&ft.Host||(h=_u(p),null===h||(p=p[Ds],10&h.type))););if(null===h)return!1;o=h,s=p}const d=Ft.lFrame=vc();return d.currentTNode=o,d.lView=s,!0}function Lo(s){const o=vc(),a=s[Qe];Ft.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function vc(){const s=Ft.lFrame,o=null===s?null:s.child;return null===o?Sa(s):o}function Sa(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function wc(){const s=Ft.lFrame;return Ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const vu=wc;function ld(){const s=wc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Lr(){return Ft.lFrame.selectedIndex}function Yi(s){Ft.lFrame.selectedIndex=s}function An(){const s=Ft.lFrame;return pu(s.tView,s.selectedIndex)}function wu(s,o){for(let a=o.directiveStart,d=o.directiveEnd;a<d;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:M}=p;y&&(s.contentHooks??(s.contentHooks=[])).push(-a,y),I&&((s.contentHooks??(s.contentHooks=[])).push(a,I),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(a,I)),b&&(s.viewHooks??(s.viewHooks=[])).push(-a,b),S&&((s.viewHooks??(s.viewHooks=[])).push(a,S),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(a,S)),null!=M&&(s.destroyHooks??(s.destroyHooks=[])).push(a,M)}}function Cc(s,o,a){Eu(s,o,3,a)}function pd(s,o,a,d){(3&s[Qt])===a&&Eu(s,o,a,d)}function gd(s,o){let a=s[Qt];(3&a)===o&&(a&=2047,a+=1,s[Qt]=a)}function Eu(s,o,a,d){const p=d??-1,y=o.length-1;let I=0;for(let b=void 0!==d?65535&s[eo]:0;b<y;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=d&&I>=d)break}else o[b]<0&&(s[eo]+=65536),(I<p||-1==p)&&(Vo(s,a,o,b),s[eo]=(4294901760&s[eo])+b+2),b++}function Vo(s,o,a,d){const h=a[d]<0,p=a[d+1],I=s[h?-a[d]:a[d]];if(h){if(s[Qt]>>11<s[eo]>>16&&(3&s[Qt])===o){s[Qt]+=2048,Rn(4,I,p);try{p.call(I)}finally{Rn(5,I,p)}}}else{Rn(4,I,p);try{p.call(I)}finally{Rn(5,I,p)}}}const Aa=-1;class us{constructor(o,a,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function Bo(s,o,a){let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const p=a[d++],y=a[d++],I=a[d++];s.setAttribute(o,y,I,p)}else{const p=h,y=a[++d];Ps(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),d++}}return d}function yd(s){return 3===s||4===s||6===s}function Ps(s){return 64===s.charCodeAt(0)}function uo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?a=h:0===a||$o(s,a,h,null,-1===a||2===a?o[++d]:null)}}return s}function $o(s,o,a,d,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===a){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,a),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}function co(s){return s!==Aa}function jo(s){return 32767&s}function Ra(s,o){let a=function Ma(s){return s>>16}(s),d=o;for(;a>0;)d=d[Ds],a--;return d}let bc=!0;function Na(s){const o=bc;return bc=s,o}const Tc=255,Du=5;let Sc=0;const ri={};function Ac(s,o){const a=vd(s,o);if(-1!==a)return a;const d=o[Qe];d.firstCreatePass&&(s.injectorIndex=o.length,Qi(d.data,s),Qi(o,null),Qi(d.blueprint,null));const h=Wn(s,o),p=s.injectorIndex;if(co(h)){const y=jo(h),I=Ra(h,o),b=I[Qe].data;for(let S=0;S<8;S++)o[p+S]=I[y+S]|b[y+S]}return o[p+8]=h,p}function Qi(s,o){s.push(0,0,0,0,0,0,0,0,o)}function vd(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Wn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,d=null,h=o;for(;null!==h;){if(d=lo(h),null===d)return Aa;if(a++,h=h[Ds],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return Aa}function Os(s,o,a){!function _d(s,o,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(Pt)&&(d=a[Pt]),null==d&&(d=a[Pt]=Sc++);const h=d&Tc;o.data[s+(h>>Du)]|=1<<h}(s,o,a)}function wd(s,o,a){if(a&ft.Optional||void 0!==s)return s;He()}function Pa(s,o,a,d){if(a&ft.Optional&&void 0===d&&(d=null),!(a&(ft.Self|ft.Host))){const h=s[ya],p=$n(void 0);try{return h?h.get(o,d,a&ft.Optional):Pr(o,d,a&ft.Optional)}finally{$n(p)}}return wd(d,0,a)}function Ed(s,o,a,d=ft.Default,h){if(null!==s){if(1024&o[Qt]){const y=function Jh(s,o,a,d,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[Qt]&&!(256&y[Qt]);){const I=Tu(p,y,a,d|ft.Self,ri);if(I!==ri)return I;let b=p.parent;if(!b){const S=y[Fr];if(S){const M=S.get(a,ri,d);if(M!==ri)return M}b=lo(y),y=y[Ds]}p=b}return h}(s,o,a,d,ri);if(y!==ri)return y}const p=Tu(s,o,a,d,ri);if(p!==ri)return p}return Pa(o,a,d,h)}function Tu(s,o,a,d,h){const p=function Qh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Pt)?s[Pt]:void 0;return"number"==typeof o?o>=0?o&Tc:xc:o}(a);if("function"==typeof p){if(!cd(o,s,d))return d&ft.Host?wd(h,0,d):Pa(o,a,d,h);try{const y=p(d);if(null!=y||d&ft.Optional)return y;He()}finally{vu()}}else if("number"==typeof p){let y=null,I=vd(s,o),b=Aa,S=d&ft.Host?o[rr][pr]:null;for((-1===I||d&ft.SkipSelf)&&(b=-1===I?Wn(s,o):o[I+8],b!==Aa&&Su(d,!1)?(y=o[Qe],I=jo(b),o=Ra(b,o)):I=-1);-1!==I;){const M=o[Qe];if(ks(p,I,M.data)){const V=sr(I,o,a,y,d,S);if(V!==ri)return V}b=o[I+8],b!==Aa&&Su(d,o[Qe].data[I+8]===S)&&ks(p,I,o)?(y=M,I=jo(b),o=Ra(b,o)):I=-1}}return h}function sr(s,o,a,d,h,p){const y=o[Qe],I=y.data[s+8],M=Ho(I,y,a,null==d?lu(I)&&bc:d!=y&&0!=(3&I.type),h&ft.Host&&p===I);return null!==M?Nn(o,y,M,I):ri}function Ho(s,o,a,d,h){const p=s.providerIndexes,y=o.data,I=1048575&p,b=s.directiveStart,M=p>>20,Z=h?I+M:s.directiveEnd;for(let X=d?I:I+M;X<Z;X++){const we=y[X];if(X<b&&a===we||X>=b&&we.type===a)return X}if(h){const X=y[b];if(X&&ti(X)&&X.type===a)return b}return null}function Nn(s,o,a,d){let h=s[a];const p=o.data;if(function Xp(s){return s instanceof us}(h)){const y=h;y.resolving&&function De(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new pe(-200,`Circular dependency in DI detected for ${s}${a}`)}(function $e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Oe(s)}(p[a]));const I=Na(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?$n(y.injectImpl):null;cd(s,d,ft.Default);try{h=s[a]=y.factory(void 0,p,s,d),o.firstCreatePass&&a>=d.directiveStart&&function Jp(s,o,a){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const y=du(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,y)}h&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-s,h),p&&((a.preOrderHooks??(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==b&&$n(b),Na(I),y.resolving=!1,vu()}}return h}function ks(s,o,a){return!!(a[o+(s>>Du)]&1<<s)}function Su(s,o){return!(s&ft.Self||s&ft.Host&&o)}class zo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,d){return Ed(this._tNode,this._lView,o,Dr(d),a)}}function xc(){return new zo(Gn(),fe())}function Mc(s){return B(()=>{const o=s.prototype.constructor,a=o[Yt]||Fs(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[Yt]||Fs(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Fs(s){return je(s)?()=>{const o=Fs(J(s));return o&&o()}:ss(s)}function lo(s){const o=s[Qe],a=o.type;return 2===a?o.declTNode:1===a?s[pr]:null}function Oa(s){return function bu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const d=a.length;let h=0;for(;h<d;){const p=a[h];if(yd(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(Gn(),s)}const Go="__parameters__";function fo(s,o,a){return B(()=>{const d=function Id(s){return function(...a){if(s){const d=s(...a);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return I.annotation=y,I;function I(b,S,M){const V=b.hasOwnProperty(Go)?b[Go]:Object.defineProperty(b,Go,{value:[]})[Go];for(;V.length<=M;)V.push(null);return(V[M]=V[M]||[]).push(y),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class un{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=_t({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ls(s,o){s.forEach(a=>Array.isArray(a)?Ls(a,o):o(a))}function Fc(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ka(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Si(s,o,a){let d=Ui(s,o);return d>=0?s[1|d]=a:(d=~d,function Ru(s,o,a,d){let h=s.length;if(h==o)s.push(a,d);else if(1===h)s.push(d,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=d}}(s,d,o,a)),d}function nn(s,o){const a=Ui(s,o);if(a>=0)return s[1|a]}function Ui(s,o){return function Vi(s,o,a){let d=0,h=s.length>>a;for(;h!==d;){const p=d+(h-d>>1),y=s[p<<a];if(o===y)return p<<a;y>o?h=p:d=p+1}return~(h<<a)}(s,o,1)}const go=Hr(fo("Optional"),8),bt=Hr(fo("SkipSelf"),4);var At=(()=>((At=At||{})[At.Important=1]="Important",At[At.DashCase=2]="DashCase",At))();const Zc=new Map;let ls=0;const q="__ngContext__";function K(s,o){Gr(o)?(s[q]=o[bs],function Md(s){Zc.set(s[bs],s)}(o)):s[q]=o}let _i;function Ur(s,o){return _i(s,o)}function Nd(s){const o=s[Sn];return Li(o)?o[Sn]:o}function Ga(s){return sf(s[Di])}function qa(s){return sf(s[pn])}function sf(s){for(;null!==s&&!Li(s);)s=s[pn];return s}function Jo(s,o,a,d,h){if(null!=d){let p,y=!1;Li(d)?p=d:Gr(d)&&(y=!0,d=d[fr]);const I=ir(d);0===s&&null!==a?null==h?ii(o,a,I):Gt(o,a,I,h||null,!0):1===s&&null!==a?Gt(o,a,I,h||null,!0):2===s?function dy(s,o,a){const d=ds(s,o);d&&function Xo(s,o,a,d){s.removeChild(o,a,d)}(s,d,o,a)}(o,I,y):3===s&&o.destroyNode(I),null!=p&&function ff(s,o,a,d,h){const p=a[xo];p!==ir(a)&&Jo(o,s,d,p,h);for(let I=br;I<a.length;I++){const b=a[I];hf(b[Qe],b,s,o,d,p)}}(o,s,p,a,h)}}function uf(s,o,a){return s.createElement(o,a)}function E(s,o){const a=s[to],d=a.indexOf(o),h=o[Sn];512&o[Qt]&&(o[Qt]&=-513,Oo(h,-1)),a.splice(d,1)}function x(s,o){if(s.length<=br)return;const a=br+o,d=s[a];if(d){const h=d[Xs];null!==h&&h!==s&&E(h,d),o>0&&(s[a-1][pn]=d[pn]);const p=ka(s,br+o);!function tg(s,o){hf(s,o,o[zt],2,null,null),o[fr]=null,o[pr]=null}(d[Qe],d);const y=p[pi];null!==y&&y.detachView(p[Qe]),d[Sn]=null,d[pn]=null,d[Qt]&=-65}return d}function P(s,o){if(!(128&o[Qt])){const a=o[zt];a.destroyNode&&hf(s,o,a,3,null,null),function v(s){let o=s[Di];if(!o)return Y(s[Qe],s);for(;o;){let a=null;if(Gr(o))a=o[Di];else{const d=o[br];d&&(a=d)}if(!a){for(;o&&!o[pn]&&o!==s;)Gr(o)&&Y(o[Qe],o),o=o[Sn];null===o&&(o=s),Gr(o)&&Y(o[Qe],o),a=o&&o[pn]}o=a}}(o)}}function Y(s,o){if(!(128&o[Qt])){o[Qt]&=-65,o[Qt]|=128,function Be(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let d=0;d<a.length;d+=2){const h=o[a[d]];if(!(h instanceof us)){const p=a[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const I=h[p[y]],b=p[y+1];Rn(4,I,b);try{b.call(I)}finally{Rn(5,I,b)}}else{Rn(4,h,p);try{p.call(h)}finally{Rn(5,h,p)}}}}}(s,o),function ae(s,o){const a=s.cleanup,d=o[Js];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?d[h=y]():d[h=-y].unsubscribe(),p+=2}else{const y=d[h=a[p+1]];a[p].call(y)}if(null!==d){for(let p=h+1;p<d.length;p++)(0,d[p])();o[Js]=null}}(s,o),1===o[Qe].type&&o[zt].destroy();const a=o[Xs];if(null!==a&&Li(o[Sn])){a!==o[Sn]&&E(a,o);const d=o[pi];null!==d&&d.detachView(s)}!function Rd(s){Zc.delete(s[bs])}(o)}}function Ze(s,o,a){return function It(s,o,a){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return a[fr];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===F.None||p===F.Emulated)return null}return Tr(d,a)}}(s,o.parent,a)}function Gt(s,o,a,d,h){s.insertBefore(o,a,d,h)}function ii(s,o,a){s.appendChild(o,a)}function wo(s,o,a,d,h){null!==d?Gt(s,o,a,d,h):ii(s,o,a)}function ds(s,o){return s.parentNode(o)}let Od,py,ng,ea=function Xc(s,o,a){return 40&s.type?Tr(s,a):null};function Vu(s,o,a,d){const h=Ze(s,d,o),p=o[zt],I=function Pd(s,o,a){return ea(s,o,a)}(d.parent||o[pr],d,o);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)wo(p,h,a[b],I,!1);else wo(p,h,a,I,!1);void 0!==Od&&Od(p,d,o,a,h)}function Fd(s,o){if(null!==o){const a=o.type;if(3&a)return Tr(o,s);if(4&a)return ta(-1,s[o.index]);if(8&a){const d=o.child;if(null!==d)return Fd(s,d);{const h=s[o.index];return Li(h)?ta(-1,h):ir(h)}}if(32&a)return Ur(o,s)()||ir(s[o.index]);{const d=Bu(s,o);return null!==d?Array.isArray(d)?d[0]:Fd(Nd(s[rr]),d):Fd(s,o.next)}}return null}function Bu(s,o){return null!==o?s[rr][pr].projection[o.projection]:null}function ta(s,o){const a=br+s+1;if(a<o.length){const d=o[a],h=d[Qe].firstChild;if(null!==h)return Fd(d,h)}return o[xo]}function df(s,o,a,d,h,p,y){for(;null!=a;){const I=d[a.index],b=a.type;if(y&&0===o&&(I&&K(ir(I),d),a.flags|=2),32!=(32&a.flags))if(8&b)df(s,o,a.child,d,h,p,!1),Jo(o,s,h,I,p);else if(32&b){const S=Ur(a,d);let M;for(;M=S();)Jo(o,s,h,M,p);Jo(o,s,h,I,p)}else 16&b?hy(s,o,d,a,h,p):Jo(o,s,h,I,p);a=y?a.projectionNext:a.next}}function hf(s,o,a,d,h,p){df(a,d,s.firstChild,o,h,p,!1)}function hy(s,o,a,d,h,p){const y=a[rr],b=y[pr].projection[d.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Jo(o,s,h,b[S],p);else df(s,o,b,y[Sn],h,p,!0)}function $u(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function pf(s,o,a){const{mergedAttrs:d,classes:h,styles:p}=a;null!==d&&Bo(s,o,d),null!==h&&$u(s,o,h),null!==p&&function fy(s,o,a){s.setAttribute(o,"style",a)}(s,o,p)}function HC(s){py=s}function O0(s){return function gy(){if(void 0===ng&&(ng=null,ln.trustedTypes))try{ng=ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ng}()?.createScriptURL(s)||s}class k0{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${st})`}}function ra(s){return s instanceof k0?s.changingThisBreaksApplicationSecurity:s}function hs(s,o){const a=function Ud(s){return s instanceof k0&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${st})`)}return a===o}const V0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function z0(s){const o=Ef();return o?o.sanitize(_r.URL,s)||"":hs(s,"URL")?ra(s):function yf(s){return(s=String(s)).match(V0)?s:"unsafe:"+s}(Oe(s))}function ag(s){const o=Ef();if(o)return O0(o.sanitize(_r.RESOURCE_URL,s)||"");if(hs(s,"ResourceURL"))return O0(ra(s));throw new pe(904,!1)}function q0(s,o,a){return function nD(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?ag:z0}(o,a)(s)}function Ef(){const s=fe();return s&&s[cu]}const Dy=new un("ENVIRONMENT_INITIALIZER"),tl=new un("INJECTOR",-1),Bd=new un("INJECTOR_DEF_TYPES");class W0{get(o,a=jn){if(a===jn){const d=new Error(`NullInjectorError: No provider for ${ge(o)}!`);throw d.name="NullInjectorError",d}return a}}function If(...s){return{\u0275providers:$d(0,s),\u0275fromNgModule:!0}}function $d(s,...o){const a=[],d=new Set;let h;return Ls(o,p=>{const y=p;by(y,a,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&Z0(h,a),a}function Z0(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];Ty(h,p=>{o.push(p)})}}function by(s,o,a,d){if(!(s=J(s)))return!1;let h=null,p=Qn(s);const y=!p&&vt(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Qn(b),!p)return!1;h=b}const I=d.has(h);if(y){if(I)return!1;if(d.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of b)by(S,o,a,d)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let S;d.add(h);try{Ls(p.imports,M=>{by(M,o,a,d)&&(S||(S=[]),S.push(M))})}finally{}void 0!==S&&Z0(S,o)}if(!I){const S=ss(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:W},{provide:Bd,useValue:h,multi:!0},{provide:Dy,useValue:()=>Bt(h),multi:!0})}const b=p.providers;null==b||I||Ty(b,M=>{o.push(M)})}}return h!==s&&void 0!==s.providers}function Ty(s,o){for(let a of s)be(a)&&(a=a.\u0275providers),Array.isArray(a)?Ty(a,o):o(a)}const iD=se({provide:String,useValue:se});function Sy(s){return null!==s&&"object"==typeof s&&iD in s}function Wa(s){return"function"==typeof s}const ju=new un("Set Injector scope."),cg={},oD={};let Ay;function lg(){return void 0===Ay&&(Ay=new W0),Ay}class nl{}class Y0 extends nl{get destroyed(){return this._destroyed}constructor(o,a,d,h){super(),this.parent=a,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hd(o,y=>this.processProvider(y)),this.records.set(tl,jd(void 0,this)),h.has("environment")&&this.records.set(nl,jd(void 0,this));const p=this.records.get(ju);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Bd.multi,W,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=tn(this),d=$n(void 0);try{return o()}finally{tn(a),$n(d)}}get(o,a=jn,d=ft.Default){this.assertNotDestroyed(),d=Dr(d);const h=tn(this),p=$n(void 0);try{if(!(d&ft.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function Ny(s){return"function"==typeof s||"object"==typeof s&&s instanceof un}(o)&&In(o);I=b&&this.injectableDefInScope(b)?jd(xy(o),cg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(d&ft.Self?lg():this.parent).get(o,a=d&ft.Optional&&a===jn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[kn]=y[kn]||[]).unshift(ge(o)),h)throw y;return function zr(s,o,a,d){const h=s[kn];throw o[Jt]&&h.unshift(o[Jt]),s.message=function H(s,o,a,d=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==lr?s.slice(2):s;let h=ge(o);if(Array.isArray(o))h=o.map(ge).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];p.push(y+":"+("string"==typeof I?JSON.stringify(I):ge(I)))}h=`{${p.join(", ")}}`}return`${a}${d?"("+d+")":""}[${h}]: ${s.replace(Fn,"\n  ")}`}("\n"+s.message,h,a,d),s[Xr]=h,s[kn]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{$n(p),tn(h)}}resolveInjectorInitializers(){const o=tn(this),a=$n(void 0);try{const d=this.get(Dy.multi,W,ft.Self);for(const h of d)h()}finally{tn(o),$n(a)}}toString(){const o=[],a=this.records;for(const d of a.keys())o.push(ge(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(o){let a=Wa(o=J(o))?o:J(o&&o.provide);const d=function uD(s){return Sy(s)?jd(void 0,s.useValue):jd(My(s),cg)}(o);if(Wa(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=jd(void 0,cg,!0),h.factory=()=>zn(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,d)}hydrate(o,a){return a.value===cg&&(a.value=oD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Q0(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function xy(s){const o=In(s),a=null!==o?o.factory:ss(s);if(null!==a)return a;if(s instanceof un)throw new pe(204,!1);if(s instanceof Function)return function aD(s){const o=s.length;if(o>0)throw function qo(s,o){const a=[];for(let d=0;d<s;d++)a.push(o);return a}(o,"?"),new pe(204,!1);const a=function Nr(s){return s&&(s[Jr]||s[Ys])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new pe(204,!1)}function My(s,o,a){let d;if(Wa(s)){const h=J(s);return ss(h)||xy(h)}if(Sy(s))d=()=>J(s.useValue);else if(function K0(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...zn(s.deps||[]));else if(function sD(s){return!(!s||!s.useExisting)}(s))d=()=>Bt(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function Ry(s){return!!s.deps}(s))return ss(h)||xy(h);d=()=>new h(...zn(s.deps))}return d}function jd(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Hd(s,o){for(const a of s)Array.isArray(a)?Hd(a,o):a&&be(a)?Hd(a.\u0275providers,o):o(a)}class cD{}class J0{}class ew{resolveComponentFactory(o){throw function lD(s){const o=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let zd=(()=>{class s{}return s.NULL=new ew,s})();function dg(){return Za(Gn(),fe())}function Za(s,o){return new Gd(Tr(s,o))}let Gd=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=dg,s})();function Cf(s){return s instanceof Gd?s.nativeElement:s}class Oy{}let dD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function hD(){const s=fe(),a=gr(Gn().index,s);return(Gr(a)?a:s)[zt]}(),s})(),fD=(()=>{class s{}return s.\u0275prov=_t({token:s,providedIn:"root",factory:()=>null}),s})();class tw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const nw=new tw("15.2.9"),hg={},ky="ngOriginalError";function Fy(s){return s[ky]}class Df{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Fy(o);for(;a&&Fy(a);)a=Fy(a);return a||null}}function ia(s){return s instanceof Function?s():s}function uw(s,o,a){let d=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}a=h+1}}const Ly="ng-template";function Uy(s,o,a){let d=0,h=!0;for(;d<s.length;){let p=s[d++];if("string"==typeof p&&h){const y=s[d++];if(a&&"class"===p&&-1!==uw(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function Vy(s){return 4===s.type&&s.value!==Ly}function qd(s,o,a){return o===(4!==s.type||a?s.value:Ly)}function By(s,o,a){let d=4;const h=s.attrs||[],p=function lw(s){for(let o=0;o<s.length;o++)if(yd(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!y)if(4&d){if(d=2|1&d,""!==b&&!qd(s,b,a)||""===b&&1===o.length){if(Io(d))return!1;y=!0}}else{const S=8&d?b:o[++I];if(8&d&&null!==s.attrs){if(!Uy(s.attrs,S,a)){if(Io(d))return!1;y=!0}continue}const V=cw(8&d?"class":b,h,Vy(s),a);if(-1===V){if(Io(d))return!1;y=!0;continue}if(""!==S){let Z;Z=V>p?"":h[V+1].toLowerCase();const X=8&d?Z:null;if(X&&-1!==uw(X,S,0)||2&d&&S!==Z){if(Io(d))return!1;y=!0}}}}else{if(!y&&!Io(d)&&!Io(b))return!1;if(y&&Io(b))continue;y=!1,d=b|1&d}}return Io(d)||y}function Io(s){return 0==(1&s)}function cw(s,o,a,d){if(null===o)return-1;let h=0;if(d||!a){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function dw(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const d=s[a];if("number"==typeof d)return-1;if(d===o)return a;a++}return-1}(o,s)}function Tf(s,o,a=!1){for(let d=0;d<o.length;d++)if(By(s,o[d],a))return!0;return!1}function hw(s,o){return s?":not("+o.trim()+")":o}function ED(s){let o=s[0],a=1,d=2,h="",p=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&d){const I=s[++a];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!Io(y)&&(o+=hw(p,h),h=""),d=y,p=p||!Io(d);a++}return""!==h&&(o+=hw(p,h)),o}const jt={};function fw(s){pw(Ut(),fe(),Lr()+s,!1)}function pw(s,o,a,d){if(!d)if(3==(3&o[Qt])){const p=s.preOrderCheckHooks;null!==p&&Cc(o,p,a)}else{const p=s.preOrderHooks;null!==p&&pd(o,p,0,a)}Yi(a)}function mw(s,o=null,a=null,d){const h=$y(s,o,a,d);return h.resolveInjectorInitializers(),h}function $y(s,o=null,a=null,d,h=new Set){const p=[a||W,If(s)];return d=d||("object"==typeof s?void 0:ge(s)),new Y0(p,o||lg(),d||null,h)}let Wd=(()=>{class s{static create(a,d){if(Array.isArray(a))return mw({name:""},d,a,"");{const h=a.name??"";return mw({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=jn,s.NULL=new W0,s.\u0275prov=_t({token:s,providedIn:"any",factory:()=>Bt(tl)}),s.__NG_ELEMENT_ID__=-1,s})();function Yd(s,o=ft.Default){const a=fe();return null===a?Bt(s,o):Ed(Gn(),a,J(s),o)}function Ew(){throw new Error("invalid")}function Iw(s,o){const a=s.contentQueries;if(null!==a)for(let d=0;d<a.length;d+=2){const p=a[d+1];if(-1!==p){const y=s.data[p];ud(a[d]),y.contentQueries(2,o[p],p)}}}function mg(s,o,a,d,h,p,y,I,b,S,M){const V=o.blueprint.slice();return V[fr]=h,V[Qt]=76|d,(null!==M||s&&1024&s[Qt])&&(V[Qt]|=1024),Da(V),V[Sn]=V[Ds]=s,V[Ln]=a,V[Ci]=y||s&&s[Ci],V[zt]=I||s&&s[zt],V[cu]=b||s&&s[cu]||null,V[ya]=S||s&&s[ya]||null,V[pr]=p,V[bs]=function Kc(){return ls++}(),V[Fr]=M,V[rr]=2==o.type?s[rr]:V,V}function Mf(s,o,a,d,h){let p=s.data[o];if(null===p)p=function le(s,o,a,d,h){const p=rd(),y=mu(),b=s.data[o]=function bw(s,o,a,d,h,p){return{type:a,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,d,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,a,d,h),function od(){return Ft.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=d,p.attrs=h;const y=function ko(){const s=Ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Ti(p,!0),p}function Rf(s,o,a,d){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function Qd(s,o,a){Lo(o);try{const d=s.viewQuery;null!==d&&Nf(1,d,a);const h=s.template;null!==h&&Dw(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Iw(s,o),s.staticViewQueries&&Nf(2,s.viewQuery,a);const p=s.components;null!==p&&function Cw(s,o){for(let a=0;a<o.length;a++)YD(s,o[a])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[Qt]&=-5,ld()}}function yg(s,o,a,d){const h=o[Qt];if(128!=(128&h)){Lo(o);try{Da(o),function Ns(s){return Ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Dw(s,o,a,2,d);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&Cc(o,S,null)}else{const S=s.preOrderHooks;null!==S&&pd(o,S,0,null),gd(o,0)}if(function KD(s){for(let o=Ga(s);null!==o;o=qa(o)){if(!o[va])continue;const a=o[to];for(let d=0;d<a.length;d++){const h=a[d];512&h[Qt]||Oo(h[Sn],1),h[Qt]|=512}}}(o),function ZD(s){for(let o=Ga(s);null!==o;o=qa(o))for(let a=br;a<o.length;a++){const d=o[a],h=d[Qe];Ms(d)&&yg(h,d,h.template,d[Ln])}}(o),null!==s.contentQueries&&Iw(s,o),y){const S=s.contentCheckHooks;null!==S&&Cc(o,S)}else{const S=s.contentHooks;null!==S&&pd(o,S,1),gd(o,1)}!function UD(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let d=0;d<a.length;d++){const h=a[d];if(h<0)Yi(~h);else{const p=h,y=a[++d],I=a[++d];ad(y,p),I(2,o[p])}}}finally{Yi(-1)}}(s,o);const I=s.components;null!==I&&function VD(s,o){for(let a=0;a<o.length;a++)Mw(s,o[a])}(o,I);const b=s.viewQuery;if(null!==b&&Nf(2,b,d),y){const S=s.viewCheckHooks;null!==S&&Cc(o,S)}else{const S=s.viewHooks;null!==S&&pd(o,S,2),gd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Qt]&=-41,512&o[Qt]&&(o[Qt]&=-513,Oo(o[Sn],-1))}finally{ld()}}}function Dw(s,o,a,d,h){const p=Lr(),y=2&d;try{Yi(-1),y&&o.length>wn&&pw(s,o,wn,!1),Rn(y?2:0,h),a(d,h)}finally{Yi(p),Rn(y?3:1,h)}}function qy(s,o,a){if(no(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}function _g(s,o,a){td()&&(function e1(s,o,a,d){const h=a.directiveStart,p=a.directiveEnd;lu(a)&&function WD(s,o,a){const d=Tr(o,s),h=wg(a),p=s[Ci],y=Ig(s,mg(s,h,null,a.onPush?32:16,d,o,p,p.createRenderer(d,a),null,null,null));s[o.index]=y}(o,a,s.data[h+a.componentOffset]),s.firstCreatePass||Ac(a,o),K(d,o);const y=a.initialInputs;for(let I=h;I<p;I++){const b=s.data[I],S=Nn(o,s,I,a);K(S,o),null!==y&&Eg(0,I-h,S,b,0,y),ti(b)&&(gr(a.index,o)[Ln]=Nn(o,s,I,a))}}(s,o,a,Tr(a,o)),64==(64&a.flags)&&qD(s,o,a))}function vg(s,o,a=Tr){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],I=-1===y?a(o,s):s[y];s[h++]=I}}}function wg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=cn(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function cn(s,o,a,d,h,p,y,I,b,S){const M=wn+d,V=M+h,Z=function Hi(s,o){const a=[];for(let d=0;d<o;d++)a.push(d<s?null:jt);return a}(M,V),X="function"==typeof S?S():S;return Z[Qe]={type:s,blueprint:Z,template:a,queries:null,viewQuery:I,declTNode:o,data:Z.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:X,incompleteFirstPass:!1}}function sl(s,o,a,d){const h=Pf(o);null===a?h.push(d):(h.push(a),s.firstCreatePass&&Cg(s).push(d,h.length-1))}function BD(s,o,a,d){for(let h in s)if(s.hasOwnProperty(h)){a=null===a?{}:a;const p=s[h];null===d?Tw(a,o,h,p):d.hasOwnProperty(h)&&Tw(a,o,d[h],p)}return a}function Tw(s,o,a,d){s.hasOwnProperty(a)?s[a].push(o,d):s[a]=[o,d]}function Sw(s,o,a,d){if(td()){const h=null===d?null:{"":-1},p=function ps(s,o){const a=s.directiveRegistry;let d=null,h=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(Tf(o,y.selectors,!1))if(d||(d=[]),ti(y))if(null!==y.findHostDirectiveDefs){const I=[];h=h||new Map,y.findHostDirectiveDefs(y,I,h),d.unshift(...I,y),zu(s,o,I.length)}else d.unshift(y),zu(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,d,h),d.push(y)}return null===d?null:[d,h]}(s,a);let y,I;null===p?y=I=null:[y,I]=p,null!==y&&zD(s,o,a,y,h,I),h&&function en(s,o,a){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new pe(-301,!1);d.push(o[h],p)}}}(a,d,h)}a.mergedAttrs=uo(a.mergedAttrs,a.attrs)}function zD(s,o,a,d,h,p){for(let S=0;S<d.length;S++)Os(Ac(a,o),s,d[S].type);!function Zy(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,d.length);for(let S=0;S<d.length;S++){const M=d[S];M.providersResolver&&M.providersResolver(M)}let y=!1,I=!1,b=Rf(s,o,d.length,null);for(let S=0;S<d.length;S++){const M=d[S];a.mergedAttrs=uo(a.mergedAttrs,M.hostAttrs),Aw(s,a,o,b,M),Gu(b,M,h),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const V=M.type.prototype;!y&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(a.index),y=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(a.index),I=!0),b++}!function Wy(s,o,a){const h=o.directiveEnd,p=s.data,y=o.attrs,I=[];let b=null,S=null;for(let M=o.directiveStart;M<h;M++){const V=p[M],Z=a?a.get(V):null,we=Z?Z.outputs:null;b=BD(V.inputs,M,b,Z?Z.inputs:null),S=BD(V.outputs,M,S,we);const Ve=null===b||null===y||Vy(o)?null:Yy(b,M,y);I.push(Ve)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=S}(s,a,p)}function qD(s,o,a){const d=a.directiveStart,h=a.directiveEnd,p=a.index,y=function Yp(){return Ft.lFrame.currentDirectiveIndex}();try{Yi(p);for(let I=d;I<h;I++){const b=s.data[I],S=o[I];qn(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&t1(b,S)}}finally{Yi(-1),qn(y)}}function t1(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function zu(s,o,a){o.componentOffset=a,(s.components??(s.components=[])).push(o.index)}function Gu(s,o,a){if(a){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)a[o.exportAs[d]]=s;ti(o)&&(a[""]=s)}}function Aw(s,o,a,d,h){s.data[d]=h;const p=h.factory||(h.factory=ss(h.type)),y=new us(p,ti(h),Yd);s.blueprint[d]=y,a[d]=y,function Xx(s,o,a,d,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const I=~o.index;(function GD(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=I&&y.push(I),y.push(a,d,p)}}(s,o,d,Rf(s,a,h.hostVars,jt),h)}function En(s,o,a,d,h,p){const y=Tr(s,o);!function Ky(s,o,a,d,h,p,y){if(null==p)s.removeAttribute(o,h,a);else{const I=null==y?Oe(p):y(p,d||"",h);s.setAttribute(o,h,I,a)}}(o[zt],y,p,s.value,a,d,h)}function Eg(s,o,a,d,h,p){const y=p[o];if(null!==y){const I=d.setInput;for(let b=0;b<y.length;){const S=y[b++],M=y[b++],V=y[b++];null!==I?d.setInput(a,V,S,M):a[M]=V}}}function Yy(s,o,a){let d=null,h=0;for(;h<a.length;){const p=a[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const y=s[p];for(let I=0;I<y.length;I+=2)if(y[I]===o){d.push(p,y[I+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function xw(s,o,a,d){return[s,!0,!1,o,null,0,d,a,null,null]}function Mw(s,o){const a=gr(o,s);if(Ms(a)){const d=a[Qe];48&a[Qt]?yg(d,a,d.template,a[Ln]):a[Cs]>0&&Qy(a)}}function Qy(s){for(let d=Ga(s);null!==d;d=qa(d))for(let h=br;h<d.length;h++){const p=d[h];if(Ms(p))if(512&p[Qt]){const y=p[Qe];yg(y,p,y.template,p[Ln])}else p[Cs]>0&&Qy(p)}const a=s[Qe].components;if(null!==a)for(let d=0;d<a.length;d++){const h=gr(a[d],s);Ms(h)&&h[Cs]>0&&Qy(h)}}function YD(s,o){const a=gr(o,s),d=a[Qe];(function QD(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(d,a),Qd(d,a,a[Ln])}function Ig(s,o){return s[Di]?s[_a][pn]=o:s[Di]=o,s[_a]=o,o}function Vr(s){for(;s;){s[Qt]|=32;const o=Nd(s);if(Ss(s)&&!o)return s;s=o}return null}function ol(s,o,a,d=!0){const h=o[Ci];h.begin&&h.begin();try{yg(s,o,s.template,a)}catch(y){throw d&&Pw(o,y),y}finally{h.end&&h.end()}}function Nf(s,o,a){ud(0),o(s,a)}function Pf(s){return s[Js]||(s[Js]=[])}function Cg(s){return s.cleanup||(s.cleanup=[])}function Pw(s,o){const a=s[ya],d=a?a.get(Df,null):null;d&&d.handleError(o)}function Dg(s,o,a,d,h){for(let p=0;p<a.length;){const y=a[p++],I=a[p++],b=o[y],S=s.data[y];null!==S.setInput?S.setInput(b,h,d,I):b[I]=h}}function bg(s,o,a){let d=a?s.styles:null,h=a?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?p=I:1==p?h=ye(h,I):2==p&&(d=ye(d,I+": "+o[++y]+";"))}a?s.styles=d:s.stylesWithoutHost=d,a?s.classes=h:s.classesWithoutHost=h}function qu(s,o,a,d,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&d.push(ir(p)),Li(p))for(let I=br;I<p.length;I++){const b=p[I],S=b[Qe].firstChild;null!==S&&qu(b[Qe],b,S,d)}const y=a.type;if(8&y)qu(s,o,a.child,d);else if(32&y){const I=Ur(a,o);let b;for(;b=I();)d.push(b)}else if(16&y){const I=Bu(o,a);if(Array.isArray(I))d.push(...I);else{const b=Nd(o[rr]);qu(b[Qe],b,I,d,!0)}}a=h?a.projectionNext:a.next}return d}class Jd{get rootNodes(){const o=this._lView,a=o[Qe];return qu(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(o){this._lView[Ln]=o}get destroyed(){return 128==(128&this._lView[Qt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Sn];if(Li(o)){const a=o[Ts],d=a?a.indexOf(this):-1;d>-1&&(x(o,d),ka(a,d))}this._attachedToViewContainer=!1}P(this._lView[Qe],this._lView)}onDestroy(o){sl(this._lView[Qe],this._lView,null,o)}markForCheck(){Vr(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qt]&=-65}reattach(){this._lView[Qt]|=64}detectChanges(){ol(this._lView[Qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cf(s,o){hf(s,o,o[zt],2,null,null)}(this._lView[Qe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=o}}class Tg extends Jd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ol(o[Qe],o,o[Ln],!1)}checkNoChanges(){}get context(){return null}}class Xy extends zd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=vt(o);return new Of(a,this.ngModule)}}function Ow(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class XD{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,d){d=Dr(d);const h=this.injector.get(o,hg,d);return h!==hg||a===hg?h:this.parentInjector.get(o,a,d)}}class Of extends J0{get inputs(){return Ow(this.componentDef.inputs)}get outputs(){return Ow(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function ID(s){return s.map(ED).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,d,h){let p=(h=h||this.ngModule)instanceof nl?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new XD(o,p):o,I=y.get(Oy,null);if(null===I)throw new pe(407,!1);const b=y.get(fD,null),S=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",V=d?function il(s,o,a){return s.selectRootElement(o,a===F.ShadowDom)}(S,d,this.componentDef.encapsulation):uf(S,M,function JD(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),Z=this.componentDef.onPush?288:272,X=cn(0,null,null,1,0,null,null,null,null,null),we=mg(null,X,null,Z,null,null,I,S,b,y,null);let Ve,Xe;Lo(we);try{const Ye=this.componentDef;let kt,Ne=null;Ye.findHostDirectiveDefs?(kt=[],Ne=new Map,Ye.findHostDirectiveDefs(Ye,kt,Ne),kt.push(Ye)):kt=[Ye];const Wt=function Lw(s,o){const a=s[Qe],d=wn;return s[d]=o,Mf(a,d,2,"#host",null)}(we,V),yn=function e_(s,o,a,d,h,p,y,I){const b=h[Qe];!function Uw(s,o,a,d){for(const h of s)o.mergedAttrs=uo(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(bg(o,o.mergedAttrs,!0),null!==a&&pf(d,a,o))}(d,s,o,y);const S=p.createRenderer(o,a),M=mg(h,wg(a),null,a.onPush?32:16,h[s.index],s,p,S,I||null,null,null);return b.firstCreatePass&&zu(b,s,d.length-1),Ig(h,M),h[s.index]=M}(Wt,V,Ye,kt,we,I,S);Xe=pu(X,wn),V&&function eb(s,o,a,d){if(d)Bo(s,a,["ng-version",nw.full]);else{const{attrs:h,classes:p}=function CD(s){const o=[],a=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&a.push(p);else{if(!Io(h))break;h=p}d++}return{attrs:o,classes:a}}(o.selectors[0]);h&&Bo(s,a,h),p&&p.length>0&&$u(s,a,p.join(" "))}}(S,Ye,V,d),void 0!==a&&function t_(s,o,a){const d=s.projection=[];for(let h=0;h<o.length;h++){const p=a[h];d.push(null!=p?Array.from(p):null)}}(Xe,this.ngContentSelectors,a),Ve=function kf(s,o,a,d,h,p){const y=Gn(),I=h[Qe],b=Tr(y,h);zD(I,h,y,a,null,d);for(let M=0;M<a.length;M++)K(Nn(h,I,y.directiveStart+M,y),h);qD(I,h,y),b&&K(b,h);const S=Nn(h,I,y.directiveStart+y.componentOffset,y);if(s[Ln]=h[Ln]=S,null!==p)for(const M of p)M(S,o);return qy(I,y,s),S}(yn,Ye,kt,Ne,we,[n_]),Qd(X,we,null)}finally{ld()}return new kw(this.componentType,Ve,Za(Xe,we),we,Xe)}}class kw extends cD{constructor(o,a,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Tg(h),this.componentType=o}setInput(o,a){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){const p=this._rootLView;Dg(p[Qe],p,h,o,a),Vr(gr(this._tNode.index,p))}}get injector(){return new zo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function n_(){const s=Gn();wu(fe()[Qe],s)}function Ff(s){let o=function Vw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const d=[s];for(;o;){let h;if(ti(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new pe(903,!1);h=o.\u0275dir}if(h){if(a){d.push(h);const y=s;y.inputs=Lf(s.inputs),y.declaredInputs=Lf(s.declaredInputs),y.outputs=Lf(s.outputs);const I=h.hostBindings;I&&nb(s,I);const b=h.viewQuery,S=h.contentQueries;if(b&&i_(s,b),S&&tb(s,S),_e(s.inputs,h.inputs),_e(s.declaredInputs,h.declaredInputs),_e(s.outputs,h.outputs),ti(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const I=p[y];I&&I.ngInherit&&I(s),I===Ff&&(a=!1)}}o=Object.getPrototypeOf(o)}!function r_(s){let o=0,a=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=uo(h.hostAttrs,a=uo(a,h.hostAttrs))}}(d)}function Lf(s){return s===R?{}:s===W?[]:s}function i_(s,o){const a=s.viewQuery;s.viewQuery=a?(d,h)=>{o(d,h),a(d,h)}:o}function tb(s,o){const a=s.contentQueries;s.contentQueries=a?(d,h,p)=>{o(d,h,p),a(d,h,p)}:o}function nb(s,o){const a=s.hostBindings;s.hostBindings=a?(d,h)=>{o(d,h),a(d,h)}:o}function Ya(s){return!!a_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function a_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ri(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Xd(s,o,a,d){const h=fe();return Ri(h,as(),o)&&(Ut(),En(An(),h,s,o,a,d)),Xd}function Gw(s,o,a,d,h,p,y,I){const b=fe(),S=Ut(),M=s+wn,V=S.firstCreatePass?function zw(s,o,a,d,h,p,y,I,b){const S=o.consts,M=Mf(o,s,4,y||null,os(S,I));Sw(o,a,M,os(S,b)),wu(o,M);const V=M.tView=cn(2,M,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,M),V.queries=o.queries.embeddedTView(M)),M}(M,S,b,o,a,d,h,p,y):S.data[M];Ti(V,!1);const Z=b[zt].createComment("");Vu(S,b,Z,V),K(Z,b),Ig(b,b[M]=xw(Z,b,Z,V)),wa(V)&&_g(S,b,V),null!=y&&vg(b,V,I)}function fl(s,o,a){const d=fe();return Ri(d,as(),o)&&function fs(s,o,a,d,h,p,y,I){const b=Tr(o,a);let M,S=o.inputs;!I&&null!=S&&(M=S[d])?(Dg(s,a,M,d,h),lu(o)&&function jD(s,o){const a=gr(o,s);16&a[Qt]||(a[Qt]|=32)}(a,o.index)):3&o.type&&(d=function $D(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,o.value||"",d):h,p.setProperty(b,d,h))}(Ut(),An(),d,s,o,d[zt],a,!1),fl}function Ww(s,o,a,d,h){const y=h?"class":"style";Dg(s,a,o.inputs[y],y,d)}function h_(s,o,a,d){const h=fe(),p=Ut(),y=wn+s,I=h[zt],b=p.firstCreatePass?function d_(s,o,a,d,h,p){const y=o.consts,b=Mf(o,s,2,d,os(y,h));return Sw(o,a,b,os(y,p)),null!==b.attrs&&bg(b,b.attrs,!1),null!==b.mergedAttrs&&bg(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(y,p,h,o,a,d):p.data[y],S=h[y]=uf(I,o,function fd(){return Ft.lFrame.currentNamespace}()),M=wa(b);return Ti(b,!0),pf(I,S,b),32!=(32&b.flags)&&Vu(p,h,S,b),0===function gc(){return Ft.lFrame.elementDepthCount}()&&K(S,h),function mc(){Ft.lFrame.elementDepthCount++}(),M&&(_g(p,h,b),qy(p,b,h)),null!==d&&vg(h,b),h_}function Ng(){let s=Gn();mu()?id():(s=s.parent,Ti(s,!1));const o=s;!function yc(){Ft.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(wu(a,s),no(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function cs(s){return 0!=(8&s.flags)}(o)&&Ww(a,o,fe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Dc(s){return 0!=(16&s.flags)}(o)&&Ww(a,o,fe(),o.stylesWithoutHost,!1),Ng}function Zw(s,o,a,d){return h_(s,o,a,d),Ng(),Zw}function Pg(s,o,a){const d=fe(),h=Ut(),p=s+wn,y=h.firstCreatePass?function pb(s,o,a,d,h){const p=o.consts,y=os(p,d),I=Mf(o,s,8,"ng-container",y);return null!==y&&bg(I,y,!0),Sw(o,a,I,os(p,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(p,h,d,o,a):h.data[p];Ti(y,!0);const I=d[p]=d[zt].createComment("");return Vu(h,d,I,y),K(I,d),wa(y)&&(_g(h,d,y),qy(h,y,d)),null!=a&&vg(d,y),Pg}function f_(){let s=Gn();const o=Ut();return mu()?id():(s=s.parent,Ti(s,!1)),o.firstCreatePass&&(wu(o,s),no(s)&&o.queries.elementEnd(s)),f_}function Kw(){return fe()}function Yw(s){return!!s&&"function"==typeof s.then}function mb(s){return!!s&&"function"==typeof s.subscribe}const yb=mb;function Qw(s,o,a,d){const h=fe(),p=Ut(),y=Gn();return function Jw(s,o,a,d,h,p,y){const I=wa(d),S=s.firstCreatePass&&Cg(s),M=o[Ln],V=Pf(o);let Z=!0;if(3&d.type||y){const Ve=Tr(d,o),Xe=y?y(Ve):Ve,Ye=V.length,kt=y?Wt=>y(ir(Wt[d.index])):d.index;let Ne=null;if(!y&&I&&(Ne=function n1(s,o,a,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===a&&h[p+1]===d){const I=o[Js],b=h[p+2];return I.length>b?I[b]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,d.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=p,Ne.__ngLastListenerFn__=p,Z=!1;else{p=g_(d,o,M,p,!1);const Wt=a.listen(Xe,h,p);V.push(p,Wt),S&&S.push(h,kt,Ye,Ye+1)}}else p=g_(d,o,M,p,!1);const X=d.outputs;let we;if(Z&&null!==X&&(we=X[h])){const Ve=we.length;if(Ve)for(let Xe=0;Xe<Ve;Xe+=2){const yn=o[we[Xe]][we[Xe+1]].subscribe(p),Er=V.length;V.push(p,yn),S&&S.push(h,d.index,Er,-(Er+1))}}}(p,h,h[zt],y,s,o,d),Qw}function p_(s,o,a,d){try{return Rn(6,o,a),!1!==a(d)}catch(h){return Pw(s,h),!1}finally{Rn(7,o,a)}}function g_(s,o,a,d,h){return function p(y){if(y===Function)return d;Vr(s.componentOffset>-1?gr(s.index,o):o);let b=p_(o,a,d,y),S=p.__ngNextListenerFn__;for(;S;)b=p_(o,a,S,y)&&b,S=S.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function m_(s=1){return function Ec(s){return(Ft.lFrame.contextLView=function dd(s,o){for(;s>0;)o=o[Ds],s--;return o}(s,Ft.lFrame.contextLView))[Ln]}(s)}function Fg(s,o){return s<<17|o<<2}function pl(s){return s>>17&32767}function rE(s){return 2|s}function ih(s){return(131068&s)>>2}function iE(s,o){return-131069&s|o<<2}function sE(s){return 1|s}function Cb(s,o,a,d,h){const p=s[a+1],y=null===o;let I=d?pl(p):ih(p),b=!1;for(;0!==I&&(!1===b||y);){const M=s[I+1];a1(s[I],o)&&(b=!0,s[I+1]=d?sE(M):rE(M)),I=d?pl(M):ih(M)}b&&(s[a+1]=d?rE(p):sE(p))}function a1(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ui(s,o)>=0}function oE(s,o){return function oa(s,o,a,d){const h=fe(),p=Ut(),y=function Ki(s){const o=Ft.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);p.firstUpdatePass&&function Nb(s,o,a,d){const h=s.data;if(null===h[a+1]){const p=h[Lr()],y=function Rb(s,o){return o>=s.expandoStartIndex}(s,a);(function Fb(s,o){return 0!=(s.flags&(o?8:16))})(p,d)&&null===o&&!y&&(o=!1),o=function m1(s,o,a,d){const h=function yu(s){const o=Ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(a=Lg(a=aE(null,s,o,a,d),o.attrs,d),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(a=aE(h,s,o,a,d),null===p){let b=function y1(s,o,a){const d=a?o.classBindings:o.styleBindings;if(0!==ih(d))return s[pl(d)]}(s,o,d);void 0!==b&&Array.isArray(b)&&(b=aE(null,s,o,b[1],d),b=Lg(b,o.attrs,d),function _1(s,o,a,d){s[pl(a?o.classBindings:o.styleBindings)]=d}(s,o,d,b))}else p=function v1(s,o,a){let d;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)d=Lg(d,s[p].hostAttrs,a);return Lg(d,o.attrs,a)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,d),function s1(s,o,a,d,h,p){let y=p?o.classBindings:o.styleBindings,I=pl(y),b=ih(y);s[d]=a;let M,S=!1;if(Array.isArray(a)?(M=a[1],(null===M||Ui(a,M)>0)&&(S=!0)):M=a,h)if(0!==b){const Z=pl(s[I+1]);s[d+1]=Fg(Z,I),0!==Z&&(s[Z+1]=iE(s[Z+1],d)),s[I+1]=function Ib(s,o){return 131071&s|o<<17}(s[I+1],d)}else s[d+1]=Fg(I,0),0!==I&&(s[I+1]=iE(s[I+1],d)),I=d;else s[d+1]=Fg(b,0),0===I?I=d:s[b+1]=iE(s[b+1],d),b=d;S&&(s[d+1]=rE(s[d+1])),Cb(s,M,d,!0),Cb(s,M,d,!1),function o1(s,o,a,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ui(p,o)>=0&&(a[d+1]=sE(a[d+1]))}(o,M,s,d,p),y=Fg(I,b),p?o.classBindings=y:o.styleBindings=y}(h,p,o,a,y,d)}}(p,s,y,d),o!==jt&&Ri(h,y,o)&&function Ob(s,o,a,d,h,p,y,I){if(!(3&o.type))return;const b=s.data,S=b[I+1],M=function i1(s){return 1==(1&s)}(S)?kb(b,o,a,h,ih(S),y):void 0;w_(M)||(w_(p)||function r1(s){return 2==(2&s)}(S)&&(p=kb(b,null,a,h,I,y)),function na(s,o,a,d,h){if(o)h?s.addClass(a,d):s.removeClass(a,d);else{let p=-1===d.indexOf("-")?void 0:At.DashCase;null==h?s.removeStyle(a,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=At.Important),s.setStyle(a,d,h,p))}}(d,y,oo(Lr(),a),h,p))}(p,p.data[Lr()],h,h[zt],s,h[y+1]=function C1(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ge(ra(s)))),s}(o,a),d,y)}(s,o,null,!0),oE}function aE(s,o,a,d,h){let p=null;const y=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<y&&(p=o[I],d=Lg(d,p.hostAttrs,h),p!==s);)I++;return null!==s&&(a.directiveStylingLast=I),d}function Lg(s,o,a){const d=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Si(s,y,!!a||o[++p]))}return void 0===s?null:s}function kb(s,o,a,d,h,p){const y=null===o;let I;for(;h>0;){const b=s[h],S=Array.isArray(b),M=S?b[1]:b,V=null===M;let Z=a[h+1];Z===jt&&(Z=V?W:void 0);let X=V?nn(Z,d):M===d?Z:void 0;if(S&&!w_(X)&&(X=nn(b,d)),w_(X)&&(I=X,y))return I;const we=s[h+1];h=y?pl(we):ih(we)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(I=nn(b,d))}return I}function w_(s){return void 0!==s}function Lb(s,o=""){const a=fe(),d=Ut(),h=s+wn,p=d.firstCreatePass?Mf(d,h,1,o,null):d.data[h],y=a[h]=function Uu(s,o){return s.createText(o)}(a[zt],o);Vu(d,a,y,p),Ti(p,!1)}function uE(s){return cE("",s,""),uE}function cE(s,o,a){const d=fe(),h=function cl(s,o,a,d){return Ri(s,as(),a)?o+Oe(a)+d:jt}(d,s,o,a);return h!==jt&&function Ka(s,o,a){const d=oo(o,s);!function af(s,o,a){s.setValue(o,a)}(s[zt],d,a)}(d,Lr(),h),cE}const Xa=void 0;var S_=["en",[["a","p"],["AM","PM"],Xa],[["AM","PM"],Xa,Xa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xa,"{1} 'at' {0}",Xa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function T_(s){const a=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let ml={};function yl(s){const o=function A_(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=mE(o);if(a)return a;const d=o.split("-")[0];if(a=mE(d),a)return a;if("en"===d)return S_;throw new pe(701,!1)}function oh(s){return yl(s)[Mt.PluralCase]}function mE(s){return s in ml||(ml[s]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[s]),ml[s]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const _l="en-US";let Gg=_l;function Co(s,o,a,d,h){if(s=J(s),Array.isArray(s))for(let p=0;p<s.length;p++)Co(s[p],o,a,d,h);else{const p=Ut(),y=fe();let I=Wa(s)?s:J(s.provide),b=My(s);const S=Gn(),M=1048575&S.providerIndexes,V=S.directiveStart,Z=S.providerIndexes>>20;if(Wa(s)||!s.multi){const X=new us(b,h,Yd),we=rm(I,o,h?M:M+Z,V);-1===we?(Os(Ac(S,y),p,I),hh(p,s,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(X),y.push(X)):(a[we]=X,y[we]=X)}else{const X=rm(I,o,M+Z,V),we=rm(I,o,M,M+Z),Xe=we>=0&&a[we];if(h&&!Xe||!h&&!(X>=0&&a[X])){Os(Ac(S,y),p,I);const Ye=function np(s,o,a,d,h){const p=new us(s,a,Yd);return p.multi=[],p.index=o,p.componentProviders=0,tp(p,h,d&&!a),p}(h?im:Zn,a.length,h,d,b);!h&&Xe&&(a[we].providerFactory=Ye),hh(p,s,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(Ye),y.push(Ye)}else hh(p,s,X>-1?X:we,tp(a[h?we:X],b,!h&&d));!h&&d&&Xe&&a[we].componentProviders++}}}function hh(s,o,a,d){const h=Wa(o),p=function ug(s){return!!s.useClass}(o);if(h||p){const b=(p?J(o.useClass):o).prototype.ngOnDestroy;if(b){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=S.indexOf(a);-1===M?S.push(a,[d,b]):S[M+1].push(d,b)}else S.push(a,b)}}}function tp(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function rm(s,o,a,d){for(let h=a;h<d;h++)if(o[h]===s)return h;return-1}function Zn(s,o,a,d){return Dl(this.multi,[])}function im(s,o,a,d){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=Nn(a,a[Qe],this.providerFactory.index,d);p=I.slice(0,y),Dl(h,p);for(let b=y;b<I.length;b++)p.push(I[b])}else p=[],Dl(h,p);return p}function Dl(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function LE(s,o=[]){return a=>{a.providersResolver=(d,h)=>function Cl(s,o,a){const d=Ut();if(d.firstCreatePass){const h=ti(s);Co(a,d.data,d.blueprint,h,!0),Co(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class bl{}class UE{}function aT(s,o){return new VE(s,o??null)}class VE extends bl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xy(this);const d=hr(o);this._bootstrapComponents=ia(d.bootstrap),this._r3Injector=$y(o,a,[{provide:bl,useValue:this},{provide:zd,useValue:this.componentFactoryResolver}],ge(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Tl extends UE{constructor(o){super(),this.moduleType=o}create(o){return new VE(this.moduleType,o)}}class Yu extends bl{constructor(o,a,d){super(),this.componentFactoryResolver=new Xy(this),this.instance=null;const h=new Y0([...o,{provide:bl,useValue:this},{provide:zd,useValue:this.componentFactoryResolver}],a||lg(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function sm(s,o,a=null){return new Yu(s,o,a).injector}let BE=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const d=$d(0,a.type),h=d.length>0?sm([d],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=_t({token:s,providedIn:"environment",factory:()=>new s(Bt(nl))}),s})();function j_(s){s.getStandaloneInjector=o=>o.get(BE).getOrCreateStandaloneInjector(s)}function ip(s,o,a){const d=function Sr(){const s=Ft.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,h=fe();return h[d]===jt?function sa(s,o,a){return s[o]=a}(h,d,a?o.call(a):o()):function Uf(s,o){return s[o]}(h,d)}function fh(s){return o=>{setTimeout(s,void 0,o)}}const da=class JE extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,d){let h=o,p=a||(()=>null),y=d;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),p=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(p=fh(p),h&&(h=fh(h)),y&&(y=fh(y)));const I=super.subscribe({next:h,error:p,complete:y});return o instanceof $.w0&&o.add(I),I}};function XE(){return this._results[Symbol.iterator]()}class Sl{get changes(){return this._changes||(this._changes=new da)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Sl.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=XE)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const d=this;d.dirty=!1;const h=function gi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function kc(s,o,a){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(d._results,h,a))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ph=(()=>{class s{}return s.__NG_ELEMENT_ID__=tv,s})();const eI=ph,ev=class extends eI{constructor(o,a,d){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=d}createEmbeddedView(o,a){const d=this._declarationTContainer.tView,h=mg(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,a||null);h[Xs]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[pi];return null!==y&&(h[pi]=y.createEmbeddedView(d)),Qd(d,h,o),new Jd(h)}};function tv(){return lp(Gn(),fe())}function lp(s,o){return 4&s.type?new ev(o,s,Za(s,o)):null}let Al=(()=>{class s{}return s.__NG_ELEMENT_ID__=tI,s})();function tI(){return rv(Gn(),fe())}const nI=Al,Xu=class extends nI{constructor(o,a,d){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=d}get element(){return Za(this._hostTNode,this._hostLView)}get injector(){return new zo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Wn(this._hostTNode,this._hostLView);if(co(o)){const a=Ra(o,this._hostLView),d=jo(o);return new zo(a[Qe].data[d+8],a)}return new zo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=nv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-br}createEmbeddedView(o,a,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const y=o.createEmbeddedView(a||{},p);return this.insert(y,h),y}createComponent(o,a,d,h,p){const y=o&&!function Mu(s){return"function"==typeof s}(o);let I;if(y)I=a;else{const V=a||{};I=V.index,d=V.injector,h=V.projectableNodes,p=V.environmentInjector||V.ngModuleRef}const b=y?o:new Of(vt(o)),S=d||this.parentInjector;if(!p&&null==b.ngModule){const Z=(y?S:this.parentInjector).get(nl,null);Z&&(p=Z)}const M=b.create(S,h,void 0,p);return this.insert(M.hostView,I),M}insert(o,a){const d=o._lView,h=d[Qe];if(function ed(s){return Li(s[Sn])}(d)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const V=d[Sn],Z=new Xu(V,V[pr],V[Sn]);Z.detach(Z.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function f(s,o,a,d){const h=br+d,p=a.length;d>0&&(a[h-1][pn]=o),d<p-br?(o[pn]=a[h],Fc(a,br+d,o)):(a.push(o),o[pn]=null),o[Sn]=a;const y=o[Xs];null!==y&&a!==y&&function m(s,o){const a=s[to];o[rr]!==o[Sn][Sn][rr]&&(s[va]=!0),null===a?s[to]=[o]:a.push(o)}(y,o);const I=o[pi];null!==I&&I.insertView(s),o[Qt]|=64}(h,d,y,p);const I=ta(p,y),b=d[zt],S=ds(b,y[xo]);return null!==S&&function ly(s,o,a,d,h,p){d[fr]=h,d[pr]=o,hf(s,d,a,1,h,p)}(h,y[pr],b,d,S,I),o.attachToViewContainerRef(),Fc(am(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=nv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),d=x(this._lContainer,a);d&&(ka(am(this._lContainer),a),P(d[Qe],d))}detach(o){const a=this._adjustIndex(o,-1),d=x(this._lContainer,a);return d&&null!=ka(am(this._lContainer),a)?new Jd(d):null}_adjustIndex(o,a=0){return o??this.length+a}};function nv(s){return s[Ts]}function am(s){return s[Ts]||(s[Ts]=[])}function rv(s,o){let a;const d=o[s.index];if(Li(d))a=d;else{let h;if(8&s.type)h=ir(d);else{const p=o[zt];h=p.createComment("");const y=Tr(s,o);Gt(p,ds(p,y),h,function lf(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=a=xw(d,o,h,s),Ig(o,a)}return new Xu(a,s,o)}class um{constructor(o){this.queryList=o,this.matches=null}clone(){return new um(this.queryList)}setDirty(){this.queryList.setDirty()}}class gh{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const d=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<d;p++){const y=a.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new gh(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==gs(o,a).matches&&this.queries[a].setDirty()}}class Ji{constructor(o,a,d=null){this.predicate=o,this.flags=a,this.read=d}}class cm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let d=0;d<this.length;d++){const h=null!==a?a.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==a?a.push(p):a=[p])}return null!==a?new cm(a):null}template(o,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class lm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new lm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,a,mh(a,p)),this.matchTNodeWithReadOption(o,a,Ho(a,o,p,!1,!1))}else d===ph?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ho(a,o,d,!1,!1))}matchTNodeWithReadOption(o,a,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Gd||h===Al||h===ph&&4&a.type)this.addMatch(a.index,-2);else{const p=Ho(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,d)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function mh(s,o){const a=s.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===o)return a[d+1];return null}function Do(s,o,a,d){return-1===a?function pT(s,o){return 11&s.type?Za(s,o):4&s.type?lp(s,o):null}(o,s):-2===a?function iv(s,o,a){return a===Gd?Za(o,s):a===ph?lp(o,s):a===Al?rv(o,s):void 0}(s,o,d):Nn(s,s[Qe],a,o)}function Dn(s,o,a,d){const h=o[pi].queries[d];if(null===h.matches){const p=s.data,y=a.matches,I=[];for(let b=0;b<y.length;b+=2){const S=y[b];I.push(S<0?null:Do(o,p[S],y[b+1],a.metadata.read))}h.matches=I}return h.matches}function sv(s,o,a,d){const h=s.queries.getByIndex(a),p=h.matches;if(null!==p){const y=Dn(s,o,h,a);for(let I=0;I<p.length;I+=2){const b=p[I];if(b>0)d.push(y[I/2]);else{const S=p[I+1],M=o[-b];for(let V=br;V<M.length;V++){const Z=M[V];Z[Xs]===Z[Sn]&&sv(Z[Qe],Z,S,d)}if(null!==M[to]){const V=M[to];for(let Z=0;Z<V.length;Z++){const X=V[Z];sv(X[Qe],X,S,d)}}}}}return d}function dm(s){const o=fe(),a=Ut(),d=Ta();ud(d+1);const h=gs(a,d);if(s.dirty&&function Ca(s){return 4==(4&s[Qt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?sv(a,o,d,[]):Dn(a,o,h,d);s.reset(p,Cf),s.notifyOnChanges()}return!0}return!1}function ov(s,o,a,d){const h=Ut();if(h.firstCreatePass){const p=Gn();(function av(s,o,a){null===s.queries&&(s.queries=new cm),s.queries.track(new lm(o,a))})(h,new Ji(o,a,d),p.index),function eu(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function fm(s,o,a){const d=new Sl(4==(4&a));sl(s,o,d,d.destroy),null===o[pi]&&(o[pi]=new gh),o[pi].queries.push(new um(d))}(h,fe(),a)}function hm(){return function yh(s,o){return s[pi].queries[o].queryList}(fe(),Ta())}function gs(s,o){return s.queries.getByIndex(o)}function uv(s){return!!hr(s)}function ym(...s){}const mv=new un("Application Initializer");let fp=(()=>{class s{constructor(a){this.appInits=a,this.resolve=ym,this.reject=ym,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Yw(p))a.push(p);else if(yb(p)){const y=new Promise((I,b)=>{p.subscribe({complete:I,error:b})});a.push(y)}}Promise.all(a).then(()=>{d()}).catch(h=>{this.reject(h)}),0===a.length&&d(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Bt(mv,8))},s.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Xi=new un("AppId",{providedIn:"root",factory:function vm(){return`${wm()}${wm()}${wm()}`}});function wm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ru=new un("Platform Initializer"),yv=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let bo=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const tc=new un("LocaleId",{providedIn:"root",factory:()=>Mn(tc,ft.Optional|ft.SkipSelf)||function DT(){return typeof $localize<"u"&&$localize.locale||_l}()}),nc=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vv{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let TT=(()=>{class s{compileModuleSync(a){return new Tl(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),p=ia(hr(a).declarations).reduce((y,I)=>{const b=vt(I);return b&&y.push(new Of(b)),y},[]);return new vv(d,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gI=(()=>Promise.resolve(0))();function Zs(s){typeof Zone>"u"?gI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ms{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new da(!1),this.onMicrotaskEmpty=new da(!1),this.onStable=new da(!1),this.onError=new da(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&a,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function mI(){let s=ln.requestAnimationFrame,o=ln.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function MT(s){const o=()=>{!function xT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(ln,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Cv(s),s.isCheckStableRunning=!0,Iv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Cv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,h,p,y,I)=>{try{return yI(s),a.invokeTask(h,p,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),_I(s)}},onInvoke:(a,d,h,p,y,I,b)=>{try{return yI(s),a.invoke(h,p,y,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),_I(s)}},onHasTask:(a,d,h,p)=>{a.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Cv(s),Iv(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,d,h,p)=>(a.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ms.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(ms.isInAngularZone())throw new pe(909,!1)}run(o,a,d){return this._inner.run(o,a,d)}runTask(o,a,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,AT,ym,ym);try{return p.runTask(y,a,d)}finally{p.cancelTask(y)}}runGuarded(o,a,d){return this._inner.runGuarded(o,a,d)}runOutsideAngular(o){return this._outer.run(o)}}const AT={};function Iv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Cv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function yI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function _I(s){s._nesting--,Iv(s)}class RT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new da,this.onMicrotaskEmpty=new da,this.onStable=new da,this.onError=new da}run(o,a,d){return o.apply(a,d)}runGuarded(o,a,d){return o.apply(a,d)}runOutsideAngular(o){return o()}runTask(o,a,d,h){return o.apply(a,d)}}const vI=new un(""),wI=new un("");let Dv,NT=(()=>{class s{constructor(a,d,h){this._ngZone=a,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Dv||(function PT(s){Dv=s}(h),h.addToWindow(d)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ms.assertNotInAngularZone(),Zs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zs(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,d,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(Bt(ms),Bt(EI),Bt(wI))},s.\u0275prov=_t({token:s,factory:s.\u0275fac}),s})(),EI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return Dv?.findTestabilityInTree(this,a,d)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const iu=!1;let su=null;const II=new un("AllowMultipleToken"),Em=new un("PlatformDestroyListeners"),bv=new un("appBootstrapListener");class DI{constructor(o,a){this.name=o,this.token=a}}function di(s,o,a=[]){const d=`Platform: ${o}`,h=new un(d);return(p=[])=>{let y=Oi();if(!y||y.injector.get(II,!1)){const I=[...a,...p,{provide:h,useValue:!0}];s?s(I):function rc(s){if(su&&!su.get(II,!1))throw new pe(400,!1);su=s;const o=s.get(Av);(function Pn(s){const o=s.get(ru,null);o&&o.forEach(a=>a())})(s)}(function Sv(s=[],o){return Wd.create({name:o,providers:[{provide:ju,useValue:"platform"},{provide:Em,useValue:new Set([()=>su=null])},...s]})}(I,d))}return function Kn(s){const o=Oi();if(!o)throw new pe(401,!1);return o}()}}function Oi(){return su?.get(Av)??null}let Av=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,d){const h=function Br(s,o){let a;return a="noop"===s?new RT:("zone.js"===s?void 0:s)||new ms(o),a}(d?.ngZone,function TI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),p=[{provide:ms,useValue:h}];return h.run(()=>{const y=Wd.create({providers:p,parent:this.injector,name:a.moduleType.name}),I=a.create(y),b=I.injector.get(Df,null);if(!b)throw new pe(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:M=>{b.handleError(M)}});I.onDestroy(()=>{Ks(this._modules,I),S.unsubscribe()})}),function SI(s,o,a){try{const d=a();return Yw(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(b,h,()=>{const S=I.injector.get(fp);return S.runInitializers(),S.donePromise.then(()=>(function x_(s){Le(s,"Expected localeId to be defined"),"string"==typeof s&&(Gg=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(tc,_l)||_l),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,d=[]){const h=ou({},d);return function OT(s,o,a){const d=new Tl(a);return Promise.resolve(d)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const d=a.injector.get(Yn);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new pe(-403,!1);a.instance.ngDoBootstrap(d)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const a=this._injector.get(Em,null);a&&(a.forEach(d=>d()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Bt(Wd))},s.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ou(s,o){return Array.isArray(o)?o.reduce(ou,s):{...s,...o}}let Yn=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,d,h){this._zone=a,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new k.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{ms.assertNotInAngularZone(),Zs(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{ms.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ee.T)(p,y.pipe((0,ie.B)()))}bootstrap(a,d){const h=a instanceof J0;if(!this._injector.get(fp).done){!h&&kr(a);throw new pe(405,iu)}let y;y=h?a:this._injector.get(zd).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const I=function li(s){return s.isBoundToModule}(y)?void 0:this._injector.get(bl),S=y.create(Wd.NULL,[],d||y.selector,I),M=S.location.nativeElement,V=S.injector.get(vI,null);return V?.registerApplication(M),S.onDestroy(()=>{this.detachView(S.hostView),Ks(this.components,S),V?.unregisterApplication(M)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;Ks(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const d=this._injector.get(bv,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ks(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new pe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Bt(ms),Bt(nl),Bt(Df))},s.\u0275prov=_t({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ks(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}function yp(){return!1}let ic=(()=>{class s{}return s.__NG_ELEMENT_ID__=pa,s})();function pa(s){return function vp(s,o,a){if(lu(s)&&!a){const d=gr(s.index,o);return new Jd(d,d)}return 47&s.type?new Jd(o[rr],o):null}(Gn(),fe(),16==(16&s))}class Nv{constructor(){}supports(o){return Ya(o)}create(o){return new VT(o)}}const Ch=(s,o)=>o;class VT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Ch}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,d=this._removalsHead,h=0,p=null;for(;a||d;){const y=!d||a&&a.currentIndex<Fl(d,h,p)?a:d,I=Fl(y,h,p),b=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{p||(p=[]);const S=I-h,M=b-h;if(S!=M){for(let Z=0;Z<S;Z++){const X=Z<p.length?p[Z]:p[Z]=0,we=X+Z;M<=we&&we<S&&(p[Z]=X+1)}p[y.previousIndex]=M-S}}I!==b&&o(y,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ya(o))throw new pe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,a=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],y=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,y)?(d&&(a=this._verifyReinsertion(a,p,y,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,I),d=!0),a=a._next}else h=0,function ob(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let d;for(;!(d=a.next()).done;)o(d.value)}}(o,I=>{y=this._trackByFn(h,I),null!==a&&Object.is(a.trackById,y)?(d&&(a=this._verifyReinsertion(a,I,y,h)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,y,h),d=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new MI(a,d),p,h),o}_verifyReinsertion(o,a,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,d),this._addToMoves(o,d),o}_moveAfter(o,a,d){return this._unlink(o),this._insertAfter(o,a,d),this._addToMoves(o,d),o}_addAfter(o,a,d){return this._insertAfter(o,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,d){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new bn),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,d=o._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bn),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class MI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dn{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const a=o._prevDup,d=o._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class bn{constructor(){this.map=new Map}put(o){const a=o.trackById;let d=this.map.get(a);d||(d=new dn,this.map.set(a,d)),d.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fl(s,o,a){const d=s.previousIndex;if(null===d)return d;let h=0;return a&&d<a.length&&(h=a[d]),d+o+h}class Tm{constructor(){}supports(o){return o instanceof Map||a_(o)}create(){return new Pv}}class Pv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||a_(o)))throw new pe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,d);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const d=o._prev;return a._next=o,a._prev=d,o._prev=a,d&&(d._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new RI(o);return this._records.set(o,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(d=>a(o[d],d))}}class RI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sm(){return new Am([new Nv])}let Am=(()=>{class s{constructor(a){this.factories=a}static create(a,d){if(null!=d){const h=d.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:d=>s.create(a,d||Sm()),deps:[[s,new bt,new go]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(null!=d)return d;throw new pe(901,!1)}}return s.\u0275prov=_t({token:s,providedIn:"root",factory:Sm}),s})();function Ov(){return new kv([new Tm])}let kv=(()=>{class s{constructor(a){this.factories=a}static create(a,d){if(d){const h=d.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:d=>s.create(a,d||Ov()),deps:[[s,new bt,new go]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(d)return d;throw new pe(901,!1)}}return s.\u0275prov=_t({token:s,providedIn:"root",factory:Ov}),s})();const NI=di(null,"core",[]);let zT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Bt(Yn))},s.\u0275mod=te({type:s}),s.\u0275inj=hn({}),s})();function GT(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Et,Te,L)=>{L.d(Te,{Z:()=>qe});var c=L(2090),$=L(4859),k=L(6881),ee=L(1877);class ie{constructor(pe,xe){this._delegate=pe,this.firebase=xe,(0,k._addComponent)(pe,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(pe,xe=k._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(pe);return!$e.isInitialized()&&"EXPLICIT"===(null===(Oe=$e.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:xe})}_removeServiceInstance(pe,xe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(xe)}_addComponent(pe){(0,k._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,k._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ye(){const st=function ge(st){const pe={},xe={__esModule:!0,initializeApp:function De(ke,re={}){const tt=k.initializeApp(ke,re);if((0,c.r3)(pe,tt.name))return pe[tt.name];const St=new st(tt,xe);return pe[tt.name]=St,St},app:$e,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Re(ke){const re=ke.name,tt=re.replace("-compat","");if(k._registerComponent(ke)&&"PUBLIC"===ke.type){const St=(it=$e())=>{if("function"!=typeof it[tt])throw _e.create("invalid-app-argument",{appName:re});return it[tt]()};void 0!==ke.serviceProps&&(0,c.ZB)(St,ke.serviceProps),xe[tt]=St,st.prototype[tt]=function(...it){return this._getService.bind(this,re).apply(this,ke.multipleInstances?it:[])}}return"PUBLIC"===ke.type?xe[tt]:null},removeApp:function Oe(ke){delete pe[ke]},useAsService:function He(ke,re){return"serverAuth"===re?null:re},modularAPIs:k}};function $e(ke){if(!(0,c.r3)(pe,ke=ke||k._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:ke});return pe[ke]}return xe.default=xe,Object.defineProperty(xe,"apps",{get:function Ie(){return Object.keys(pe).map(ke=>pe[ke])}}),$e.App=st,xe}(ie);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function pe(xe){(0,c.ZB)(st,xe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),st}(),z=new ee.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=G;!function be(st){(0,k.registerVersion)("@firebase/app-compat","0.2.11",st)}()},6881:(Et,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Ii,_DEFAULT_ENTRY_NAME:()=>Pr,_addComponent:()=>lt,_addOrOverwriteComponent:()=>Lt,_apps:()=>ln,_clearComponents:()=>Xr,_components:()=>Kt,_getProvider:()=>Cr,_registerComponent:()=>jn,_removeServiceInstance:()=>kn,deleteApp:()=>Hn,getApp:()=>ei,getApps:()=>Bt,initializeApp:()=>tn,onLog:()=>zn,registerVersion:()=>Dr,setLogLevel:()=>Hr});var c=L(5861),$=L(4859),k=L(1877),ee=L(2090);const ie=(he,te)=>te.some(Fe=>he instanceof Fe);let se,_e;const G=new WeakMap,z=new WeakMap,J=new WeakMap,je=new WeakMap,be=new WeakMap;let pe={get(he,te,Fe){if(he instanceof IDBTransaction){if("done"===te)return z.get(he);if("objectStoreNames"===te)return he.objectStoreNames||J.get(he);if("store"===te)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return De(he[te])},set:(he,te,Fe)=>(he[te]=Fe,!0),has:(he,te)=>he instanceof IDBTransaction&&("done"===te||"store"===te)||te in he};function $e(he){return"function"==typeof he?function Oe(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...te){return he.apply(Ie(this),te),De(G.get(this))}:function(...te){return De(he.apply(Ie(this),te))}:function(te,...Fe){const mt=he.call(Ie(this),te,...Fe);return J.set(mt,te.sort?te.sort():[te]),De(mt)}}(he):(he instanceof IDBTransaction&&function st(he){if(z.has(he))return;const te=new Promise((Fe,mt)=>{const Rt=()=>{he.removeEventListener("complete",Xt),he.removeEventListener("error",vt),he.removeEventListener("abort",vt)},Xt=()=>{Fe(),Rt()},vt=()=>{mt(he.error||new DOMException("AbortError","AbortError")),Rt()};he.addEventListener("complete",Xt),he.addEventListener("error",vt),he.addEventListener("abort",vt)});z.set(he,te)}(he),ie(he,function ge(){return se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,pe):he)}function De(he){if(he instanceof IDBRequest)return function qe(he){const te=new Promise((Fe,mt)=>{const Rt=()=>{he.removeEventListener("success",Xt),he.removeEventListener("error",vt)},Xt=()=>{Fe(De(he.result)),Rt()},vt=()=>{mt(he.error),Rt()};he.addEventListener("success",Xt),he.addEventListener("error",vt)});return te.then(Fe=>{Fe instanceof IDBCursor&&G.set(Fe,he)}).catch(()=>{}),be.set(te,he),te}(he);if(je.has(he))return je.get(he);const te=$e(he);return te!==he&&(je.set(he,te),be.set(te,he)),te}const Ie=he=>be.get(he),ke=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],tt=new Map;function St(he,te){if(!(he instanceof IDBDatabase)||te in he||"string"!=typeof te)return;if(tt.get(te))return tt.get(te);const Fe=te.replace(/FromIndex$/,""),mt=te!==Fe,Rt=re.includes(Fe);if(!(Fe in(mt?IDBIndex:IDBObjectStore).prototype)||!Rt&&!ke.includes(Fe))return;const Xt=function(){var vt=(0,c.Z)(function*(fn,...sn){const kr=this.transaction(fn,Rt?"readwrite":"readonly");let hr=kr.store;return mt&&(hr=hr.index(sn.shift())),(yield Promise.all([hr[Fe](...sn),Rt&&kr.done]))[0]});return function(sn){return vt.apply(this,arguments)}}();return tt.set(te,Xt),Xt}!function xe(he){pe=he(pe)}(he=>({...he,get:(te,Fe,mt)=>St(te,Fe)||he.get(te,Fe,mt),has:(te,Fe)=>!!St(te,Fe)||he.has(te,Fe)}));class it{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function Zt(he){return"VERSION"===he.getComponent()?.type}(Fe)){const mt=Fe.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(Fe=>Fe).join(" ")}}const ct="@firebase/app",de=new k.Yd("@firebase/app"),Pr="[DEFAULT]",jr={[ct]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,Kt=new Map;function lt(he,te){try{he.container.addComponent(te)}catch(Fe){de.debug(`Component ${te.name} failed to register with FirebaseApp ${he.name}`,Fe)}}function Lt(he,te){he.container.addOrOverwriteComponent(te)}function jn(he){const te=he.name;if(Kt.has(te))return de.debug(`There were multiple attempts to register component ${te}.`),!1;Kt.set(te,he);for(const Fe of ln.values())lt(Fe,he);return!0}function Cr(he,te){const Fe=he.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),he.container.getProvider(te)}function kn(he,te,Fe=Pr){Cr(he,te).clearInstance(Fe)}function Xr(){Kt.clear()}const lr=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Jt{constructor(te,Fe,mt){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const Ii="9.22.1";function tn(he,te={}){let Fe=he;"object"!=typeof te&&(te={name:te});const mt=Object.assign({name:Pr,automaticDataCollectionEnabled:!1},te),Rt=mt.name;if("string"!=typeof Rt||!Rt)throw lr.create("bad-app-name",{appName:String(Rt)});if(Fe||(Fe=(0,ee.aH)()),!Fe)throw lr.create("no-options");const Xt=ln.get(Rt);if(Xt){if((0,ee.vZ)(Fe,Xt.options)&&(0,ee.vZ)(mt,Xt.config))return Xt;throw lr.create("duplicate-app",{appName:Rt})}const vt=new $.H0(Rt);for(const sn of Kt.values())vt.addComponent(sn);const fn=new Jt(Fe,mt,vt);return ln.set(Rt,fn),fn}function ei(he=Pr){const te=ln.get(he);if(!te&&he===Pr&&(0,ee.aH)())return tn();if(!te)throw lr.create("no-app",{appName:he});return te}function Bt(){return Array.from(ln.values())}function Hn(he){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(he){const te=he.name;ln.has(te)&&(ln.delete(te),yield Promise.all(he.container.getProviders().map(Fe=>Fe.delete())),he.isDeleted=!0)})).apply(this,arguments)}function Dr(he,te,Fe){var mt;let Rt=null!==(mt=jr[he])&&void 0!==mt?mt:he;Fe&&(Rt+=`-${Fe}`);const Xt=Rt.match(/\s|\//),vt=te.match(/\s|\//);if(Xt||vt){const fn=[`Unable to register library "${Rt}" with version "${te}":`];return Xt&&fn.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Xt&&vt&&fn.push("and"),vt&&fn.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void de.warn(fn.join(" "))}jn(new $.wA(`${Rt}-version`,()=>({library:Rt,version:te}),"VERSION"))}function zn(he,te){if(null!==he&&"function"!=typeof he)throw lr.create("invalid-log-argument");(0,k.Am)(he,te)}function Hr(he){(0,k.Ub)(he)}const Or="firebase-heartbeat-database",zr=1,H="firebase-heartbeat-store";let B=null;function O(){return B||(B=function Re(he,te,{blocked:Fe,upgrade:mt,blocking:Rt,terminated:Xt}={}){const vt=indexedDB.open(he,te),fn=De(vt);return mt&&vt.addEventListener("upgradeneeded",sn=>{mt(De(vt.result),sn.oldVersion,sn.newVersion,De(vt.transaction),sn)}),Fe&&vt.addEventListener("blocked",sn=>Fe(sn.oldVersion,sn.newVersion,sn)),fn.then(sn=>{Xt&&sn.addEventListener("close",()=>Xt()),Rt&&sn.addEventListener("versionchange",kr=>Rt(kr.oldVersion,kr.newVersion,kr))}).catch(()=>{}),fn}(Or,zr,{upgrade:(he,te)=>{0===te&&he.createObjectStore(H)}}).catch(he=>{throw lr.create("idb-open",{originalErrorMessage:he.message})})),B}function R(){return(R=(0,c.Z)(function*(he){try{return yield(yield O()).transaction(H).objectStore(H).get(nt(he))}catch(te){if(te instanceof ee.ZR)de.warn(te.message);else{const Fe=lr.create("idb-get",{originalErrorMessage:te?.message});de.warn(Fe.message)}}})).apply(this,arguments)}function W(he,te){return ve.apply(this,arguments)}function ve(){return(ve=(0,c.Z)(function*(he,te){try{const mt=(yield O()).transaction(H,"readwrite");yield mt.objectStore(H).put(te,nt(he)),yield mt.done}catch(Fe){if(Fe instanceof ee.ZR)de.warn(Fe.message);else{const mt=lr.create("idb-set",{originalErrorMessage:Fe?.message});de.warn(mt.message)}}})).apply(this,arguments)}function nt(he){return`${he.name}!${he.options.appId}`}class Yt{constructor(te){this.container=te,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new $t(Fe),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var te=this;return(0,c.Z)(function*(){const mt=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Pt();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!te._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Rt))return te._heartbeatsCache.heartbeats.push({date:Rt,agent:mt}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(Xt=>{const vt=new Date(Xt.date).valueOf();return Date.now()-vt<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,c.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Fe=Pt(),{heartbeatsToSend:mt,unsentEntries:Rt}=function Cn(he,te=1024){const Fe=[];let mt=he.slice();for(const Rt of he){const Xt=Fe.find(vt=>vt.agent===Rt.agent);if(Xt){if(Xt.dates.push(Rt.date),dr(Fe)>te){Xt.dates.pop();break}}else if(Fe.push({agent:Rt.agent,dates:[Rt.date]}),dr(Fe)>te){Fe.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:mt}}(te._heartbeatsCache.heartbeats),Xt=(0,ee.L)(JSON.stringify({version:2,heartbeats:mt}));return te._heartbeatsCache.lastSentHeartbeatDate=Fe,Rt.length>0?(te._heartbeatsCache.heartbeats=Rt,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),Xt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class $t{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,c.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function F(he){return R.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Fe=this;return(0,c.Z)(function*(){var mt;if(yield Fe._canUseIndexedDBPromise){const Xt=yield Fe.read();return W(Fe.app,{lastSentHeartbeatDate:null!==(mt=te.lastSentHeartbeatDate)&&void 0!==mt?mt:Xt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Fe=this;return(0,c.Z)(function*(){var mt;if(yield Fe._canUseIndexedDBPromise){const Xt=yield Fe.read();return W(Fe.app,{lastSentHeartbeatDate:null!==(mt=te.lastSentHeartbeatDate)&&void 0!==mt?mt:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...te.heartbeats]})}})()}}function dr(he){return(0,ee.L)(JSON.stringify({version:2,heartbeats:he})).length}!function is(he){jn(new $.wA("platform-logger",te=>new it(te),"PRIVATE")),jn(new $.wA("heartbeat",te=>new Yt(te),"PRIVATE")),Dr(ct,"0.9.11",he),Dr(ct,"0.9.11","esm2017"),Dr("fire-js","")}("")},4859:(Et,Te,L)=>{L.d(Te,{H0:()=>ge,wA:()=>k});var c=L(5861),$=L(2090);class k{constructor(G,z,J){this.name=G,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ee="[DEFAULT]";class ie{constructor(G,z){this.name=G,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(z)){const J=new $.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:z});je&&J.resolve(je)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(G){var z;const J=this.normalizeInstanceIdentifier(G?.identifier),je=null!==(z=G?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(be){if(je)return null;throw be}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function _e(ye){return"EAGER"===ye.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(z);try{const be=this.getOrInitializeService({instanceIdentifier:je});J.resolve(be)}catch{}}}}clearInstance(G=ee){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,c.Z)(function*(){const z=Array.from(G.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ee){return this.instances.has(G)}getOptions(G=ee){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:z={}}=G,J=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[be,qe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(be)&&qe.resolve(je);return je}onInit(G,z){var J;const je=this.normalizeInstanceIdentifier(z),be=null!==(J=this.onInitCallbacks.get(je))&&void 0!==J?J:new Set;be.add(G),this.onInitCallbacks.set(je,be);const qe=this.instances.get(je);return qe&&G(qe,je),()=>{be.delete(G)}}invokeOnInitCallbacks(G,z){const J=this.onInitCallbacks.get(z);if(J)for(const je of J)try{je(G,z)}catch{}}getOrInitializeService({instanceIdentifier:G,options:z={}}){let J=this.instances.get(G);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=G,ye===ee?void 0:ye),options:z}),this.instances.set(G,J),this.instancesOptions.set(G,z),this.invokeOnInitCallbacks(J,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,J)}catch{}var ye;return J||null}normalizeInstanceIdentifier(G=ee){return this.component?this.component.multipleInstances?G:ee:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const z=this.getProvider(G.name);if(z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const z=new ie(G,this);return this.providers.set(G,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,Te,L)=>{L.d(Te,{Am:()=>ye,Ub:()=>ge,Yd:()=>_e,in:()=>$});const c=[];var $=(()=>{return(G=$||($={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",$;var G})();const k={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ee=$.INFO,ie={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},se=(G,z,...J)=>{if(z<G.logLevel)return;const je=(new Date).toISOString(),be=ie[z];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[be](`[${je}]  ${G.name}:`,...J)};class _e{constructor(z){this.name=z,this._logLevel=ee,this._logHandler=se,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function ge(G){c.forEach(z=>{z.setLogLevel(G)})}function ye(G,z){for(const J of c){let je=null;z&&z.level&&(je=k[z.level]),J.userLogHandler=null===G?null:(be,qe,...st)=>{const pe=st.map(xe=>{if(null==xe)return null;if("string"==typeof xe)return xe;if("number"==typeof xe||"boolean"==typeof xe)return xe.toString();if(xe instanceof Error)return xe.message;try{return JSON.stringify(xe)}catch{return null}}).filter(xe=>xe).join(" ");qe>=(je??be.logLevel)&&G({level:$[qe].toLowerCase(),message:pe,args:st,type:be.name})}}}},259:(Et,Te,L)=>{L.d(Te,{C6:()=>c.getApps,KN:()=>c.registerVersion,Mq:()=>c.getApp,ZF:()=>c.initializeApp});var c=L(6881);(0,c.registerVersion)("firebase","9.22.1","app")},9260:(Et,Te,L)=>{L.d(Te,{Z:()=>c.Z});var c=L(3942);c.Z.registerVersion("firebase","9.22.1","app-compat")},9568:(Et,Te,L)=>{L.r(Te);var c=L(5861),$=L(3942),k=L(1389),ee=L(2090),_e=(L(6881),L(1877),L(4859));function ge(){return window}const ye=2e3;function z(){return z=(0,c.Z)(function*(O,F,R){var W;const{BuildInfo:ve}=ge();(0,k.as)(F.sessionId,"AuthEvent did not contain a session ID");const nt=yield function xe(O){return Oe.apply(this,arguments)}(F.sessionId),xt={};return(0,k.at)()?xt.ibi=ve.packageName:(0,k.au)()?xt.apn=ve.packageName:(0,k.av)(O,"operation-not-supported-in-this-environment"),ve.displayName&&(xt.appDisplayName=ve.displayName),xt.sessionId=nt,(0,k.aw)(O,R,F.type,void 0,null!==(W=F.eventId)&&void 0!==W?W:void 0,xt)}),z.apply(this,arguments)}function je(){return(je=(0,c.Z)(function*(O){const{BuildInfo:F}=ge(),R={};(0,k.at)()?R.iosBundleId=F.packageName:(0,k.au)()?R.androidPackageName=F.packageName:(0,k.av)(O,"operation-not-supported-in-this-environment"),yield(0,k.ax)(O,R)})).apply(this,arguments)}function st(){return(st=(0,c.Z)(function*(O,F,R){const{cordova:W}=ge();let ve=()=>{};try{yield new Promise((nt,xt)=>{let Tt=null;function Yt(){var $t;nt();const dr=null===($t=W.plugins.browsertab)||void 0===$t?void 0:$t.close;"function"==typeof dr&&dr(),"function"==typeof R?.close&&R.close()}function Pt(){Tt||(Tt=window.setTimeout(()=>{xt((0,k.az)(O,"redirect-cancelled-by-user"))},ye))}function Cn(){"visible"===document?.visibilityState&&Pt()}F.addPassiveListener(Yt),document.addEventListener("resume",Pt,!1),(0,k.au)()&&document.addEventListener("visibilitychange",Cn,!1),ve=()=>{F.removePassiveListener(Yt),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",Cn,!1),Tt&&window.clearTimeout(Tt)}})}finally{ve()}})).apply(this,arguments)}function Oe(){return(Oe=(0,c.Z)(function*(O){const F=function $e(O){if((0,k.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const F=new ArrayBuffer(O.length),R=new Uint8Array(F);for(let W=0;W<O.length;W++)R[W]=O.charCodeAt(W);return R}(O),R=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array(R)).map(ve=>ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const De=20;class Ie extends k.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(F)),super.onEvent(F)}initialized(){var F=this;return(0,c.Z)(function*(){yield F.initPromise})()}}function ke(O){return re.apply(this,arguments)}function re(){return(re=(0,c.Z)(function*(O){const F=yield it()._get(Zt(O));return F&&(yield it()._remove(Zt(O))),F})).apply(this,arguments)}function St(){const O=[],F="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<De;R++){const W=Math.floor(Math.random()*F.length);O.push(F.charAt(W))}return O.join("")}function it(){return(0,k.aC)(k.b)}function Zt(O){return(0,k.aD)("authEvent",O.config.apiKey,O.name)}function de(O){if(!O?.includes("?"))return{};const[F,...R]=O.split("?");return(0,ee.zd)(R.join("?"))}const Me=class Ce{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(F){var R=this;return(0,c.Z)(function*(){const W=F._key();let ve=R.eventManagers.get(W);return ve||(ve=new Ie(F),R.eventManagers.set(W,ve),R.attachCallbackListeners(F,ve)),ve})()}_openPopup(F){(0,k.av)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,R,W,ve){var nt=this;return(0,c.Z)(function*(){!function pe(O){var F,R,W,ve,nt,xt,Tt,Yt,Pt,Cn;const $t=ge();(0,k.aA)("function"==typeof(null===(F=$t?.universalLinks)||void 0===F?void 0:F.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aA)(typeof(null===(R=$t?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aA)("function"==typeof(null===(nt=null===(ve=null===(W=$t?.cordova)||void 0===W?void 0:W.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===nt?void 0:nt.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(Yt=null===(Tt=null===(xt=$t?.cordova)||void 0===xt?void 0:xt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===Yt?void 0:Yt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(Cn=null===(Pt=$t?.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===Cn?void 0:Cn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const xt=yield nt._initialize(F);yield xt.initialized(),xt.resetRedirect(),(0,k.aG)(),yield nt._originValidation(F);const Tt=function Re(O,F,R=null){return{type:F,eventId:R,urlResponse:null,sessionId:St(),postBody:null,tenantId:O.tenantId,error:(0,k.az)(O,"no-auth-event")}}(F,W,ve);yield function He(O,F){return it()._set(Zt(O),F)}(F,Tt);const Yt=yield function G(O,F,R){return z.apply(this,arguments)}(F,Tt,R),Pt=yield function be(O){const{cordova:F}=ge();return new Promise(R=>{F.plugins.browsertab.isAvailable(W=>{let ve=null;W?F.plugins.browsertab.openUrl(O):ve=F.InAppBrowser.open(O,(0,k.ay)()?"_blank":"_system","location=yes"),R(ve)})})}(Yt);return function qe(O,F,R){return st.apply(this,arguments)}(F,xt,Pt)})()}_isIframeWebStorageSupported(F,R){throw new Error("Method not implemented.")}_originValidation(F){const R=F._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function J(O){return je.apply(this,arguments)}(F)),this.originValidationPromises[R]}attachCallbackListeners(F,R){const{universalLinks:W,handleOpenURL:ve,BuildInfo:nt}=ge(),xt=setTimeout((0,c.Z)(function*(){yield ke(F),R.onEvent(Ge())}),500),Tt=function(){var Cn=(0,c.Z)(function*($t){clearTimeout(xt);const dr=yield ke(F);let is=null;dr&&$t?.url&&(is=function tt(O,F){var R,W;const ve=function Is(O){const F=de(O),R=F.link?decodeURIComponent(F.link):void 0,W=de(R).link,ve=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return de(ve).link||ve||W||R||O}(F);if(ve.includes("/__/auth/callback")){const nt=de(ve),xt=nt.firebaseError?function ct(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(nt.firebaseError)):null,Tt=null===(W=null===(R=xt?.code)||void 0===R?void 0:R.split("auth/"))||void 0===W?void 0:W[1],Yt=Tt?(0,k.az)(Tt):null;return Yt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Yt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:ve,postBody:null}}return null}(dr,$t.url)),R.onEvent(is||Ge())});return function(dr){return Cn.apply(this,arguments)}}();typeof W<"u"&&"function"==typeof W.subscribe&&W.subscribe(null,Tt);const Yt=ve,Pt=`${nt.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var Cn=(0,c.Z)(function*($t){if($t.toLowerCase().startsWith(Pt)&&Tt({url:$t}),"function"==typeof Yt)try{Yt($t)}catch(dr){console.error(dr)}});return function($t){return Cn.apply(this,arguments)}}()}};function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.az)("no-auth-event")}}const Tn=1e3;function ut(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function rn(O=(0,ee.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nr(){try{const O=self.localStorage,F=k.aL();if(O)return O.setItem(F,"1"),O.removeItem(F),!function Vn(O=(0,ee.z$)()){return function In(){return(0,ee.w1)()&&11===document?.documentMode}()||function Rr(O=(0,ee.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ee.hl)()}catch{return Qn()&&(0,ee.hl)()}return!1}function Qn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jr(){return(function _t(){return"http:"===ut()||"https:"===ut()}()||(0,ee.ru)()||rn())&&!function hn(){return(0,ee.b$)()||(0,ee.UG)()}()&&Nr()&&!Qn()}function Fi(){return rn()&&typeof document<"u"}function Bn(){return(Bn=(0,c.Z)(function*(){return!!Fi()&&new Promise(O=>{const F=setTimeout(()=>{O(!1)},Tn);document.addEventListener("deviceready",()=>{clearTimeout(F),O(!0)})})})).apply(this,arguments)}const On={LOCAL:"local",NONE:"none",SESSION:"session"},Wi=k.aA,$n="persistence";function jr(O){return ln.apply(this,arguments)}function ln(){return(ln=(0,c.Z)(function*(O){yield O._initializationPromise;const F=lt(),R=k.aD($n,O.config.apiKey,O.name);F&&F.setItem(R,O._getPersistence())})).apply(this,arguments)}function lt(){var O;try{return(null===(O=function ft(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Lt=k.aA;class jn{constructor(){this.browserResolver=k.aC(k.k),this.cordovaResolver=k.aC(Me),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(F){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,R,W,ve){var nt=this;return(0,c.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openPopup(F,R,W,ve)})()}_openRedirect(F,R,W,ve){var nt=this;return(0,c.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openRedirect(F,R,W,ve)})()}_isIframeWebStorageSupported(F,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,R)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return Fi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,c.Z)(function*(){if(F.underlyingResolver)return;const R=yield function Ys(){return Bn.apply(this,arguments)}();F.underlyingResolver=R?F.cordovaResolver:F.browserResolver})()}}function Cr(O){return O.unwrap()}function Xr(O){return lr(O)}function lr(O){const{_tokenResponse:F}=O instanceof ee.ZR?O.customData:O;if(!F)return null;if(!(O instanceof ee.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return k.P.credentialFromResult(O);const R=F.providerId;if(!R||R===k.p.PASSWORD)return null;let W;switch(R){case k.p.GOOGLE:W=k.V;break;case k.p.FACEBOOK:W=k.U;break;case k.p.GITHUB:W=k.W;break;case k.p.TWITTER:W=k.Z;break;default:const{oauthIdToken:ve,oauthAccessToken:nt,oauthTokenSecret:xt,pendingToken:Tt,nonce:Yt}=F;return nt||xt||ve||Tt?Tt?R.startsWith("saml.")?k.aO._create(R,Tt):k.L._fromParams({providerId:R,signInMethod:R,pendingToken:Tt,idToken:ve,accessToken:nt}):new k.X(R).credential({idToken:ve,accessToken:nt,rawNonce:Yt}):null}return O instanceof ee.ZR?W.credentialFromError(O):W.credentialFromResult(O)}function Jt(O,F){return F.catch(R=>{throw R instanceof ee.ZR&&function Fn(O,F){var R;const W=null===(R=F.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===F?.code)F.resolver=new ei(O,k.aq(O,F));else if(W){const ve=lr(F),nt=F;ve&&(nt.credential=ve,nt.tenantId=W.tenantId||void 0,nt.email=W.email||void 0,nt.phoneNumber=W.phoneNumber||void 0)}}(O,R),R}).then(R=>{const ve=R.user;return{operationType:R.operationType,credential:Xr(R),additionalUserInfo:k.ao(R),user:Bt.getOrCreate(ve)}})}function Ii(O,F){return tn.apply(this,arguments)}function tn(){return(tn=(0,c.Z)(function*(O,F){const R=yield F;return{verificationId:R.verificationId,confirm:W=>Jt(O,R.confirm(W))}})).apply(this,arguments)}class ei{constructor(F,R){this.resolver=R,this.auth=function kn(O){return O.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return Jt(Cr(this.auth),this.resolver.resolveSignIn(F))}}class Bt{constructor(F){this._delegate=F,this.multiFactor=k.ar(F)}static getOrCreate(F){return Bt.USER_MAP.has(F)||Bt.USER_MAP.set(F,new Bt(F)),Bt.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var R=this;return(0,c.Z)(function*(){return Jt(R.auth,k.a0(R._delegate,F))})()}linkWithPhoneNumber(F,R){var W=this;return(0,c.Z)(function*(){return Ii(W.auth,k.l(W._delegate,F,R))})()}linkWithPopup(F){var R=this;return(0,c.Z)(function*(){return Jt(R.auth,k.d(R._delegate,F,jn))})()}linkWithRedirect(F){var R=this;return(0,c.Z)(function*(){return yield jr(k.aH(R.auth)),k.g(R._delegate,F,jn)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var R=this;return(0,c.Z)(function*(){return Jt(R.auth,k.a1(R._delegate,F))})()}reauthenticateWithPhoneNumber(F,R){return Ii(this.auth,k.r(this._delegate,F,R))}reauthenticateWithPopup(F){return Jt(this.auth,k.e(this._delegate,F,jn))}reauthenticateWithRedirect(F){var R=this;return(0,c.Z)(function*(){return yield jr(k.aH(R.auth)),k.h(R._delegate,F,jn)})()}sendEmailVerification(F){return k.ae(this._delegate,F)}unlink(F){var R=this;return(0,c.Z)(function*(){return yield k.an(R._delegate,F),R})()}updateEmail(F){return k.aj(this._delegate,F)}updatePassword(F){return k.ak(this._delegate,F)}updatePhoneNumber(F){return k.u(this._delegate,F)}updateProfile(F){return k.ai(this._delegate,F)}verifyBeforeUpdateEmail(F,R){return k.af(this._delegate,F,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bt.USER_MAP=new WeakMap;const Hn=k.aA;let Mn=(()=>{class O{constructor(R,W){if(this.app=R,W.isInitialized())return this._delegate=W.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ve}=R.options;Hn(ve,"invalid-api-key",{appName:R.name}),Hn(ve,"invalid-api-key",{appName:R.name});const nt=typeof window<"u"?jn:void 0;this._delegate=W.initialize({options:{persistence:zn(ve,R.name),popupRedirectResolver:nt}}),this._delegate._updateErrorMap(k.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,W){k.I(this._delegate,R,W)}applyActionCode(R){return k.a5(this._delegate,R)}checkActionCode(R){return k.a6(this._delegate,R)}confirmPasswordReset(R,W){return k.a4(this._delegate,R,W)}createUserWithEmailAndPassword(R,W){var ve=this;return(0,c.Z)(function*(){return Jt(ve._delegate,k.a8(ve._delegate,R,W))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return k.ad(this._delegate,R)}isSignInWithEmailLink(R){return k.ab(this._delegate,R)}getRedirectResult(){var R=this;return(0,c.Z)(function*(){Hn(Jr(),R._delegate,"operation-not-supported-in-this-environment");const W=yield k.j(R._delegate,jn);return W?Jt(R._delegate,Promise.resolve(W)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function Le(O,F){(0,k.aH)(O)._logFramework(F)}(this._delegate,R)}onAuthStateChanged(R,W,ve){const{next:nt,error:xt,complete:Tt}=Dr(R,W,ve);return this._delegate.onAuthStateChanged(nt,xt,Tt)}onIdTokenChanged(R,W,ve){const{next:nt,error:xt,complete:Tt}=Dr(R,W,ve);return this._delegate.onIdTokenChanged(nt,xt,Tt)}sendSignInLinkToEmail(R,W){return k.aa(this._delegate,R,W)}sendPasswordResetEmail(R,W){return k.a3(this._delegate,R,W||void 0)}setPersistence(R){var W=this;return(0,c.Z)(function*(){let ve;switch(function Pr(O,F){Wi(Object.values(On).includes(F),O,"invalid-persistence-type"),(0,ee.b$)()?Wi(F!==On.SESSION,O,"unsupported-persistence-type"):(0,ee.UG)()?Wi(F===On.NONE,O,"unsupported-persistence-type"):Qn()?Wi(F===On.NONE||F===On.LOCAL&&(0,ee.hl)(),O,"unsupported-persistence-type"):Wi(F===On.NONE||Nr(),O,"unsupported-persistence-type")}(W._delegate,R),R){case On.SESSION:ve=k.a;break;case On.LOCAL:ve=(yield k.aC(k.i)._isAvailable())?k.i:k.b;break;case On.NONE:ve=k.N;break;default:return k.av("argument-error",{appName:W._delegate.name})}return W._delegate.setPersistence(ve)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return Jt(this._delegate,k._(this._delegate))}signInWithCredential(R){return Jt(this._delegate,k.$(this._delegate,R))}signInWithCustomToken(R){return Jt(this._delegate,k.a2(this._delegate,R))}signInWithEmailAndPassword(R,W){return Jt(this._delegate,k.a9(this._delegate,R,W))}signInWithEmailLink(R,W){return Jt(this._delegate,k.ac(this._delegate,R,W))}signInWithPhoneNumber(R,W){return Ii(this._delegate,k.s(this._delegate,R,W))}signInWithPopup(R){var W=this;return(0,c.Z)(function*(){return Hn(Jr(),W._delegate,"operation-not-supported-in-this-environment"),Jt(W._delegate,k.c(W._delegate,R,jn))})()}signInWithRedirect(R){var W=this;return(0,c.Z)(function*(){return Hn(Jr(),W._delegate,"operation-not-supported-in-this-environment"),yield jr(W._delegate),k.f(W._delegate,R,jn)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return k.a7(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=On,O})();function Dr(O,F,R){let W=O;"function"!=typeof O&&({next:W,error:F,complete:R}=O);const ve=W;return{next:xt=>ve(xt&&Bt.getOrCreate(xt)),error:F,complete:R}}function zn(O,F){const R=function Kt(O,F){const R=lt();if(!R)return[];const W=k.aD($n,O,F);switch(R.getItem(W)){case On.NONE:return[k.N];case On.LOCAL:return[k.i,k.a];case On.SESSION:return[k.a];default:return[]}}(O,F);if(typeof self<"u"&&!R.includes(k.i)&&R.push(k.i),typeof window<"u")for(const W of[k.b,k.a])R.includes(W)||R.push(W);return R.includes(k.N)||R.push(k.N),R}class Hr{constructor(){this.providerId="phone",this._delegate=new k.P(Cr($.Z.auth()))}static credential(F,R){return k.P.credential(F,R)}verifyPhoneNumber(F,R){return this._delegate.verifyPhoneNumber(F,R)}unwrap(){return this._delegate}}Hr.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Hr.PROVIDER_ID=k.P.PROVIDER_ID;const Or=k.aA;class zr{constructor(F,R,W=$.Z.app()){var ve;Or(null===(ve=W.options)||void 0===ve?void 0:ve.apiKey,"invalid-api-key",{appName:W.name}),this._delegate=new k.R(F,R,W.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function B(O){O.INTERNAL.registerComponent(new _e.wA("auth-compat",F=>{const R=F.getProvider("app-compat").getImmediate(),W=F.getProvider("auth");return new Mn(R,W)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.Q,FacebookAuthProvider:k.U,GithubAuthProvider:k.W,GoogleAuthProvider:k.V,OAuthProvider:k.X,SAMLAuthProvider:k.Y,PhoneAuthProvider:Hr,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:zr,TwitterAuthProvider:k.Z,Auth:Mn,AuthCredential:k.J,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},5861:(Et,Te,L)=>{function c(k,ee,ie,se,_e,ge,ye){try{var G=k[ge](ye),z=G.value}catch(J){return void ie(J)}G.done?ee(z):Promise.resolve(z).then(se,_e)}function $(k){return function(){var ee=this,ie=arguments;return new Promise(function(se,_e){var ge=k.apply(ee,ie);function ye(z){c(ge,se,_e,ye,G,"next",z)}function G(z){c(ge,se,_e,ye,G,"throw",z)}ye(void 0)})}}L.d(Te,{Z:()=>$})},7582:(Et,Te,L)=>{function ee(de,me){var Ce={};for(var Me in de)Object.prototype.hasOwnProperty.call(de,Me)&&me.indexOf(Me)<0&&(Ce[Me]=de[Me]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(Me=Object.getOwnPropertySymbols(de);Ge<Me.length;Ge++)me.indexOf(Me[Ge])<0&&Object.prototype.propertyIsEnumerable.call(de,Me[Ge])&&(Ce[Me[Ge]]=de[Me[Ge]])}return Ce}function J(de,me,Ce,Me){return new(Ce||(Ce=Promise))(function(Le,Pe){function ht(_t){try{ut(Me.next(_t))}catch(rn){Pe(rn)}}function Tn(_t){try{ut(Me.throw(_t))}catch(rn){Pe(rn)}}function ut(_t){_t.done?Le(_t.value):function Ge(Le){return Le instanceof Ce?Le:new Ce(function(Pe){Pe(Le)})}(_t.value).then(ht,Tn)}ut((Me=Me.apply(de,me||[])).next())})}function De(de){return this instanceof De?(this.v=de,this):new De(de)}function Ie(de,me,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,Me=Ce.apply(de,me||[]),Le=[];return Ge={},Pe("next"),Pe("throw"),Pe("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Pe(hn){Me[hn]&&(Ge[hn]=function(In){return new Promise(function(Rr,Vn){Le.push([hn,In,Rr,Vn])>1||ht(hn,In)})})}function ht(hn,In){try{!function Tn(hn){hn.value instanceof De?Promise.resolve(hn.value.v).then(ut,_t):rn(Le[0][2],hn)}(Me[hn](In))}catch(Rr){rn(Le[0][3],Rr)}}function ut(hn){ht("next",hn)}function _t(hn){ht("throw",hn)}function rn(hn,In){hn(In),Le.shift(),Le.length&&ht(Le[0][0],Le[0][1])}}function He(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,me=de[Symbol.asyncIterator];return me?me.call(de):(de=function st(de){var me="function"==typeof Symbol&&Symbol.iterator,Ce=me&&de[me],Me=0;if(Ce)return Ce.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Me>=de.length&&(de=void 0),{value:de&&de[Me++],done:!de}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),Ce={},Me("next"),Me("throw"),Me("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Me(Le){Ce[Le]=de[Le]&&function(Pe){return new Promise(function(ht,Tn){!function Ge(Le,Pe,ht,Tn){Promise.resolve(Tn).then(function(ut){Le({value:ut,done:ht})},Pe)}(ht,Tn,(Pe=de[Le](Pe)).done,Pe.value)})}}}L.d(Te,{FC:()=>Ie,KL:()=>He,_T:()=>ee,mG:()=>J,qq:()=>De})}},Et=>{Et(Et.s=5511)}]);